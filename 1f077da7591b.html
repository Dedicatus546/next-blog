<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><link rel="icon" type="image/svg+xml" href="/logo.svg"><meta name="viewport" content="width=device-width,initial-scale=1"><title>æ‹ã®æ­Œ</title><script type="importmap">{"imports":{"vue":"https://esm.sh/vue","vue-router":"https://esm.sh/vue-router","pinia":"https://esm.sh/pinia","@vueuse/core":"https://esm.sh/@vueuse/core","@vueuse/components":"https://esm.sh/@vueuse/components","@vueuse/router":"https://esm.sh/@vueuse/router","date-fns":"https://esm.sh/date-fns","nprogress":"https://esm.sh/nprogress","octokit":"https://esm.sh/octokit","pinia-plugin-persistedstate":"https://esm.sh/pinia-plugin-persistedstate","vue-router-better-scroller":"https://esm.sh/vue-router-better-scroller"}}</script><script type="module" async="" crossorigin="" src="/assets/app-CQORsqEe.js"></script><link rel="stylesheet" crossorigin="" href="/assets/app-BeLlpy4Q.css"><link rel="modulepreload" crossorigin="" href="/assets/å¦‚ä½•æ‡’åŠ è½½å›¾ç‰‡-4lm7y7Fj.js"></head><body><div id="app" data-server-rendered="true"><div class="mujika" min-h="100vh" flex="~ col" bg="[--mygo-c-bg-alt]"><header class="mujika-header" flex="~ shrink-0" px-4="" h="70px" bg="[var(--mygo-c-bg)]" items-center="" justify-between="" data-v-50c24b4d=""><a href="/" class="" flex="" gap-4="" items-center="" data-v-50c24b4d=""><img w="40px" aspect-ratio-square="" src="/logo.svg" alt="æ‹ã®æ­Œçš„logo" data-v-50c24b4d=""></a><div flex="" gap-2="" items-center="" lg:gap-4="" data-v-50c24b4d=""><div p-1="" flex="" gap-1="" rounded="6px" bg="[var(--mygo-c-bg-alt)]" data-v-50c24b4d=""><!--[--><div leading="[1]" px-2="" py-1="" cursor-pointer="" rounded="6px" class="bg-[var(--mygo-c-bg)]" title="è‡ªåŠ¨" data-v-50c24b4d=""><!--[-->Auto<!--]--></div><div leading="[1]" px-2="" py-1="" cursor-pointer="" rounded="6px" class="" title="æ—¥é—´" data-v-50c24b4d=""><!--[--><i class="i-ri:sun-line" data-v-50c24b4d=""></i><!--]--></div><div leading="[1]" px-2="" py-1="" cursor-pointer="" rounded="6px" class="" title="å¤œé—´" data-v-50c24b4d=""><!--[--><i class="i-ri:moon-line" data-v-50c24b4d=""></i><!--]--></div><!--]--></div><a href="/archive" class="" data-v-50c24b4d=""><i class="i-mi:archive" data-v-50c24b4d=""></i> å½’æ¡£</a></div></header><main class="mujika-home" flex="grow" mx="auto" min-h="0" p-2="" w-full="" un-2xl:w="[calc(96rem-var(--spacing)*2)]"><div flex="" gap-2="" items-start=""><div flex="~ col grow" gap-2="" min-w-0=""><div class="mujika-card mujika-card--hover mujika-card--border" w-full="" overflow-auto="" data-v-7ac4adc5=""><div class="p-4 lg:p-8" data-v-7ac4adc5=""><!--[--><div flex="~ col" mb-4="" gap-4=""><h1 break-all="" text="34px center">å¦‚ä½•æ‡’åŠ è½½å›¾ç‰‡</h1></div><div flex="~ col" gap-3="" text="[var(--mygo-c-text-2)]"><div flex="~ wrap" gap-3="" justify-center=""><!----><div flex="" gap-1="" items-center=""><i class="i-fa6-regular:calendar"></i><span un-hidden="" lg:inline="">å‘è¡¨äº</span><span pl-1="">2022-03-06 22:42</span></div><div flex="" gap-1="" items-center=""><i class="i-fa6-regular:calendar-check"></i><span un-hidden="" lg:inline="">æ›´æ–°äº</span><span pl-1="">2023-02-13 18:28</span></div><div flex="" gap-1="" items-center=""><i class="i-fa6-regular:folder"></i><span un-hidden="" lg:inline="">åˆ†ç±»äº</span><!--[--><a pl-1="" href="/category/ç¼–ç¨‹">ç¼–ç¨‹</a><!--]--></div></div><div flex="~ wrap" gap-3="" justify-center=""><div flex="" gap-1="" items-center=""><i class="i-fa6-regular:file-word"></i><span un-hidden="" lg:inline="">æ€»å­—æ•°</span><span pl-1="">3.5K</span></div><div flex="" gap-1="" items-center=""><i class="i-fa6-regular:clock"></i><span un-hidden="" lg:inline="">é˜…è¯»æ—¶é•¿ â‰ˆ</span><span pl-1="">13 åˆ†é’Ÿ</span></div></div></div><div class="mujika-doc-content"><!--[--><div class="kan-doc"><h1 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€">ğŸ”—</a></h1><p><code>vueuse/core</code> ä¸­æœ‰ <code>useElementVisibility</code> ä»¥åŠ <code>useIntersectionObserver</code> è¿™ä¸¤ä¸ª <code>API</code> ã€‚</p><p>åˆšå¥½å¯ä»¥å†™å†™å…³äºå›¾ç‰‡æ‡’åŠ è½½çš„ä¸€äº›å®ç°æ–¹æ³•ã€‚</p><h1 id="æ­£æ–‡" tabindex="-1">æ­£æ–‡ <a class="header-anchor" href="#æ­£æ–‡">ğŸ”—</a></h1><h2 id="ä»€ä¹ˆæ˜¯å›¾ç‰‡æ‡’åŠ è½½" tabindex="-1">ä»€ä¹ˆæ˜¯å›¾ç‰‡æ‡’åŠ è½½ <a class="header-anchor" href="#ä»€ä¹ˆæ˜¯å›¾ç‰‡æ‡’åŠ è½½">ğŸ”—</a></h2><p>å¯ä»¥ç®€å•çš„ç†è§£ä¸ºåªæœ‰å›¾ç‰‡åœ¨ç¬¬ä¸€æ¬¡è¿›å…¥ç”¨æˆ·å¯è§†èŒƒå›´æ—¶è¿›è¡ŒåŠ è½½çš„ä¸€ä¸ªæŠ€æœ¯ã€‚</p><h2 id="ä¸ºä»€ä¹ˆè¦å›¾ç‰‡æ‡’åŠ è½½" tabindex="-1">ä¸ºä»€ä¹ˆè¦å›¾ç‰‡æ‡’åŠ è½½ <a class="header-anchor" href="#ä¸ºä»€ä¹ˆè¦å›¾ç‰‡æ‡’åŠ è½½">ğŸ”—</a></h2><p>å¯¹äºæ¯”è¾ƒå°å‹çš„ç½‘ç«™ï¼Œå¯¹äºé¦–é¡µçš„å›¾ç‰‡èµ„æºï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹éƒ½æ˜¯ç›´æ¥åŠ è½½çš„ã€‚</p><p>ä½†æ˜¯å½“ç½‘ç«™é¦–é¡µå˜å¤æ‚ï¼Œæ¯”å¦‚è¶…å¤šçš„å±•ç¤ºå›¾çš„æ—¶å€™ï¼Œä¸åœ¨ç”¨æˆ·å¯è§†åŒºåŸŸçš„éƒ¨åˆ†çš„å›¾ç‰‡å…¶å®æ˜¯å¯ä»¥ä¸å»åŠ è½½çš„ã€‚</p><p>å› ä¸ºè¿™äº›å›¾ç‰‡å¯¹ç”¨æˆ·æ¥è¯´ä¸å¯æ„ŸçŸ¥ï¼Œå®Œå…¨å¯ä»¥åœ¨è¿›å…¥ç”¨æˆ·å¯è§†åŒºåŸŸä¹‹åå†å‘å‡ºè¯·æ±‚è¿›è¡ŒåŠ è½½ã€‚</p><p>è¿™å°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„å›¾ç‰‡æ‡’åŠ è½½ï¼Œæ¯”å¦‚è§†é¢‘ç½‘ç«™ <code>Bilibili</code> ã€‚</p><p><code>B</code> ç«™çš„é¦–é¡µå¯¹äºæ¯ä¸€ä¸ªåˆ†åŒºéƒ½ä¼šå±•ç¤ºä¸€éƒ¨åˆ†çš„è§†é¢‘æ¨èã€‚</p><p>è¿™äº›è§†é¢‘éƒ½ä¼šæœ‰ä¸€å¼ å°é¢ï¼Œå¦‚ä¸‹ï¼š</p><p><a data-fancybox="doc-gallery" href="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/03/06/202203062258499.avif" target="_blank" rel="noopener noreferrer"><img src="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/03/06/202203062258499.avif" alt=""></a></p><p>è¿™ä¸€ä¸ªåˆ†åŒºå°±æœ‰ <code>12</code> å¼ å°é¢å›¾äº†ï¼Œè€Œ <code>B</code> ç«™çš„åˆ†åŒºç±»å‹æ˜¯éå¸¸å¤šçš„ï¼Œå¦‚ä¸‹ï¼š</p><p><a data-fancybox="doc-gallery" href="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/03/06/202203062300356.avif" target="_blank" rel="noopener noreferrer"><img src="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/03/06/202203062300356.avif" alt=""></a></p><p>å¦‚æœç›´æ¥å±•ç¤ºï¼Œå³ä½¿å†æ€ä¹ˆå»å‹ç¼©å›¾ç‰‡è´¨é‡ï¼Œå›¾ç‰‡çš„åŠ è½½ä¹Ÿæ˜¯è¦è€—è´¹ä¸€å®šçš„æµé‡çš„ï¼Œè€Œè¿™äº›å›¾ç‰‡çš„åŠ è½½æ˜¯å®Œå…¨æ²¡å¿…è¦çš„ã€‚</p><p>å› ä¸ºå¯èƒ½ç”¨æˆ·å°±åªæ˜¯æ‰“å¼€é¦–é¡µï¼Œç„¶åç‚¹å‡»è¿›å…¥ä¸ªäººä¸­å¿ƒï¼Œæˆ–è€…ç›´æ¥ç‚¹å‡»æœç´¢æ¡†è¿›è¡Œè§†é¢‘æœç´¢ã€‚</p><p>è‡³å°‘å¯¹äºæˆ‘æ¥è¯´æ˜¯è¿™æ ·çš„ï¼Œæˆ‘ä¸ªäººå¾ˆå°‘ä¸‹æ‹‰å»æŸ¥çœ‹å„ä¸ªåˆ†åŒºçš„è§†é¢‘ã€‚</p><p>æ‰€ä»¥æ‡’åŠ è½½è¿™äº›ä¸åœ¨å¯è§†åŒºåŸŸçš„å›¾ç‰‡æ˜¯éå¸¸æœ‰å¿…è¦çš„ã€‚</p><p>ä¸€æ–¹é¢ï¼Œå¦‚æœæ˜¯ä¸ªäººç½‘ç«™ï¼Œæ²¡ä½¿ç”¨ <code>CDN</code> çš„è¯ï¼Œå¯ä»¥å‡è½»æœåŠ¡å™¨çš„å‹åŠ›ï¼Œè¿™æ ·å•ä½æ—¶é—´å†…æœåŠ¡å™¨å¯ä»¥å¯¹æ›´å¤šçš„ç”¨æˆ·æœåŠ¡ï¼Œå¦‚æœèµ° <code>CDN</code> çš„è¯ï¼Œå¯ä»¥å‡å°‘æµé‡æ¶ˆè€—ï¼Œæ¯•ç«Ÿèµ° <code>CDN</code> çš„é’±ä¹Ÿä¸æ˜¯å¤§é£åˆ®æ¥çš„ï¼Œèƒ½æ‰£å°±æ‰£ï¼Œä½ è¯´æ˜¯å§ã€‚</p><p>å¦ä¸€æ–¹é¢ï¼Œå¯ä»¥åŠ å¿«ç½‘é¡µçš„è®¿é—®é€Ÿåº¦ï¼Œç°åœ¨å¤§éƒ¨åˆ†çš„ç½‘ç«™éƒ½è¿˜æ˜¯ä½¿ç”¨ <code>HTTP/1.1</code> ï¼Œè€Œ <code>HTTP/1.1</code> è™½ç„¶æ”¯æŒé•¿è¿æ¥ä»¥åŠ <code>TCP</code> è¿æ¥å¤ç”¨ï¼Œä½†æ˜¯ä¾ç„¶å—é™äº <code>TCP</code> æ•°é‡çš„é™åˆ¶ï¼ŒåŒæ—¶è¯·æ±‚å¤šä¸ªå›¾ç‰‡ï¼Œå¯èƒ½æŠŠ <code>TCP</code> è¿æ¥ç»™å æ»¡äº†ï¼Œå¯èƒ½ä¼šå½±å“åç»­ <code>js</code> æ–‡ä»¶çš„è¯·æ±‚ï¼Œå¯¼è‡´ç½‘é¡µæ— æ³•æ­£å¸¸åœ°å¯¹ç”¨æˆ·çš„æ“ä½œè¿›è¡Œå“åº”ã€‚</p><p>è€Œ <code>HTTP/2</code> å¾ˆå¥½åœ°è§£å†³äº† <code>TCP</code> è¿æ¥æ•°å—é™çš„é—®é¢˜ï¼Œä¸è¿‡è¿™ä¸ªä¸æ˜¯æœ¬æ–‡çš„é‡ç‚¹ã€‚</p><p><a href="https://http2.akamai.com/demo" target="_blank" rel="noopener">æˆ³è¿™é‡ŒæŸ¥çœ‹ HTTP/2 å’Œ HTTP/1.1 çš„å›¾ç‰‡åŠ è½½é€Ÿåº¦æµ‹è¯• DEMO</a></p><p><a data-fancybox="doc-gallery" href="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/03/06/202203062328306.avif" target="_blank" rel="noopener noreferrer"><img src="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/03/06/202203062328306.avif" alt=""></a></p><p>å½“ç„¶ï¼Œç°åœ¨ <code>B</code> ç«™çš„å›¾ç‰‡åŸºæœ¬ä¸Šéƒ½æ˜¯ <code>HTTP/2</code> çš„äº†ã€‚</p><p><a data-fancybox="doc-gallery" href="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/03/07/202203070946642.avif" target="_blank" rel="noopener noreferrer"><img src="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/03/07/202203070946642.avif" alt=""></a></p><h2 id="å¦‚ä½•å®ç°æ‡’åŠ è½½" tabindex="-1">å¦‚ä½•å®ç°æ‡’åŠ è½½ <a class="header-anchor" href="#å¦‚ä½•å®ç°æ‡’åŠ è½½">ğŸ”—</a></h2><p>æ ¹æ®å‰é¢çš„è§£é‡Šï¼ŒåŸºæœ¬ä¸Šæˆ‘ä»¬çš„æ€è·¯å°±æœ‰äº†ã€‚</p><p>åœ¨ä¸å¯è§†åŒºåŸŸçš„å›¾ç‰‡éƒ½ä½¿ç”¨ä¸€å¼ å ä½å›¾ï¼Œè¿™æ ·é™¤é¦–å±å¯è§†å›¾ç‰‡ä¹‹å¤–çš„å›¾ç‰‡å—ï¼Œå°±åªè¦è¯·æ±‚ä¸€ä¸ªå›¾ç‰‡å³å¯ã€‚</p><p>åœ¨ç”¨æˆ·æ»šåŠ¨çš„æ—¶å€™ï¼Œä¸æ–­çš„åˆ¤æ–­é¡µé¢ä¸Šçš„ <code>img</code> æ˜¯å¦å‡ºç°åœ¨ç”¨æˆ·çš„å¯è§†åŒºåŸŸä¸­ã€‚</p><p>å¦‚æœåˆ°è¾¾äº†ç”¨æˆ·çš„å¯è§†åŒºåŸŸï¼Œé‚£ä¹ˆæŠŠ <code>img</code> çš„ <code>src</code> åˆ‡æ¢ä¸ºçœŸå®çš„å›¾ç‰‡åœ°å€ï¼Œç„¶åæµè§ˆå™¨å°±ä¼šè‡ªåŠ¨çš„è¯·æ±‚å›¾ç‰‡äº†ã€‚</p><p>å½“ç„¶å·²ç»ç»è¿‡åŠ è½½çš„å›¾ç‰‡ï¼Œå†æ¬¡ç»è¿‡ç”¨æˆ·çš„å¯è§†åŒºåŸŸçš„æ—¶å€™ï¼Œå°±ä¸åº”è¯¥åœ¨æ‰§è¡Œåˆ‡æ¢ <code>src</code> çš„é€»è¾‘äº†ï¼Œå› ä¸ºè¿™å·²ç»æ²¡æœ‰æ„ä¹‰äº†ã€‚</p><p>ç»è¿‡è¿™æ®µåˆ†æï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºç¬¬ä¸€ç§æ–¹å¼ã€‚</p><p>PSï¼šè¿™é‡Œæˆ‘ä»¬éƒ½ä½¿ç”¨ <code>Vue</code> ç»„ä»¶çš„æ–¹å¼æ¥ç¼–å†™ä»£ç ã€‚</p><h3 id="é€šè¿‡ç›‘å¬-scroll-äº‹ä»¶æ¥åˆ¤æ–­å›¾ç‰‡æ˜¯å¦åœ¨å¯è§†åŒºåŸŸ" tabindex="-1">é€šè¿‡ç›‘å¬ <code>scroll</code> äº‹ä»¶æ¥åˆ¤æ–­å›¾ç‰‡æ˜¯å¦åœ¨å¯è§†åŒºåŸŸ <a class="header-anchor" href="#é€šè¿‡ç›‘å¬-scroll-äº‹ä»¶æ¥åˆ¤æ–­å›¾ç‰‡æ˜¯å¦åœ¨å¯è§†åŒºåŸŸ">ğŸ”—</a></h3><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦ç¡®è®¤è¿™ä¸ª <code>Vue</code> ç»„ä»¶éœ€è¦ä»€ä¹ˆ <code>props</code>ã€‚</p><p>é¦–å…ˆå¿…é¡»æœ‰ä¸€ä¸ªçœŸå®çš„å›¾ç‰‡åœ°å€ã€‚</p><p>å…¶æ¬¡ç”±äºæˆ‘ä»¬ä½¿ç”¨å ä½å›¾ç‰‡æ¥å‡å°‘å›¾ç‰‡è¯·æ±‚ï¼Œæ‰€ä»¥éœ€è¦å¦ä¸€å¼ å ä½å›¾ç‰‡çš„åœ°å€ã€‚</p><p>åœ¨çœŸå®å›¾ç‰‡è®¿é—®å¤±è´¥ä¹‹åï¼Œéœ€è¦ä¸€å¼ è¡¨ç¤ºé”™è¯¯çš„å ä½å›¾ç‰‡æ¥å±•ç¤ºï¼Œæ‰€ä»¥è¿˜éœ€è¦ä¸€å¼ è¡¨ç¤ºåŠ è½½é”™è¯¯çš„å ä½å›¾ç‰‡åœ°å€ã€‚</p><p>è¿™æ ·å­ï¼Œæˆ‘ä»¬å°±å¯ä»¥å†™å‡º <code>props</code> çš„ç»“æ„äº†ã€‚</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-html"><span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F">script</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> setup</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> lang</span><span style="--s-dark:#666666;--s-light:#999999">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">ts</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> props</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#80A665;--s-light:#59873A"> defineProps</span><span style="--s-dark:#666666;--s-light:#999999">&lt;{</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  src</span><span style="--s-dark:#666666;--s-light:#999999">: </span><span style="--s-dark:#5DA994;--s-light:#2E8F82">string</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  defaultSrc</span><span style="--s-dark:#666666;--s-light:#999999">: </span><span style="--s-dark:#5DA994;--s-light:#2E8F82">string</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  errorSrc</span><span style="--s-dark:#666666;--s-light:#999999">: </span><span style="--s-dark:#5DA994;--s-light:#2E8F82">string</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}&gt;();</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F">script</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span></code></pre><p>å¯¹äºç»„ä»¶çš„æ–¹å¼ï¼Œå°±ä¸€ä¸ª <code>img</code> ï¼Œç®€å•ã€‚</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-html"><span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F">template</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  &lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F">img</span><span style="--s-dark:#666666;--s-light:#999999"> /&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F">template</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span></code></pre><p>è¿™é‡Œéœ€è¦ç»‘å®š <code>img</code> çš„ <code>src</code> ï¼Œè¿™é‡Œåˆå§‹åŒ–ä¸€ä¸ª <code>currentSrc</code> çš„ <code>ref</code> ã€‚</p><p>ä»¥åŠéœ€è¦ä¸€ä¸ª <code>ref</code> æ¥æ‹¿åˆ° <code>img</code> è¿™ä¸ªå…ƒç´ ã€‚</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-html"><span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F">script</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> setup</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> lang</span><span style="--s-dark:#666666;--s-light:#999999">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">ts</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">// ...</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> currentSrc</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#80A665;--s-light:#59873A"> ref</span><span style="--s-dark:#666666;--s-light:#999999">&lt;</span><span style="--s-dark:#5DA994;--s-light:#2E8F82">string</span><span style="--s-dark:#666666;--s-light:#999999">&gt;(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">''</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> imgRef</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#80A665;--s-light:#59873A"> ref</span><span style="--s-dark:#666666;--s-light:#999999">&lt;</span><span style="--s-dark:#5DA994;--s-light:#2E8F82">HTMLImageElement</span><span style="--s-dark:#666666;--s-light:#999999"> |</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> null</span><span style="--s-dark:#666666;--s-light:#999999">&gt;(</span><span style="--s-dark:#CB7676;--s-light:#AB5959">null</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F">script</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F">template</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  &lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F">img</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34"> </span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">    ref</span><span style="--s-dark:#666666;--s-light:#999999">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">imgRef</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34"> </span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">    :src</span><span style="--s-dark:#666666;--s-light:#999999">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">currentSrc</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  /&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F">template</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span></code></pre><p>åœ¨åŠ è½½ç›®æ ‡å›¾ç‰‡å‡ºç°é”™è¯¯çš„æ—¶å€™å¯ç”¨é”™è¯¯å›¾ç‰‡çš„åœ°å€ã€‚</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-html"><span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F">script</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> setup</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> lang</span><span style="--s-dark:#666666;--s-light:#999999">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">ts</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">// ...</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">// æ·»åŠ ä¸€ä¸ªåŠ è½½é”™è¯¯çš„å›è°ƒ</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">const</span><span style="--s-dark:#80A665;--s-light:#59873A"> onError</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#666666;--s-light:#999999"> ()</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  currentSrc</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">value</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> props</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">errorSrc</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F">script</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F">template</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  &lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F">img</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34"> </span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">    ref</span><span style="--s-dark:#666666;--s-light:#999999">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">imgRef</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34"> </span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">    :src</span><span style="--s-dark:#666666;--s-light:#999999">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">currentSrc</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">    @error</span><span style="--s-dark:#666666;--s-light:#999999">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">onError</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  /&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F">template</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span></code></pre><p>é»˜è®¤æƒ…å†µä¸‹ç”±äºå›¾ç‰‡ä¸å¯è§†ï¼Œæ‰€ä»¥è¦å¯ç”¨é»˜è®¤çš„å ä½å›¾ç‰‡ã€‚</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-html"><span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F">script</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> setup</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> lang</span><span style="--s-dark:#666666;--s-light:#999999">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">ts</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">// ...</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">onMounted</span><span style="--s-dark:#666666;--s-light:#999999">(()</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  // å¯ç”¨é»˜è®¤çš„å ä½å›¾ç‰‡</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  currentSrc</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">value</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> props</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">defaultSrc</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">});</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F">script</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span></code></pre><p>æ¥ç€å°±æ˜¯ä¸»è¦çš„ <code>onScroll</code> å›è°ƒçš„ç¼–å†™äº†ã€‚</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-html"><span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F">script</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> setup</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> lang</span><span style="--s-dark:#666666;--s-light:#999999">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">ts</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">// ...</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">const</span><span style="--s-dark:#80A665;--s-light:#59873A"> onScroll</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#666666;--s-light:#999999"> ()</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">  const</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> rect</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> imgRef</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">value</span><span style="--s-dark:#CB7676;--s-light:#AB5959">!</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">getBoundingClientRect</span><span style="--s-dark:#666666;--s-light:#999999">();</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">  const</span><span style="--s-dark:#666666;--s-light:#999999"> {</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> top</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> left</span><span style="--s-dark:#666666;--s-light:#999999"> }</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> rect</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  // è¿™é‡Œä¸ä»…åˆ¤æ–­äº† top ï¼Œä¹Ÿåˆ¤æ–­äº† left ï¼Œè¿™æ ·å¯ä»¥åœ¨æ¨ªå‘æ»šåŠ¨çš„æ—¶å€™ä¹Ÿé€‚ç”¨</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  if</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">top</span><span style="--s-dark:#666666;--s-light:#999999"> &lt;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> window</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">innerHeight</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> &amp;&amp;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> left</span><span style="--s-dark:#666666;--s-light:#999999"> &lt;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> window</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">innerWidth</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">    currentSrc</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">value</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> props</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">src</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  }</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">onMounted</span><span style="--s-dark:#666666;--s-light:#999999">(()</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  // ...</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  // æ‰§è¡Œä¸€æ¬¡åˆ¤æ–­ï¼Œä¸ç„¶å·²ç»åœ¨å¯è§†åŒºåŸŸå†…çš„å›¾ç‰‡æŒ‡å‘äº† defaultSrc ï¼Œè€Œä¸æ˜¯ src</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">  onScroll</span><span style="--s-dark:#666666;--s-light:#999999">();</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  // ç›‘å¬</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  window</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">addEventListener</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">scroll</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> onScroll</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">});</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">onBeforeUnmount</span><span style="--s-dark:#666666;--s-light:#999999">(()</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  // å–æ¶ˆç›‘å¬</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  window</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">removeEventListener</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">scroll</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> onScroll</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">});</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F">script</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span></code></pre><p>è¿™é‡Œæ”¾ä¸‹å®Œæ•´çš„ä»£ç ã€‚</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-html"><span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F">script</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> setup</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> lang</span><span style="--s-dark:#666666;--s-light:#999999">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">ts</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">import</span><span style="--s-dark:#666666;--s-light:#999999"> {</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> onBeforeUnmount</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> onMounted</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> ref</span><span style="--s-dark:#666666;--s-light:#999999"> }</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> from</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">vue</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> props</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#80A665;--s-light:#59873A"> defineProps</span><span style="--s-dark:#666666;--s-light:#999999">&lt;{</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  src</span><span style="--s-dark:#666666;--s-light:#999999">: </span><span style="--s-dark:#5DA994;--s-light:#2E8F82">string</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  defaultSrc</span><span style="--s-dark:#666666;--s-light:#999999">: </span><span style="--s-dark:#5DA994;--s-light:#2E8F82">string</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  errorSrc</span><span style="--s-dark:#666666;--s-light:#999999">: </span><span style="--s-dark:#5DA994;--s-light:#2E8F82">string</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}&gt;();</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> currentSrc</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#80A665;--s-light:#59873A"> ref</span><span style="--s-dark:#666666;--s-light:#999999">&lt;</span><span style="--s-dark:#5DA994;--s-light:#2E8F82">string</span><span style="--s-dark:#666666;--s-light:#999999">&gt;(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">""</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> imgRef</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#80A665;--s-light:#59873A"> ref</span><span style="--s-dark:#666666;--s-light:#999999">&lt;</span><span style="--s-dark:#5DA994;--s-light:#2E8F82">HTMLImageElement</span><span style="--s-dark:#666666;--s-light:#999999"> |</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> null</span><span style="--s-dark:#666666;--s-light:#999999">&gt;(</span><span style="--s-dark:#CB7676;--s-light:#AB5959">null</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">const</span><span style="--s-dark:#80A665;--s-light:#59873A"> onError</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#666666;--s-light:#999999"> ()</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  currentSrc</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">value</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> props</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">errorSrc</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">};</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">const</span><span style="--s-dark:#80A665;--s-light:#59873A"> onScroll</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#666666;--s-light:#999999"> ()</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">  const</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> rect</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> imgRef</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">value</span><span style="--s-dark:#CB7676;--s-light:#AB5959">!</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">getBoundingClientRect</span><span style="--s-dark:#666666;--s-light:#999999">();</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">  const</span><span style="--s-dark:#666666;--s-light:#999999"> {</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> top</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> left</span><span style="--s-dark:#666666;--s-light:#999999"> }</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> rect</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  if</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">top</span><span style="--s-dark:#666666;--s-light:#999999"> &lt;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> window</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">innerHeight</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> &amp;&amp;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> left</span><span style="--s-dark:#666666;--s-light:#999999"> &lt;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> window</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">innerWidth</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">    currentSrc</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">value</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> props</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">src</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  }</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">};</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">onMounted</span><span style="--s-dark:#666666;--s-light:#999999">(()</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  currentSrc</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">value</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> props</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">defaultSrc</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">  onScroll</span><span style="--s-dark:#666666;--s-light:#999999">();</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  window</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">addEventListener</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">scroll</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> onScroll</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">});</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">onBeforeUnmount</span><span style="--s-dark:#666666;--s-light:#999999">(()</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  window</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">removeEventListener</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">scroll</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> onScroll</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">});</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F">script</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F">template</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  &lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F">img</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">    ref</span><span style="--s-dark:#666666;--s-light:#999999">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">imgRef</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">    :src</span><span style="--s-dark:#666666;--s-light:#999999">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">currentSrc</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">    @error</span><span style="--s-dark:#666666;--s-light:#999999">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">currentSrc === errorSrc ?? onError</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  /&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F">template</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span></code></pre><p><a href="https://sfc.vuejs.org/#eyJBcHAudnVlIjoiPHNjcmlwdCBzZXR1cD5cbmltcG9ydCBMYXp5SW1hZ2UgZnJvbSAnLi9MYXp5SW1hZ2UudnVlJztcbjwvc2NyaXB0PlxuXG48dGVtcGxhdGU+XG4gIDxkaXY+XG4gICAgPExhenlJbWFnZSBcbiAgICAgIHNyYz1cImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9EZWRpY2F0dXM1NDYvaW1hZ2VAbWFpbi8yMDIyMDEyMjE3MzU0NTkuYXZpZlwiIFxuICAgICAgZGVmYXVsdFNyYz1cImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9EZWRpY2F0dXM1NDYvaW1hZ2VAbWFpbi8yMDIyMDMwODE1Mzc0NDMuYXZpZlwiIFxuICAgICAgZXJyb3JTcmM9XCJcIlxuICAgICAgc3R5bGU9XCJ3aWR0aDogMTAwcHg7IG1hcmdpbi10b3A6IDEwMDBweFwiXG4gICAgPlxuICAgIDwvTGF6eUltYWdlPlxuICA8L2Rpdj5cbjwvdGVtcGxhdGU+IiwiaW1wb3J0LW1hcC5qc29uIjoie1xuICBcImltcG9ydHNcIjoge1xuICAgIFwidnVlXCI6IFwiaHR0cHM6Ly9zZmMudnVlanMub3JnL3Z1ZS5ydW50aW1lLmVzbS1icm93c2VyLmpzXCJcbiAgfVxufSIsIkxhenlJbWFnZS52dWUiOiI8c2NyaXB0IHNldHVwPlxuaW1wb3J0IHtyZWYsb25Nb3VudGVkLG9uQmVmb3JlVW5tb3VudH0gZnJvbSAndnVlJztcbiAgXG5jb25zdCBwcm9wcyA9IGRlZmluZVByb3BzKHtcbiAgc3JjOiBTdHJpbmcsXG4gIGRlZmF1bHRTcmM6IFN0cmluZyxcbiAgZXJyb3JTcmM6IFN0cmluZyxcbn0pO1xuXG5jb25zdCBpbWdSZWYgPSByZWYobnVsbCk7XG5jb25zdCBjdXJyZW50U3JjID0gcmVmKCcnKTtcbiAgXG5jb25zdCBvbkVycm9yID0gKCkgPT4ge1xuICBjdXJyZW50U3JjLnZhbHVlID0gcHJvcHMuZXJyb3JTcmM7XG59XG5cbmNvbnN0IG9uU2Nyb2xsID0gKCkgPT4ge1xuICBjb25zdCByZWN0ID0gaW1nUmVmLnZhbHVlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICBjb25zdCB7IHRvcCwgbGVmdCB9ID0gcmVjdDtcbiAgaWYgKHRvcCA8IHdpbmRvdy5pbm5lckhlaWdodCAmJiBsZWZ0IDwgd2luZG93LmlubmVyV2lkdGgpIHtcbiAgICBjdXJyZW50U3JjLnZhbHVlID0gcHJvcHMuc3JjO1xuICB9XG59XG5cbm9uTW91bnRlZCgoKSA9PiB7XG4gIGN1cnJlbnRTcmMudmFsdWUgPSBwcm9wcy5kZWZhdWx0U3JjO1xuICBvblNjcm9sbCgpO1xuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgb25TY3JvbGwpO1xufSk7XG4gIFxub25CZWZvcmVVbm1vdW50KCgpID0+IHtcbiAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIG9uU2Nyb2xsKTtcbn0pO1xuPC9zY3JpcHQ+XG5cbjx0ZW1wbGF0ZT5cbiAgPGltZyBcbiAgICByZWY9XCJpbWdSZWZcIlxuICAgIDpzcmM9XCJjdXJyZW50U3JjXCJcbiAgICBAZXJyb3I9XCJvbkVycm9yXCJcbiAgLz5cbjwvdGVtcGxhdGU+In0=" target="_blank" rel="noopener">æˆ³è¿™é‡ŒæŸ¥çœ‹ demo</a></p><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œçš„æ ¸å¿ƒçš„ <code>API</code> ä¸º <code>getBoundingClientRect</code> ï¼Œå®ƒèƒ½å¤Ÿè·å–å…ƒç´ å½“å‰çš„å¤§å°åŠå…¶ç›¸å¯¹äºè§†å£çš„ä½ç½®ã€‚</p><blockquote><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Element/getBoundingClientRect" target="_blank" rel="noopener">Element.getBoundingClientRect() - MDN</a></p></blockquote><p><a data-fancybox="doc-gallery" href="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/03/08/202203081158957.avif" target="_blank" rel="noopener noreferrer"><img src="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/03/08/202203081158957.avif" alt=""></a></p><p>è¿”å›çš„ <code>top</code> ï¼Œ <code>bottom</code> ï¼Œ <code>left</code> ï¼Œ <code>right</code> è¿™å››ä¸ªå±æ€§ä»£è¡¨çš„æ„ä¹‰å¦‚ä¸‹å›¾ï¼š</p><p><a data-fancybox="doc-gallery" href="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/03/08/202203081621412.avif" target="_blank" rel="noopener noreferrer"><img src="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/03/08/202203081621412.avif" alt=""></a></p><p>è¿™é‡Œè¦æ³¨æ„ <code>onMounted</code> é‡Œé¢æ‰§è¡Œä¸€æ¬¡ <code>onScroll</code> ï¼ŒåŸå› æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬ä¸åœ¨ <code>onMounted</code> é‡Œé¢æ‰§è¡Œä¸€æ¬¡ <code>onScroll</code> çš„è¯ï¼Œå°±ä¼šå‡ºç°å›¾ç‰‡æŒ‡å‘äº†é»˜è®¤å›¾ç‰‡ï¼Œç„¶åä¸€æ»‘åŠ¨å°±æŒ‡å‘çœŸæ­£çš„å›¾ç‰‡äº†ã€‚</p><p><a href="https://sfc.vuejs.org/#eyJBcHAudnVlIjoiPHNjcmlwdCBzZXR1cD5cbmltcG9ydCBMYXp5SW1hZ2UgZnJvbSAnLi9MYXp5SW1hZ2UudnVlJztcbjwvc2NyaXB0PlxuXG48dGVtcGxhdGU+XG4gIOeojeW+ruW+gOS4i+a7muWKqFxuICA8ZGl2IHN0eWxlPVwiaGVpZ2h0OiAxMDAwcHhcIj5cbiAgICA8TGF6eUltYWdlIFxuICAgICAgc3JjPVwiaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L2doL0RlZGljYXR1czU0Ni9pbWFnZUBtYWluLzIwMjIwMTIyMTczNTQ1OS5hdmlmXCIgXG4gICAgICBkZWZhdWx0U3JjPVwiaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L2doL0RlZGljYXR1czU0Ni9pbWFnZUBtYWluLzIwMjIwMzA4MTUzNzQ0My5hdmlmXCIgXG4gICAgICBlcnJvclNyYz1cIlwiXG4gICAgICBzdHlsZT1cIndpZHRoOiAxMDBweFwiXG4gICAgPlxuICAgIDwvTGF6eUltYWdlPlxuICA8L2Rpdj5cbjwvdGVtcGxhdGU+IiwiaW1wb3J0LW1hcC5qc29uIjoie1xuICBcImltcG9ydHNcIjoge1xuICAgIFwidnVlXCI6IFwiaHR0cHM6Ly9zZmMudnVlanMub3JnL3Z1ZS5ydW50aW1lLmVzbS1icm93c2VyLmpzXCJcbiAgfVxufSIsIkxhenlJbWFnZS52dWUiOiI8c2NyaXB0IHNldHVwPlxuaW1wb3J0IHtyZWYsb25Nb3VudGVkLG9uQmVmb3JlVW5tb3VudH0gZnJvbSAndnVlJztcbiAgXG5jb25zdCBwcm9wcyA9IGRlZmluZVByb3BzKHtcbiAgc3JjOiBTdHJpbmcsXG4gIGRlZmF1bHRTcmM6IFN0cmluZyxcbiAgZXJyb3JTcmM6IFN0cmluZyxcbn0pO1xuXG5jb25zdCBpbWdSZWYgPSByZWYobnVsbCk7XG5jb25zdCBjdXJyZW50U3JjID0gcmVmKCcnKTtcbiAgXG5jb25zdCBvbkVycm9yID0gKCkgPT4ge1xuICBjdXJyZW50U3JjLnZhbHVlID0gcHJvcHMuZXJyb3JTcmM7XG59XG5cbmNvbnN0IG9uU2Nyb2xsID0gKCkgPT4ge1xuICBjb25zdCByZWN0ID0gaW1nUmVmLnZhbHVlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICBjb25zdCB7IHRvcCwgbGVmdCB9ID0gcmVjdDtcbiAgaWYgKHRvcCA8IHdpbmRvdy5pbm5lckhlaWdodCAmJiBsZWZ0IDwgd2luZG93LmlubmVyV2lkdGgpIHtcbiAgICBjdXJyZW50U3JjLnZhbHVlID0gcHJvcHMuc3JjO1xuICB9XG59XG5cbm9uTW91bnRlZCgoKSA9PiB7XG4gIGN1cnJlbnRTcmMudmFsdWUgPSBwcm9wcy5kZWZhdWx0U3JjO1xuICAvLyBvblNjcm9sbCgpO1xuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgb25TY3JvbGwpO1xufSk7XG4gIFxub25CZWZvcmVVbm1vdW50KCgpID0+IHtcbiAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIG9uU2Nyb2xsKTtcbn0pO1xuPC9zY3JpcHQ+XG5cbjx0ZW1wbGF0ZT5cbiAgPGltZyBcbiAgICByZWY9XCJpbWdSZWZcIlxuICAgIDpzcmM9XCJjdXJyZW50U3JjXCJcbiAgICBAZXJyb3I9XCJvbkVycm9yXCJcbiAgLz5cbjwvdGVtcGxhdGU+In0=" target="_blank" rel="noopener">æˆ³è¿™é‡ŒæŸ¥çœ‹ demo</a></p><p>å½“ç„¶ï¼Œæˆ‘ä»¬è¿™ä¸ªä»£ç è¿˜æœ‰ä¸€äº›ç‘•ç–µï¼Œæ¯”å¦‚å½“å›¾ç‰‡å·²ç»è¿›å…¥è¿‡ä¸€æ¬¡å¯è§†åŒºåŸŸè¿›è¡ŒåŠ è½½ä¹‹åï¼Œ <code>scroll</code> äº‹ä»¶çš„ç»‘å®šå‡½æ•°å°±åº”è¯¥å–æ¶ˆæ‰äº†ã€‚</p><p>ä¹Ÿå°±æ˜¯éœ€è¦åœ¨ <code>onScroll</code> çš„ <code>if</code> æ¡ä»¶å†…åŠ ä¸Š <code>window.removeEventListner('scroll', onScroll)</code> ã€‚</p><p>ä»¥åŠæˆ‘ä»¬ç°åœ¨å¯¹äº <code>if</code> çš„åˆ¤æ–­æ˜¯é€šè¿‡ <code>top</code> å’Œ <code>left</code> æ¥åˆ¤å®šçš„ã€‚</p><p>æˆ‘ä»¬å¯ä»¥æƒ³è±¡ä¸€ä¸‹ï¼Œå¦‚æœåˆšå¥½æœ‰è¿™ä¹ˆä¸€å¼ å›¾ç‰‡ï¼Œåˆšæ‰“å¼€ç½‘é¡µçš„æ—¶å€™ä¸æ¸²æŸ“ï¼ˆç†è§£ä¸º <code>v-if="false"</code> ï¼‰ï¼Œå¾€ä¸‹æ‹–åŠ¨åˆ°è¿™å¼ å›¾ç‰‡è¿›å…¥ä¸å¯è§†èŒƒå›´çš„æ—¶å€™ï¼Œå›¾ç‰‡å¼€å§‹æ¸²æŸ“ã€‚</p><p>è¿™æ—¶å€™æˆ‘ä»¬è‚¯å®šå¸Œæœ›å®ƒæŒ‡å‘é»˜è®¤çš„å ä½å›¾ç‰‡ï¼Œä½†å®é™…ä¸Šå®ƒå·²ç»æŒ‡å‘äº†çœŸæ­£çš„å›¾ç‰‡åœ°å€äº†ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ä¸ä»…è¦åˆ¤æ–­ <code>top</code> å’Œ <code>left</code>ï¼Œ ä¹Ÿè¦åˆ¤æ–­ <code>right</code> å’Œ <code>bottom</code> ã€‚</p><p><code>top</code> å’Œ <code>left</code> åˆ¤æ–­äº†å…ƒç´ ä»ä¸‹æ–¹è¿›å…¥å¯è§†åŒºåŸŸå’Œä»å³æ–¹è¿›å…¥å¯è§†åŒºåŸŸã€‚</p><p><a data-fancybox="doc-gallery" href="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/03/09/202203091005866.avif" target="_blank" rel="noopener noreferrer"><img src="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/03/09/202203091005866.avif" alt=""></a></p><p>è€Œ <code>bottom</code> å’Œ <code>right</code> åˆ¤æ–­äº†å…ƒç´ äº†ä»ä¸Šæ–¹è¿›å…¥å¯è§†åŒºåŸŸå’Œä»å·¦æ–¹è¿›å…¥å¯è§†åŒºåŸŸã€‚</p><p><a data-fancybox="doc-gallery" href="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/03/09/202203091010470.avif" target="_blank" rel="noopener noreferrer"><img src="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/03/09/202203091010470.avif" alt=""></a></p><p>è¿™æ—¶å€™ <code>if</code> åˆ¤æ–­å°±è¦ä¿®æ”¹ä¸ºå¦‚ä¸‹äº†ï¼š</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-ts"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">const </span><span style="--s-dark:#BD976A;--s-light:#B07D48">rect</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> imgRef</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">value</span><span style="--s-dark:#CB7676;--s-light:#AB5959">!</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">getBoundingClientRect</span><span style="--s-dark:#666666;--s-light:#999999">();</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">const </span><span style="--s-dark:#666666;--s-light:#999999">{</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> top</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> left</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> bottom</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> right</span><span style="--s-dark:#666666;--s-light:#999999"> }</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> rect</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">if</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">top</span><span style="--s-dark:#666666;--s-light:#999999"> &lt;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> window</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">innerHeight</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> &amp;&amp;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> left</span><span style="--s-dark:#666666;--s-light:#999999"> &lt;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> window</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">innerWidth</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> &amp;&amp;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> bottom</span><span style="--s-dark:#666666;--s-light:#999999"> &gt;</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 0</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> &amp;&amp;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> right</span><span style="--s-dark:#666666;--s-light:#999999"> &gt;</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 0</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  currentSrc</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">value</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> props</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">src</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span></code></pre><p>åœ¨ <code>vueuse/core</code> ä¸­ï¼Œæ­£å¥½ä¸ºæˆ‘ä»¬å°è£…äº†è¿™æ ·çš„ä¸€ä¸ªçš„å‡½æ•° <code>useElementVisibility</code> ã€‚</p><blockquote><p><a href="https://github.com/vueuse/vueuse/blob/main/packages/core/useElementVisibility/index.ts" target="_blank" rel="noopener">useElementVisibility - vueuse</a></p></blockquote><p>åœ¨æºç ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹åˆ°åˆ¤æ–­æ˜¯å¦åœ¨å¯è§åŒºåŸŸçš„é€»è¾‘ã€‚</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">elementIsVisible</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">value</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#666666;--s-light:#999999"> (</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  rect</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">top</span><span style="--s-dark:#666666;--s-light:#999999"> &lt;=</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">window</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">innerHeight</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> ||</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> document</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">documentElement</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">clientHeight</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34"> </span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">    &amp;&amp;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> rect</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">left</span><span style="--s-dark:#666666;--s-light:#999999"> &lt;=</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">window</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">innerWidth</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> ||</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> document</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">documentElement</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">clientWidth</span><span style="--s-dark:#666666;--s-light:#999999">)</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">    &amp;&amp;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> rect</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">bottom</span><span style="--s-dark:#666666;--s-light:#999999"> &gt;=</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 0</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">    &amp;&amp;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> rect</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">right</span><span style="--s-dark:#666666;--s-light:#999999"> &gt;=</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 0</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">)</span></span></code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œå’Œæˆ‘ä»¬ä¸Šé¢çš„é€»è¾‘åŸºæœ¬ä¸€æ ·ã€‚</p><p>ä¸è¿‡ï¼Œæˆ‘ä»¬å‘ç°å­˜åœ¨ <code>window.innerHeight || document.documentElement.clientHeight</code> è¿™æ ·çš„å†™æ³•ã€‚</p><p><code>window.innerHeight</code> è¿”å›äº†æµè§ˆå™¨çª—å£çš„è§†å£é«˜åº¦ï¼Œå¦‚æœæœ‰æ°´å¹³æ»šåŠ¨æ¡ï¼Œä¹ŸåŒ…æ‹¬æ»šåŠ¨æ¡é«˜åº¦ã€‚</p><p><code>document.documentElement.clientHeight</code> è¿”å›å…ƒç´ å†…éƒ¨çš„é«˜åº¦ï¼ŒåŒ…å«å†…è¾¹è·ï¼Œä½†ä¸åŒ…æ‹¬æ°´å¹³æ»šåŠ¨æ¡ã€è¾¹æ¡†å’Œå¤–è¾¹è·ã€‚</p><p>å…¶ä¸­ <code>document.documentElement</code> å¯ä»¥ç®€å•ç†è§£ä¸º <code>html</code> å…ƒç´ å³å¯ã€‚</p><p>çœ‹èµ·æ¥åƒæ˜¯ä¸ºäº†å…¼å®¹ <code>IE</code> çš„å†™æ³•ï¼Œ å¯æ˜¯ <code>vue2</code> å·²ç»ä¸æ”¯æŒ <code>IE8</code> åŠä»¥ä¸‹çš„ç‰ˆæœ¬äº†ã€‚</p><p>æŸ¥äº†ä¸‹ <code>Can I Use</code> å‘ç° <code>innerWidth</code> è¿™ä¸ªå±æ€§ <code>IE8</code> ä»¥ä¸‹ä¸æ”¯æŒã€‚</p><p>ä¼¼ä¹æ²¡æœ‰ä»€ä¹ˆå¿…è¦å•Šâ€¦éš¾é“æ˜¯æ»šåŠ¨æ¡çš„é—®é¢˜å—ï¼Ÿ emmmï¼Œä¸æ‡‚â€¦</p><h3 id="é€šè¿‡-intersectionobserver-æ¥è§‚å¯Ÿå›¾ç‰‡æ˜¯å¦åœ¨å¯è§†åŒºåŸŸ" tabindex="-1">é€šè¿‡ <code>IntersectionObserver</code> æ¥è§‚å¯Ÿå›¾ç‰‡æ˜¯å¦åœ¨å¯è§†åŒºåŸŸ <a class="header-anchor" href="#é€šè¿‡-intersectionobserver-æ¥è§‚å¯Ÿå›¾ç‰‡æ˜¯å¦åœ¨å¯è§†åŒºåŸŸ">ğŸ”—</a></h3><p><code>IntersectionObserver</code> æ˜¯ä¸€ä¸ªæ„é€ å™¨ï¼Œå¯ä»¥é€šè¿‡åˆ›å»ºè¯¥ç±»å‹çš„å¯¹è±¡ï¼Œå¯ä»¥å¯¹å…ƒç´ è¿›è¡Œå¼‚æ­¥åœ°è§‚å¯Ÿï¼Œå½“å¯è§éƒ¨åˆ†è¶…è¿‡äº†é¢„å…ˆè®¾ç½®çš„é˜ˆå€¼ä¹‹åï¼Œè°ƒç”¨åˆ›å»ºè¯¥å¯¹è±¡æ—¶ä¼ å…¥çš„å›è°ƒå‡½æ•°ã€‚</p><blockquote><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/IntersectionObserver" target="_blank" rel="noopener">Intersection Observer - MDN</a></p></blockquote><p><a data-fancybox="doc-gallery" href="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/03/08/202203081717560.avif" target="_blank" rel="noopener noreferrer"><img src="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/03/08/202203081717560.avif" alt=""></a></p><p>ç®€å•ç‚¹ç†è§£å°±æ˜¯æµè§ˆå™¨åŸç”Ÿå®ç°äº† <code>onScroll</code> è¿™ä¸ªå‡½æ•°çš„é€»è¾‘ã€‚</p><p>é‚£ä¹ˆæˆ‘ä»¬çš„ä»£ç å°±å¯ä»¥å˜ä¸ºå¦‚ä¸‹ï¼š</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-html"><span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F">script</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> setup</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> lang</span><span style="--s-dark:#666666;--s-light:#999999">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">ts</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">import</span><span style="--s-dark:#666666;--s-light:#999999"> {</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> onBeforeUnmount</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> onMounted</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> ref</span><span style="--s-dark:#666666;--s-light:#999999"> }</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> from</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">vue</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> props</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#80A665;--s-light:#59873A"> defineProps</span><span style="--s-dark:#666666;--s-light:#999999">&lt;{</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  src</span><span style="--s-dark:#666666;--s-light:#999999">: </span><span style="--s-dark:#5DA994;--s-light:#2E8F82">string</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  defaultSrc</span><span style="--s-dark:#666666;--s-light:#999999">: </span><span style="--s-dark:#5DA994;--s-light:#2E8F82">string</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  errorSrc</span><span style="--s-dark:#666666;--s-light:#999999">: </span><span style="--s-dark:#5DA994;--s-light:#2E8F82">string</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}&gt;();</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> currentSrc</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#80A665;--s-light:#59873A"> ref</span><span style="--s-dark:#666666;--s-light:#999999">&lt;</span><span style="--s-dark:#5DA994;--s-light:#2E8F82">string</span><span style="--s-dark:#666666;--s-light:#999999">&gt;(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">""</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> imgRef</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#80A665;--s-light:#59873A"> ref</span><span style="--s-dark:#666666;--s-light:#999999">&lt;</span><span style="--s-dark:#5DA994;--s-light:#2E8F82">HTMLImageElement</span><span style="--s-dark:#666666;--s-light:#999999"> |</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> null</span><span style="--s-dark:#666666;--s-light:#999999">&gt;(</span><span style="--s-dark:#CB7676;--s-light:#AB5959">null</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">let</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> observer</span><span style="--s-dark:#666666;--s-light:#999999">: </span><span style="--s-dark:#5DA994;--s-light:#2E8F82">IntersectionObserver</span><span style="--s-dark:#666666;--s-light:#999999"> | </span><span style="--s-dark:#CB7676;--s-light:#AB5959">null</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> null</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">const</span><span style="--s-dark:#80A665;--s-light:#59873A"> onError</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#666666;--s-light:#999999"> ()</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  currentSrc</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">value</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> props</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">errorSrc</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">};</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">onMounted</span><span style="--s-dark:#666666;--s-light:#999999">(()</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  currentSrc</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">value</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> props</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">defaultSrc</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  observer</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> new</span><span style="--s-dark:#80A665;--s-light:#59873A"> IntersectionObserver</span><span style="--s-dark:#666666;--s-light:#999999">(([</span><span style="--s-dark:#BD976A;--s-light:#B07D48">entry</span><span style="--s-dark:#666666;--s-light:#999999">])</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">    if</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">entry</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">isIntersecting</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">      currentSrc</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">value</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> props</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">src</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">      observer</span><span style="--s-dark:#CB7676;--s-light:#AB5959">!</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">unobserve</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">imgRef</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">value</span><span style="--s-dark:#CB7676;--s-light:#AB5959">!</span><span style="--s-dark:#666666;--s-light:#999999">)</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">    }</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  });</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  observer</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">observe</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">imgRef</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">value</span><span style="--s-dark:#CB7676;--s-light:#AB5959">!</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">});</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">onBeforeUnmount</span><span style="--s-dark:#666666;--s-light:#999999">(()</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  observer</span><span style="--s-dark:#CB7676;--s-light:#AB5959">!</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">unobserve</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">imgRef</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">value</span><span style="--s-dark:#CB7676;--s-light:#AB5959">!</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">});</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F">script</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F">template</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  &lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F">img</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">    ref</span><span style="--s-dark:#666666;--s-light:#999999">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">imgRef</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">    :src</span><span style="--s-dark:#666666;--s-light:#999999">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">currentSrc</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">    @error</span><span style="--s-dark:#666666;--s-light:#999999">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">currentSrc === errorSrc ?? onError</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  /&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F">template</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span></code></pre><p>çœ‹èµ·æ¥ç›¸å½“çš„ç®€å•ï¼</p><p><a href="https://sfc.vuejs.org/#eyJBcHAudnVlIjoiPHNjcmlwdCBzZXR1cD5cbmltcG9ydCBMYXp5SW1hZ2UgZnJvbSAnLi9MYXp5SW1hZ2UudnVlJztcbjwvc2NyaXB0PlxuXG48dGVtcGxhdGU+XG4gIDxkaXY+XG4gICAgPExhenlJbWFnZSBcbiAgICAgIHNyYz1cImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9EZWRpY2F0dXM1NDYvaW1hZ2VAbWFpbi8yMDIyMDEyMjE3MzU0NTkuYXZpZlwiIFxuICAgICAgZGVmYXVsdFNyYz1cImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9EZWRpY2F0dXM1NDYvaW1hZ2VAbWFpbi8yMDIyMDMwODE1Mzc0NDMuYXZpZlwiIFxuICAgICAgZXJyb3JTcmM9XCJcIlxuICAgICAgc3R5bGU9XCJ3aWR0aDogMTAwcHg7bWFyZ2luLXRvcDogMTAwMHB4XCJcbiAgICA+XG4gICAgPC9MYXp5SW1hZ2U+XG4gIDwvZGl2PlxuPC90ZW1wbGF0ZT4iLCJpbXBvcnQtbWFwLmpzb24iOiJ7XG4gIFwiaW1wb3J0c1wiOiB7XG4gICAgXCJ2dWVcIjogXCJodHRwczovL3NmYy52dWVqcy5vcmcvdnVlLnJ1bnRpbWUuZXNtLWJyb3dzZXIuanNcIlxuICB9XG59IiwiTGF6eUltYWdlLnZ1ZSI6IjxzY3JpcHQgc2V0dXA+XG5pbXBvcnQge3JlZixvbk1vdW50ZWQsb25CZWZvcmVVbm1vdW50fSBmcm9tICd2dWUnO1xuICBcbmNvbnN0IHByb3BzID0gZGVmaW5lUHJvcHMoe1xuICBzcmM6IFN0cmluZyxcbiAgZGVmYXVsdFNyYzogU3RyaW5nLFxuICBlcnJvclNyYzogU3RyaW5nLFxufSk7XG5cbmNvbnN0IGltZ1JlZiA9IHJlZihudWxsKTtcbmNvbnN0IGN1cnJlbnRTcmMgPSByZWYoJycpO1xubGV0IG9ic2VydmVyID0gbnVsbDtcbiAgXG5jb25zdCBvbkVycm9yID0gKCkgPT4ge1xuICBjdXJyZW50U3JjLnZhbHVlID0gcHJvcHMuZXJyb3JTcmM7XG59XG5cbm9uTW91bnRlZCgoKSA9PiB7XG4gIGN1cnJlbnRTcmMudmFsdWUgPSBwcm9wcy5kZWZhdWx0U3JjO1xuICBvYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcigoW2VudHJ5XSkgPT4ge1xuICAgIGlmIChlbnRyeS5pc0ludGVyc2VjdGluZykge1xuICAgICAgY3VycmVudFNyYy52YWx1ZSA9IHByb3BzLnNyYztcbiAgICAgIG9ic2VydmVyLnVub2JzZXJ2ZShpbWdSZWYudmFsdWUpO1xuICAgIH1cbiAgfSk7XG4gIG9ic2VydmVyLm9ic2VydmUoaW1nUmVmLnZhbHVlKTtcbn0pO1xuICBcbm9uQmVmb3JlVW5tb3VudCgoKSA9PiB7XG4gIG9ic2VydmVyLnVub2JzZXJ2ZShpbWdSZWYudmFsdWUpO1xufSk7XG48L3NjcmlwdD5cblxuPHRlbXBsYXRlPlxuICA8aW1nIFxuICAgIHJlZj1cImltZ1JlZlwiXG4gICAgOnNyYz1cImN1cnJlbnRTcmNcIlxuICAgIEBlcnJvcj1cIm9uRXJyb3JcIlxuICAvPlxuPC90ZW1wbGF0ZT4ifQ==" target="_blank" rel="noopener">æˆ³è¿™é‡ŒæŸ¥çœ‹ demo</a></p><p>è¿™é‡Œéœ€è¦æ³¨æ„ï¼Œ<code>IntersectionObserver</code> æ”¯æŒå¯¹æŒ‡å®šå®¹å™¨è¿›è¡Œè§‚å¯Ÿï¼Œé»˜è®¤æƒ…å†µä¸‹å¯¹æ•´ä¸ª <code>document</code> è¿›è¡Œè§‚å¯Ÿ</p><p><code>IntersectionObserver</code> ä½¿ç”¨äº† <code>threshold</code> é˜ˆå€¼è¿™ä¸ªæ¦‚å¿µï¼Œç®€å•ç†è§£ä¸ºå°±æ˜¯ç›®æ ‡å…ƒç´ ä¸å®¹å™¨å…ƒç´ ç›¸äº¤éƒ¨åˆ†çš„å¤§å°å ç›®æ ‡å…ƒç´ çš„å¤§å°çš„æ¯”é‡ï¼Œå€¼ä¸º <code>0 ~ 1</code> ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¸º <code>0</code> ï¼Œå³è¾¹æ¡†ç›¸äº¤å°±ç›´æ¥è°ƒç”¨å›è°ƒå‡½æ•°ã€‚</p><p><a data-fancybox="doc-gallery" href="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/03/09/202203091017411.avif" target="_blank" rel="noopener noreferrer"><img src="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/03/09/202203091017411.avif" alt=""></a></p><p><code>IntersectionObserver</code> ä½¿ç”¨äº† <code>roomMargin</code> æ¥æ‰©å¤§æˆ–è€…ç¼©å°æ£€æµ‹çš„è¾¹æ¡†ï¼Œè¯¥å€¼é»˜è®¤ä¸º <code>0px 0px 0px 0px</code> ï¼Œå³è¾¹æ¡†å°±æ˜¯å¯¹åº”çš„ <code>width</code> å’Œ <code>height</code> ã€‚</p><p>ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœå°† <code>roomMargin</code> è®¾ç½®ä¸º <code>0 0 100px 0</code> çš„è¯ï¼Œæ„å‘³ç€æ£€æµ‹çš„è¾¹æ¡†å‘â€œå¤–â€æ‰©å¤§äº†ï¼Œå³å›¾ç‰‡ä¼šæ›´æ—©åœ°è¢«åŠ è½½ã€‚</p><p><a data-fancybox="doc-gallery" href="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/03/09/202203091023313.avif" target="_blank" rel="noopener noreferrer"><img src="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/03/09/202203091023313.avif" alt=""></a></p><p>ç›¸åï¼Œå¦‚æœå°† <code>roomMargin</code> è®¾ç½®ä¸º <code>0 0 -100px 0</code> çš„è¯ï¼Œæ„å‘³ç€æ£€æµ‹çš„è¾¹æ¡†å‘â€œå†…â€æ”¶ç¼©äº†ï¼Œå³å›¾ç‰‡ä¼šæ›´æ™šåœ°è¢«åŠ è½½ã€‚</p><p><a data-fancybox="doc-gallery" href="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/03/09/202203091027183.avif" target="_blank" rel="noopener noreferrer"><img src="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/03/09/202203091027183.avif" alt=""></a></p><p>å¦‚æœè¿˜æ˜¯å¯¹ç›¸å…³çš„å‚æ•°ä¸æ˜¯å¾ˆäº†è§£ï¼Œå¯ä»¥ç›´æ¥å» <code>MDN</code> çš„ç›¸å…³é¡µé¢æŸ¥çœ‹è§£é‡Šï¼š</p><blockquote><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Intersection_Observer_API" target="_blank" rel="noopener">Intersection Observer API - MDN</a></p></blockquote><p><a data-fancybox="doc-gallery" href="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/03/08/202203081824246.avif" target="_blank" rel="noopener noreferrer"><img src="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/03/08/202203081824246.avif" alt=""></a></p><p>ä¸­æ–‡é¡µååŠéƒ¨åˆ†è¿˜æ²¡å®Œå…¨ç¿»è¯‘å¥½ï¼Œå‡‘åˆç€çœ‹ã€‚</p><p>é™¤äº†ç¬¬äºŒä¸ªå‚æ•°ï¼Œæˆ‘ä»¬è¿˜åœ¨ç¬¬ä¸€ä¸ªå‚æ•°çš„å›è°ƒä¸­ä½¿ç”¨æ•°ç»„è§£æ„çš„è¯­æ³•è§£æ„å‡ºäº†ä¸€ä¸ª <code>entry</code> å¯¹è±¡ï¼Œä½¿ç”¨äº†å®ƒçš„ <code>isIntersecting</code> å±æ€§ï¼Œè¿™ä¸ªå±æ€§è¿”å› <code>true</code> æ„å‘³ç€ä»éç›¸äº¤è½¬åˆ°ç›¸äº¤ï¼Œè¿”å› <code>false</code> åˆ™ç›¸åã€‚</p><p>å½“ç„¶é™¤äº† <code>isIntersecting</code> å±æ€§ï¼Œä¹Ÿæœ‰å…¶ä»–ä¸€äº›å±æ€§ï¼Œå¯ä»¥è·å–ç›¸å…³çš„å¸ƒå±€ä¿¡æ¯ï¼Œä¸è¿‡è¿™é‡Œç”¨ä¸åˆ°ï¼Œå°±ä¸è¯¦ç»†å±•å¼€äº†ï¼Œå¯ä»¥å» <code>MDN</code> ä¸ŠæŸ¥çœ‹ï¼š</p><blockquote><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/IntersectionObserverEntry" target="_blank" rel="noopener">IntersectionObserverEntry - MDN</a></p></blockquote><p><a data-fancybox="doc-gallery" href="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/03/09/202203091053471.avif" target="_blank" rel="noopener noreferrer"><img src="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/03/09/202203091053471.avif" alt=""></a></p><p>åœ¨ <code>vueuse/core</code> ä¸­ï¼Œä¹Ÿä¸ºæˆ‘ä»¬å°è£…äº†è¿™æ ·çš„ä¸€ä¸ªçš„å‡½æ•° <code>useIntersectionObserver</code> ã€‚</p><blockquote><p><a href="https://github.com/vueuse/vueuse/blob/main/packages/core/useIntersectionObserver/index.ts" target="_blank" rel="noopener">useIntersectionObserver - vueuse</a></p></blockquote><p>å…¶ä¸­å¯¹æ˜¯å¦æ”¯æŒ <code>IntersectionObserver</code> çš„åˆ¤æ–­ä¸º <code>const isSupported = window &amp;&amp; 'IntersectionObserver' in window</code> ã€‚</p><p>æ‰€ä»¥æ ¹æ®è¿™ä¸ªå°±å¯ä»¥åšä¸€äº›é™çº§å¤„ç†ï¼Œä» <code>IntersectionObserver</code> é™çº§åˆ° <code>getBoundingClientRect</code> ã€‚</p><h2 id="è¿™ä¸¤ç§æ‡’åŠ è½½æ–¹æ³•çš„åŒºåˆ«" tabindex="-1">è¿™ä¸¤ç§æ‡’åŠ è½½æ–¹æ³•çš„åŒºåˆ« <a class="header-anchor" href="#è¿™ä¸¤ç§æ‡’åŠ è½½æ–¹æ³•çš„åŒºåˆ«">ğŸ”—</a></h2><p>ä¸Šé¢æˆ‘ä»¬è®²äº†ä¸¤ç§æ–¹æ³•</p><ul><li>ç›‘å¬ <code>scroll</code> äº‹ä»¶ï¼Œé€šè¿‡ <code>getBoundingClientRect</code> æ¥è·å–ä½ç½®ï¼Œä»è€Œè¿›è¡Œè®¡ç®—å’Œåˆ¤æ–­ã€‚</li><li>ä½¿ç”¨åŸç”Ÿçš„ <code>IntersectionObserver</code> åˆ›å»ºå¯¹è±¡ã€‚</li></ul><h3 id="å…¼å®¹æ€§" tabindex="-1">å…¼å®¹æ€§ <a class="header-anchor" href="#å…¼å®¹æ€§">ğŸ”—</a></h3><p>å…¼å®¹æ€§ä¸Šè®²ï¼Œ<code>getBoundingClientRect</code> çš„å…¼å®¹æ€§æ˜¯å®Œèƒœ <code>IntersectionObserver</code> ã€‚</p><p><code>IntersectionObserver</code> çš„å…¼å®¹æ€§å¦‚ä¸‹ï¼š</p><p><a data-fancybox="doc-gallery" href="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/03/09/202203091059499.avif" target="_blank" rel="noopener noreferrer"><img src="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/03/09/202203091059499.avif" alt=""></a></p><p><code>getBoundingClientRect</code> å…¼å®¹æ€§å¦‚ä¸‹ï¼š</p><p><a data-fancybox="doc-gallery" href="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/03/09/202203091102664.avif" target="_blank" rel="noopener noreferrer"><img src="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/03/09/202203091102664.avif" alt=""></a></p><p>å…¼å®¹ <code>IE</code> è¿™ç‚¹ <code>IntersectionObserver</code> å®Œè´¥å“ˆå“ˆå“ˆå“ˆã€‚</p><p><code>IntersectionObserver</code> çš„å…¼å®¹æ€§è¿˜æ˜¯ç›¸å½“ä¸é”™çš„ï¼Œæ‰€ä»¥å¦‚æœé¡¹ç›®å¯¹å…¼å®¹æ€§è¦æ±‚ä¸é«˜çš„è¯ï¼Œå¤§èƒ†åœ°ä¸Šå§ã€‚</p><p>å“¦å¯¹äº†ï¼Œå›è°ƒå†…çš„ <code>IntersectionObserverEntry</code> å¯¹è±¡çš„å±æ€§ç°åœ¨è¿˜æ˜¯å®éªŒæ€§è´¨çš„ï¼Œæœªæ¥å¯èƒ½è¿˜ä¼šå‘ç”Ÿå˜åŒ–ï¼Œä¸è¿‡å°±å•å• <code>isIntersecting</code> è¿™ä¸ªå±æ€§ï¼Œæˆ‘è§‰å¾—åº”è¯¥æ˜¯ä¸ä¼šå‡ºç°ä»€ä¹ˆæ”¹åŠ¨çš„ï¼Œå—¯ï¼Œå¤§æ¦‚â€¦</p><h3 id="æ€§èƒ½" tabindex="-1">æ€§èƒ½ <a class="header-anchor" href="#æ€§èƒ½">ğŸ”—</a></h3><p>é¦–å…ˆï¼Œæˆ‘ä»¬çŸ¥é“ <code>getBoundingClientRect</code> è¿™ä¸ªæ–¹æ³•æ˜¯ä¼šç«‹å³æ¸…ç©ºï¼ˆæ‰§è¡Œï¼‰æµè§ˆå™¨çš„é‡æ’ç¼“å†²é˜Ÿåˆ—ï¼Œå¦‚æœç½‘ç«™çš„åŠ¨ç”»å¾ˆå¤šçš„è¯ï¼Œå¯èƒ½ä¼šå¢åŠ é‡æ’çš„æ¬¡æ•°ï¼Œé€ æˆç½‘ç«™å¡é¡¿ã€‚</p><p>è€Œä¸”è°ƒç”¨ <code>getBoundingClientRect</code> æ˜¯ä¸€ä¸ªåŒæ­¥çš„è¿‡ç¨‹ï¼Œå¦‚æœæ“ä½œæ—¶é—´è¿‡é•¿ï¼Œæ„å‘³ç€ä¸»çº¿ç¨‹è¢«é•¿æ—¶é—´çš„å ç”¨ï¼Œå¯èƒ½ä¼šå½±å“åˆ°ç”¨æˆ·çš„å…¶ä»–äº¤äº’ï¼Œå¹¶ä¸”ç”±äº <code>scroll</code> çš„è°ƒç”¨é¢‘ç‡æ˜¯éå¸¸é«˜çš„ï¼Œåœ¨ <code>scroll</code> äº‹ä»¶ä¸­è°ƒç”¨ <code>getBoundingClientRect</code> ï¼Œåœ¨è€äººæœºä¸Šå°±å®Œå…¨æœ‰å¯èƒ½é€ æˆç›¸å½“ä¸¥é‡çš„å¡é¡¿ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸ªåŠ ä¸ª<strong>èŠ‚æµ</strong>ï¼Œä¸€å®šç¨‹åº¦ä¸Šæ¥ç¼“è§£ <code>scroll</code> è°ƒç”¨é¢‘ç‡è¿‡é«˜é—®é¢˜ã€‚</p><p>æ–°çš„ <code>IntersectionObserver</code> å®ç°æ˜¯å¼‚æ­¥çš„ï¼Œè¿™æ„å‘³ç€ä¸éœ€è¦åœ¨ <code>scroll</code> äº‹ä»¶ä¸­è¿›è¡Œå¤§é‡çš„è®¡ç®—ï¼Œç±»ä¼¼äº <code>requestIdleCallback</code> ï¼Œå®ƒçš„ä¼˜å…ˆçº§æ˜¯æ¯”è¾ƒä½çš„ï¼Œè¿™å¯ä»¥é˜²æ­¢é•¿æ—¶é—´å ç”¨ä¸»çº¿ç¨‹é€ æˆçš„é¡µé¢æ— å“åº”ã€‚</p><p>è¿™é‡Œè´´ä¸€ä¸ª <code>IntersectionObserver</code> çš„ <code>polyfill</code> ï¼š</p><blockquote><p><a href="https://github.com/w3c/IntersectionObserver/blob/cac7ad29d28629f8d25affda853eda3440b05f97/polyfill/intersection-observer.js" target="_blank" rel="noopener">polyfill/intersection-observer.js - w3c</a></p></blockquote><p>åœ¨å®ç°çš„ç¬¬ <code>369</code> å’Œ <code>370</code> å¯ä»¥çœ‹å‡ºï¼Œé™çº§ä¹‹åè¿˜æ˜¯é€šè¿‡ç›‘å¬ <code>scroll</code> å’Œ <code>resize</code> äº‹ä»¶æ¥æ£€æµ‹æ˜¯å¦ç›¸äº¤çš„ã€‚</p><p><a data-fancybox="doc-gallery" href="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/03/09/202203091451387.avif" target="_blank" rel="noopener noreferrer"><img src="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/03/09/202203091451387.avif" alt=""></a></p><p>åœ¨ <code>143</code> è¡Œï¼Œä½¿ç”¨äº†èŠ‚æµå‡½æ•° <code>throttle</code> æ¥åŒ…ä½ <code>_checkForIntersections</code> ã€‚</p><p><a data-fancybox="doc-gallery" href="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/03/09/202203091453045.avif" target="_blank" rel="noopener noreferrer"><img src="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/03/09/202203091453045.avif" alt=""></a></p><p>soï¼Œç›´æ¥ä¸Š <code>IntersectionObserver</code> å°±å®Œäº‹äº†ï¼Œå¤§ä½¬éƒ½æŠŠé™çº§å†™å¥½äº†ï¼Œæ‹¿æ¥å¼•å…¥å³å¯ã€‚</p><h1 id="åè®°" tabindex="-1">åè®° <a class="header-anchor" href="#åè®°">ğŸ”—</a></h1><p>å¦‚æœä½ çœ‹åˆ°è¿™é‡Œäº†ï¼Œé‚£ä¹ˆå¯¹äºç¬¬ä¸€ä¸ªé€šè¿‡ <code>scroll</code> å®ç°çš„æ‡’åŠ è½½è¿˜æ˜¯æœ‰ä¸€ä¸ªé—®é¢˜ã€‚</p><p>é‚£å°±æ˜¯æ²¡ç›‘å¬ <code>resize</code> äº‹ä»¶ï¼Œå› ä¸ºçª—å£å¤§å°çš„å˜åŒ–ä¹Ÿä¼šæ”¹å˜å…ƒç´ çš„å¯è§çŠ¶æ€ã€‚</p><p>å½“ç„¶ï¼Œæ£€æµ‹å¯è§è¿™ç§æŠ€æœ¯ä¸ä»…å¯ä»¥ç”¨åœ¨å›¾ç‰‡æ‡’åŠ è½½ï¼Œè¿˜å¯ä»¥ç”¨åœ¨å¾ˆå¤šåœ°æ–¹ï¼Œæ¯”å¦‚ï¼š</p><ul><li>è§†é¢‘è¿›å…¥å¯è§†çª—å£è‡ªåŠ¨æ’­æ”¾</li><li>ç›‘å¬ä¸€ä¸ªå ä½å…ƒç´ æ¥å®ç°ä¸‹æ‹‰åˆ°æœ€åè‡ªåŠ¨åˆ·æ–°</li><li>æ£€æµ‹ç”¨æˆ·å¯¹æŸä¸ªåŒºåŸŸçš„åœç•™æ—¶é•¿ï¼Œæ¯”å¦‚å¹¿å‘Šï¼Œæ¶ˆæ¯åŒºåŸŸç­‰ç­‰</li><li>åœ¨å…ƒç´ å¯è§ä¹‹åå†æ‰§è¡Œè¯¥å…ƒç´ çš„åŠ¨ç”»</li><li>â€¦</li></ul><p>è™½ç„¶å®ƒçœŸçš„å¾ˆå‰å®³ï¼Œä½†æ˜¯æˆ‘åˆ°ç°åœ¨è¿˜æ²¡åœ¨é¡¹ç›®ä¸­ç”¨åˆ°å®ƒâ€¦</p></div><!--]--></div><div flex="~ wrap" text="[var(--mygo-c-text-2)]" mt-8="" gap-4="" justify-center=""><!--[--><div>#Vue</div><div>#VueUse</div><div>#JavaScript</div><div>#Lazy Load Image</div><!--]--></div><!--]--></div></div><div class="mujika-card mujika-card--hover mujika-card--border" w-full="" overflow-auto="" data-v-7ac4adc5=""><div class="p-4 lg:p-8" data-v-7ac4adc5=""><!--[--><div flex="~ wrap" gap-4=""><a href="/e23644b7eddf" class="" truncate="" title="è®©Vue.draggableæ”¯æŒäº¤æ¢å¼æ‹–æ‹½ï¼ˆè¯‘ï¼‰"><i class="i-mi:chevron-left" mr-1=""></i><span>è®©Vue.draggableæ”¯æŒäº¤æ¢å¼æ‹–æ‹½ï¼ˆè¯‘ï¼‰</span></a><a href="/94f450fa1b14" class="" ml-auto="" truncate="" title="computed å¯èƒ½æˆä¸ºä¸€ä¸ªé”™è¯¯çš„å·¥å…·ï¼ˆè¯‘æ–‡ï¼‰"><span>computed å¯èƒ½æˆä¸ºä¸€ä¸ªé”™è¯¯çš„å·¥å…·ï¼ˆè¯‘æ–‡ï¼‰</span><i class="i-mi:chevron-right" ml-1=""></i></a></div><!--]--></div></div><!--[--><div class="mujika-card mujika-card--hover mujika-card--border" w-full="" overflow-auto="" data-v-81763621="" data-v-7ac4adc5=""><div class="p-4 lg:p-8" data-v-7ac4adc5=""><!--[--><div flex="" gap-4="" items-start="" data-v-81763621=""><div flex="~ shrink-0" bg="[var(--mygo-c-bg-alt)]" rounded-6px="" w-60px="" aspect-ratio-square="" items-center="" justify-center="" data-v-81763621=""><i text-40px="" text="[#999]" class="i-fa6-regular:user" data-v-81763621=""></i></div><div flex="~ col grow" gap-2="" lg:gap-4="" data-v-81763621=""><textarea disabled="" placeholder="ä¸‡æ°´åƒå±±æ€»æ˜¯æƒ…ï¼Œç•™ä¸‹è¯„è®ºè¡Œä¸è¡Œ" class="mujika-git-talk-textarea" un-disabled:cursor-not-allowed="" p-2="" outline-0="" h-4em="" lg:p-4="" lg:h-8em="" data-v-81763621=""></textarea><div flex="" items-start="" data-v-81763621=""><a target="_blank" href="https://guides.github.com/features/mastering-markdown/" data-v-81763621="">æ”¯æŒ Markdown è¯­æ³•</a><div ml-auto="" data-v-81763621=""></div><!----><button class="mujika-button" data-v-81763621="" data-v-15330f5f=""><!--[--><!--]--><!--[-->ç‚¹å‡»ç™»å½•<!--]--></button></div></div></div><!--]--></div></div><div class="mujika-card mujika-card--hover mujika-card--border" w-full="" overflow-auto="" data-v-81763621="" data-v-7ac4adc5=""><div class="p-4 lg:p-8" data-v-7ac4adc5=""><!--[--><div flex="" items-center="" justify-center="" data-v-81763621="">å“¦å‘¢è¯¥ï¼Œå¦‚æœæ²¡æœ‰è¯„è®ºçš„è¯ï¼Œç“¦è¾¾è¥¿...</div><!----><!--]--></div></div><!--]--></div><aside class="mujika-aside" w="280px" flex="~ col shrink-0" top-2="" sticky="" max-h="[calc(100vh-var(--spacing)*4)]" un-hidden="" lg:block=""><div class="mujika-card mujika-card--hover mujika-card--border" w-full="" overflow-auto="" flex="~ col" gap-4="" data-v-7ac4adc5=""><!--[--><div p="4 b-0" flex-shrink-0="">æ–‡ç« ç›®å½•</div><div p="4 t-0" flex-grow="" min-h-0="" overflow-y-auto=""><!----></div><!--]--></div></aside><!--teleport start--><!--teleport end--></div></main><footer class="mujika-footer" px-4="" py-6="" bg="[var(--mygo-c-bg)]" flex="~ col shrink-0" gap-2="" items-center="" data-v-689781c6=""><div flex="" items-center="" data-v-689781c6=""><span data-v-689781c6="">ç”±&nbsp;</span><i class="i-logos:vue" data-v-689781c6=""></i><span data-v-689781c6="">&nbsp;+&nbsp;</span><i class="i-logos:vitejs" data-v-689781c6=""></i><span data-v-689781c6="">&nbsp;é©±åŠ¨</span></div><div text-center="" data-v-689781c6=""><a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" data-v-689781c6="">CC BY-NC-SA 4.0 </a>2021 - PRESENT Â© Dedicatus545</div><div text="[var(--mygo-c-text-2)]" text-center="" data-v-689781c6="">å¦‚æœæˆ‘å’Œç‹—ä¸€æ ·æœ‰å°¾å·´çš„è¯ï¼Œä¸€å®šä¼šè—ä¸ä½è¿™ä»½å–œæ‚¦ï¼Œè€Œå°¾å·´ä¸€ç›´æ‘‡ä¸ªä¸åœå§ã€‚ - ã€Šç§’é€Ÿäº”å˜ç±³ã€‹</div></footer></div></div></body></html>