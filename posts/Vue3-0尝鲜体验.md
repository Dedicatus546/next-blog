---
title: Vue3.0å°é²œä½“éªŒ
key: 1591930416date: 2020-06-12 10:53:36
updated: 2023-02-13 18:28:43
tags:
  - JavaScript
  - Vue
categories:
  - ç¼–ç¨‹
---


`Vue3.0`å°é²œä½“éªŒã€‚

<!-- more -->

è¿™æ¬¡æ¥ä½“éªŒä¸‹`Vue3.0`ã€‚

é¦–å…ˆæˆ‘ä»¬å»`vue3.0`çš„`github`ä»“åº“ï¼š

> [vue-next](https://github.com/vuejs/vue-next)

# åŒºåˆ«

æœ€è¿‘ä¹Ÿåœ¨çœ‹`Vue3.0`ä¸­å…³äº`reactivity`åŒ…çš„æºç ï¼Œæ„Ÿè§‰æŒºæ–°å¥‡çš„ã€‚

`Vue2`å¯¹å±æ€§æ”¹å˜çš„ç›‘å¬ç”¨çš„æ˜¯`Object.defineProperty`ï¼Œéœ€è¦éå†æ¯ä¸ªå¯¹è±¡çš„æ¯ä¸ªå±æ€§ã€‚

è€Œ`Vue3`ç”¨çš„æ˜¯`Proxy`ï¼Œç›‘å¬çš„ä¸ºæ•´ä¸ªå¯¹è±¡ï¼Œè€Œä¸”å¯¹æ•°ç»„çš„æ”¯æŒæ›´å¥½äº†ã€‚

æœ€æœ€æœ€é‡è¦çš„æ˜¯`Vue3`å®Œå…¨ç”±`TypeScript`å¼€å‘ï¼Œè€Œä¸”ä¹Ÿæ”¯æŒé€šè¿‡`TypeScript`æ¥ç¼–å†™ç»„ä»¶ï¼Œç›¸å½“çš„é¦™ã€‚

åœ¨`Vue2`çš„æ—¶å€™ï¼Œæ•´ä¸ªé¡¹ç›®å®Œå…¨ä½¿ç”¨äº†`JavaScript`è¿›è¡Œç¼–å†™ï¼Œä¸ºäº†èƒ½å¤Ÿæ”¯æŒé™æ€ç±»å‹æ£€æŸ¥ï¼Œè€Œå¼•å…¥äº†`flowjs`ï¼Œä¸ä½¿ç”¨`TypeScript`çš„åŸå› æ˜¯é‡æ„æˆæœ¬è¿‡é«˜ï¼Œè€Œ`flowjs`å¯ä»¥å¹³æ»‘çš„å¼•å…¥çš„é¡¹ç›®ä¸­ã€‚

ä¸è¿‡éšç€`TypeScript`çš„å‘å±•ï¼Œ`VSCode`çš„å‡ºç°ï¼Œä»¥åŠ`ECMAScript`è§„èŒƒçš„ä¸æ–­æ›´æ–°ï¼Œ`Vue3`å°±åŸºæœ¬å®Œå…¨ä½¿ç”¨`TypeScript`æ¥ç¼–å†™äº†ã€‚

æƒ³å½“åˆä½¿ç”¨`React`ä¹Ÿæ˜¯å› ä¸ºæ”¯æŒ`TypeScript`ï¼ˆå¤æ‚`TypeScript`ç”¨æ³•æˆ‘ä¹Ÿä¸ä¼š ğŸ¤£ï¼Œåªèƒ½å†™å†™åŸºæœ¬ç±»å‹å®šä¹‰è¿™ä¸ªæ ·å­ã€‚

# ç¼–è¯‘ Vue-next é¡¹ç›®ç”Ÿæˆåº“æ–‡ä»¶

ç”µè„‘å¿…é¡»æœ‰`node`çš„ç¯å¢ƒï¼Œå¦‚æœä¸çŸ¥é“æœ‰æ²¡æœ‰çš„å¯ä»¥åœ¨`cmd`è¾“å…¥`node -v`æ¥æŸ¥çœ‹ã€‚

å…ˆæŠŠé¡¹ç›®ç»™å…‹éš†åˆ°æœ¬åœ°ï¼Œæˆ‘ä»¬çš„ç›®çš„å°±æ˜¯ç”¨è¿‡æ„å»ºè¿™ä¸ªé¡¹ç›®æ¥ç”Ÿæˆä¸€ä¸ª`Vue.js`çš„`js`åº“ï¼Œç„¶åä½¿ç”¨å®ƒã€‚

- `git clone https://github.com/vuejs/vue-next.git`

ç„¶åæˆ‘ä»¬å°±åœ¨æœ¬åœ°æœ‰äº†ä¸€ä»½`Vue-next`çš„æºç ã€‚

![](https://i.loli.net/2020/04/23/HXRDImixUVLZnCN.png)

`IDE`æ¨èç”¨`idea`æˆ–è€…`VSCode`ï¼Œä½¿ç”¨èµ·æ¥éå¸¸èˆ’æœã€‚

åœ¨æ§åˆ¶å°è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š

- `yarn`

æ­¤å‘½ä»¤ç”¨äºå®‰è£…ä¾èµ–ï¼Œæ³¨æ„æ˜¯åœ¨æ–‡ä»¶å¤¹çš„å†…éƒ¨ä½¿ç”¨ï¼Œå¦‚æœæ²¡æœ‰å®‰è£…`yarn`ï¼Œå¯ä»¥ä½¿ç”¨`npm install`æ¥æ‰§è¡Œã€‚

æ¥ç€æˆ‘ä»¬å¯ä»¥çœ‹çœ‹`package.json`é‡Œé¢çš„`script`å‘½ä»¤ã€‚

![](https://i.loli.net/2020/04/23/MBp8Lzfma7i1r5P.png)

å‘ç°æœ‰æŒºå¤šçš„ï¼Œä½†æ˜¯æˆ‘ä»¬åªè¦è¿è¡Œç¬¬ä¸€æ¡å‘½ä»¤å³å¯ï¼Œ`dev`å‘½ä»¤ä¼šåœ¨`package/vue/dist`ä¸‹ç”Ÿæˆ`vue.global.js`çš„æ–‡ä»¶ï¼Œè¿™ä¸ªå°±æ˜¯å¼€å‘ç¯å¢ƒä¸‹çš„æ–‡ä»¶äº†ã€‚

- `yarn dev`

æ²¡æœ‰`yarn`çš„ï¼Œè¿è¡Œ`npm run dev`çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚

è¿™æ ·å°±å¾—åˆ°äº†ä¸€ä¸ªå¯ä»¥é€šè¿‡`script`å¼•å…¥çš„åº“æ–‡ä»¶äº†ã€‚

# æ–°å»ºé¡¹ç›®æ¥ä½¿ç”¨ç”Ÿæˆçš„åº“æ–‡ä»¶

æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œæˆ‘è¿™è¾¹çš„å‘½åä¸º`vue3`ï¼Œæˆ‘ä»¬çš„ç›®çš„æ˜¯æ­å»ºä¸€ä¸ª`node`çš„æœåŠ¡å™¨æ¥ï¼Œç„¶åé€šè¿‡`html`æ–‡ä»¶æ¥å¼•å…¥`js`åº“æ¥ä½¿ç”¨`Vue3`ã€‚

- è¿è¡Œ`npm init`æ¥åˆå§‹åŒ–é¡¹ç›®ï¼›
- æŠŠç”Ÿæˆçš„åº“æ–‡ä»¶æ‰¾ä¸ªåœ°æ–¹æ”¾èµ·æ¥ï¼Œæˆ‘è¿™è¾¹æ˜¯å»ºäº†ä¸ª`lib`çš„æ–‡ä»¶å¤¹ï¼›
- å»ºä¸ª`html`æ–‡ä»¶å¤¹æ¥å­˜æ”¾æˆ‘ä»¬çš„ html æ–‡ä»¶ã€‚

ä¸Šé¢åšå®Œåï¼Œç›®å½•å¤§è‡´å’Œä¸‹é¢ä¸€æ ·ï¼š

![](https://i.loli.net/2020/04/23/41MGQiaWznsPXAK.png)

æœ‰`node_modules`æ–‡ä»¶å¤¹æ˜¯å› ä¸ºä½¿ç”¨äº†ä¸€äº›ä¾èµ–ï¼Œä¸‹é¢è®²ã€‚

æ¥ä¸‹æ¥ä½¿ç”¨`Koa`æ¥æ­å»ºä¸€ä¸ªé™æ€çš„æœåŠ¡å™¨ã€‚

å…ˆå¼•å…¥ä¾èµ–ï¼š

- è¿è¡Œ`yarn add koa`æˆ–è€…`npm install koa`ï¼›
- è¿è¡Œ`yarn add koa-static`æˆ–è€…`npm install koa-static`ã€‚

`koa`æ˜¯ä¸€ä¸ª`node`å¹³å°çš„`web`æ¡†æ¶ï¼Œä½¿ç”¨äº†`async`å’Œ`await`çš„è¯­æ³•ï¼ŒæŒºä¸é”™çš„ã€‚

ä½†æ˜¯æˆ‘ä»¬åŸºæœ¬ç”¨ä¸åˆ°è¿™äº›è¯­æ³•ï¼Œå› ä¸ºæˆ‘ä»¬ä¸»è¦æ˜¯å½“ä½œé™æ€èµ„æºæœåŠ¡å™¨ï¼Œåªè¦ç®€å•çš„é…ç½®å°±å¯ä»¥ä½¿ç”¨ã€‚

`koa-static`ç”¨äºå¤„ç†é™æ€èµ„æºã€‚

æˆ‘ä»¬åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹å»ºç«‹å…¨å±€å…¥å£æ–‡ä»¶`index.js`ã€‚

```javascript
// å¯¼å…¥ä¾èµ–
const Koa = require("koa");
const KoaStatic = require("koa-static");
const path = require("path");
// æ–°å»ºä¸€ä¸ªapp
const app = new Koa();
// è·å–å½“å‰é¡¹ç›®çš„è·¯å¾„å¹¶é€škoa-staticç”Ÿæˆä¸€ä¸ªä¸­é—´ä»¶
const home = KoaStatic(path.join(__dirname));
// ä½¿ç”¨ä¸­é—´ä»¶
app.use(home);
// ç›‘å¬ç«¯å£
app.listen(3030, (err) => {
  if (err) throw err;
  console.log("æœåŠ¡å™¨å·²ç»è¿è¡Œ");
});
```

æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨ html æ–‡ä»¶å¤¹ä¸‹é¢æ–°å»ºä¸€ä¸ª`vue.html`æ¥ä½¿ç”¨`Vue3`ï¼š

```html
<!DOCTYPE html>
<html>
  <head>
    <title>vue</title>
  </head>
  <body>
    <div id="app"></div>
    <!-- å¯¼å…¥ä¾èµ– -->
    <script type="text/javascript" src="/lib/vue.global.js"></script>
    <!-- ç¼–å†™æƒ³å®éªŒçš„ä»£ç  -->
    <script type="text/javascript">
      const { reactive } = Vue;
      const component = Vue.createApp({
        setup() {
          const data = reactive({
            msg: "Hello~ Vue3",
          });
          return {
            data,
          };
        },
        template: `<h1>{{data.msg}}</h1>`,
      }).mount("#app");
    </script>
  </body>
</html>
```

åˆ°æ­¤ï¼Œé™æ€æœåŠ¡å™¨æ­å»ºå®Œæˆã€‚

- è¿è¡Œ `node index.js`ï¼›
- æµè§ˆå™¨æ‰“å¼€ `localhost:3030/html/vue.html`å°±å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„ç½‘é¡µäº†ã€‚

![](https://i.loli.net/2020/04/23/GDrINQAWZzU7YJK.png)

ç„¶åæˆ‘ä»¬åœ¨æ§åˆ¶å°å¯ä»¥è¾“å…¥`component.data.msg = &#39;Hello lwf&#39;`å°±å¯ä»¥è§‚å¯Ÿåˆ°è§†å›¾å‘ç”Ÿå˜åŒ–äº†ã€‚

![](https://i.loli.net/2020/04/23/UeMpwSDxZTQotlC.gif)

æ›´å¤šçš„`Api`å¯ä»¥çœ‹ä¸‹é¢çš„ç½‘ç«™ã€‚

> [Vue3 çš„ Api](https://vue-composition-api-rfc.netlify.app/api.html#template-refs)
