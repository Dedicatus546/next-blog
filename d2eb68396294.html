<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><link rel="icon" type="image/svg+xml" href="/logo.svg"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Fetchå¯¹è±¡çš„ç®€å•ä½¿ç”¨</title><script type="importmap">{"imports":{"vue":"https://esm.sh/vue","vue-router":"https://esm.sh/vue-router","pinia":"https://esm.sh/pinia","@vueuse/core":"https://esm.sh/@vueuse/core","@vueuse/components":"https://esm.sh/@vueuse/components","@vueuse/router":"https://esm.sh/@vueuse/router","date-fns":"https://esm.sh/date-fns","nprogress":"https://esm.sh/nprogress","octokit":"https://esm.sh/octokit","pinia-plugin-persistedstate":"https://esm.sh/pinia-plugin-persistedstate","vue-router-better-scroller":"https://esm.sh/vue-router-better-scroller"}}</script><script type="module" async="" crossorigin="" src="/assets/app-CGnJzz9B.js"></script><link rel="stylesheet" crossorigin="" href="/assets/app-tWEfGeAP.css"><link rel="modulepreload" crossorigin="" href="/assets/Fetchå¯¹è±¡çš„ç®€å•ä½¿ç”¨-CfY4cWft.js"><meta property="og:title" content="Fetchå¯¹è±¡çš„ç®€å•ä½¿ç”¨"><meta name="twitter:title" content="Fetchå¯¹è±¡çš„ç®€å•ä½¿ç”¨"></head><body><div id="app" data-server-rendered="true"><div class="mujika" min-h="100vh" flex="~ col" bg="[--mygo-c-bg-alt]"><header class="mujika-header" flex="~ shrink-0" px-4="" h="70px" bg="[var(--mygo-c-bg)]" items-center="" justify-between="" data-v-c1947e25=""><a href="/" class="" flex="" gap-4="" items-center="" data-v-c1947e25=""><img w="40px" aspect-ratio-square="" src="/logo.svg" alt="æ‹ã®æ­Œçš„logo" data-v-c1947e25=""></a><div data-v-c1947e25=""><div p-1="" flex="" gap-1="" rounded="6px" bg="[var(--mygo-c-bg-alt)]" data-v-c1947e25=""><!--[--><div leading="[1]" px-2="" py-1="" cursor-pointer="" rounded="6px" class="bg-[var(--mygo-c-bg)]" title="è‡ªåŠ¨" data-v-c1947e25=""><!--[-->Auto<!--]--></div><div leading="[1]" px-2="" py-1="" cursor-pointer="" rounded="6px" class="" title="æ—¥é—´" data-v-c1947e25=""><!--[--><i class="i-ri:sun-line" data-v-c1947e25=""></i><!--]--></div><div leading="[1]" px-2="" py-1="" cursor-pointer="" rounded="6px" class="" title="å¤œé—´" data-v-c1947e25=""><!--[--><i class="i-ri:moon-line" data-v-c1947e25=""></i><!--]--></div><!--]--></div></div></header><main class="mujika-home" flex="grow" mx="auto" min-h="0" p-2="" w-full="" un-2xl:w="[calc(96rem-var(--spacing)*2)]"><div flex="" gap-2="" items-start=""><div flex="~ col grow" gap-2="" min-w-0=""><div class="mujika-card mujika-card--hover mujika-card--border" w-full="" overflow-auto="" data-v-7ac4adc5=""><div class="p-4 lg:p-8" data-v-7ac4adc5=""><!--[--><div flex="~ col" mb-4="" gap-4=""><h1 break-all="" text="34px center">Fetchå¯¹è±¡çš„ç®€å•ä½¿ç”¨</h1></div><div flex="~ col" gap-3="" text="[var(--mygo-c-text-2)]"><div flex="~ wrap" gap-3="" justify-center=""><!----><div flex="" gap-1="" items-center=""><i class="i-fa6-regular:calendar"></i><span un-hidden="" lg:inline="">å‘è¡¨äº</span><span pl-1="">2020-10-02 14:22</span></div><div flex="" gap-1="" items-center=""><i class="i-fa6-regular:calendar-check"></i><span un-hidden="" lg:inline="">æ›´æ–°äº</span><span pl-1="">2023-02-13 18:28</span></div><div flex="" gap-1="" items-center=""><i class="i-fa6-regular:folder"></i><span un-hidden="" lg:inline="">åˆ†ç±»äº</span><!--[--><a pl-1="" href="/category/ç¼–ç¨‹">ç¼–ç¨‹</a><!--]--></div></div><div flex="~ wrap" gap-3="" justify-center=""><div flex="" gap-1="" items-center=""><i class="i-fa6-regular:file-word"></i><span un-hidden="" lg:inline="">æ€»å­—æ•°</span><span pl-1="">2.1K</span></div><div flex="" gap-1="" items-center=""><i class="i-fa6-regular:clock"></i><span un-hidden="" lg:inline="">é˜…è¯»æ—¶é•¿ â‰ˆ</span><span pl-1="">8 åˆ†é’Ÿ</span></div></div></div><div class="mujika-doc-content"><!--[--><div class="kan-doc"><h1 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€">ğŸ”—</a></h1><p>ç™¾åº¦äºŒé¢çš„æ—¶å€™é¢è¯•å®˜å«æˆ‘ç®€å•çš„åŸºäº<code>fetch</code>å°è£…ä¸€ä¸ªç®€å•çš„å‡½æ•°</p><p>æ²¡ç”¨è¿‡è¿™ä¸ªAPIæ‰€ä»¥å½“æ—¶ç›´æ¥è¯´æ²¡ç”¨è¿‡ï¼Œç„¶åæ”¹æˆç”¨<code>XMLHttpRequest</code>æ¥å°è£…â€¦</p><p>æ‰€ä»¥å†™ä¸€å†™æ¥å­¦ä¹ ä¸‹åŸºæœ¬çš„ä½¿ç”¨</p><h1 id="fetch" tabindex="-1"><code>fetch</code> <a class="header-anchor" href="#fetch">ğŸ”—</a></h1><p><code>fetch</code>å¯ä»¥çœ‹æˆ<code>XMLHttpRequest</code>çš„æ–°ç‰ˆæœ¬ï¼Œæœ¬è´¨ä¸Šè§£å†³çš„é—®é¢˜æ˜¯ä¸€æ ·çš„ï¼Œå°±æ˜¯ä½¿å¾—ç½‘é¡µèƒ½å¤Ÿé€šè¿‡jsæ¥å‘é€è¯·æ±‚å’Œå¤„ç†å“åº”</p><p>å¯ä»¥åœ¨æ§åˆ¶å°æ‰“å°ä¸‹ï¼Œå‘ç°å®ƒæ˜¯ä¸€ä¸ªå†…å»ºå‡½æ•°</p><p><img src="https://s1.ax1x.com/2020/10/02/0lCkBq.png" alt=""></p><p>é€šè¿‡æŸ¥çœ‹MDNï¼Œå‘ç°<code>fetch</code>å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°</p><ul><li><code>input</code> ä¸€ä¸ªè¯·æ±‚åœ°å€å­—ç¬¦ä¸²æˆ–è€…ä¸€ä¸ª<code>Request</code>å¯¹è±¡</li><li><code>config</code> ä¸€ä¸ªé…ç½®çš„å¯¹è±¡ï¼Œæˆ‘è§‰å¾—æ¯”è¾ƒå¸¸ç”¨çš„æ˜¯ä»¥ä¸‹<ul><li><code>method</code>: è¯·æ±‚ä½¿ç”¨çš„æ–¹æ³•</li><li><code>headers</code>: è¯·æ±‚çš„å¤´ä¿¡æ¯</li><li><code>body</code>: è¯·æ±‚çš„ body ä¿¡æ¯</li><li><code>credentials</code>: æ˜¯å¦æºå¸¦cookies</li></ul></li></ul><p>æ›´å¤šå‚æ•°å¯ä»¥ä¸ŠMDNæŸ¥çœ‹ï¼š<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/WindowOrWorkerGlobalScope/fetch" target="_blank" rel="noopener">WorkerOrGlobalScope.fetch()</a></p><p>å¹¶ä¸”<code>fetch</code>è¿”å›çš„æ˜¯ä¸€ä¸ª<code>Promise</code>ï¼Œè¿™ä¹Ÿæ˜¯ä»–å’ŒXHRçš„é‡è¦çš„åŒºåˆ«ä¹‹ä¸€ï¼Œ</p><p>åœ¨XHRä¸­ï¼Œä½¿ç”¨ç»‘å®šäº‹ä»¶çš„å›è°ƒå‡½æ•°æ¥è·å–æ•°æ®ï¼Œè€Œåœ¨<code>fetch</code>ä¸­ï¼Œä½¿ç”¨<code>Promise</code></p><p>okï¼Œå¯ä»¥æ¥è¯•ä¸‹è¿™ä¸ªAPIçš„ç®€å•ä½¿ç”¨äº†</p><p>ï¼ˆPSï¼šæœåŠ¡å™¨çš„è¯ä½¿ç”¨æˆ‘ä»¬ä¹‹å‰çš„å“ªä¸ªKoaçš„æœåŠ¡å™¨å³å¯ï¼‰</p><p>æœåŠ¡å™¨ç«¯</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">router</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">get</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#C98A7D;--s-light:#B56959">/hello</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> async</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> ctx</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  ctx</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">body</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> '</span><span style="--s-dark:#C98A7D;--s-light:#B56959">hello world!</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">});</span></span></code></pre><p>å®¢æˆ·ç«¯</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">// å› ä¸ºè¿™ä¸ªè®¿é—®çš„å°±æ˜¯åŒåŸŸä¸‹çš„helloçš„æ¥å£ï¼Œæ‰€ä»¥å¯ä»¥çœç•¥åœ°å€å‰ç¼€</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">fetch</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">/hello</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418">  method</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">get</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}).</span><span style="--s-dark:#80A665;--s-light:#59873A">then</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">res</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  console</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">log</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">res</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">});</span></span></code></pre><p><img src="https://s1.ax1x.com/2020/10/02/0lARnH.png" alt=""></p><p>å¯ä»¥çœ‹åˆ°è¿”å›äº†ä¸€ä¸ª<code>Response</code>å¯¹è±¡ï¼Œé‡Œé¢æœ‰äº›å­—æ®µä¹Ÿåœ¨XHRé‡Œé¢ä¹Ÿæœ‰</p><p>æ¯”å¦‚ï¼š<code>status</code>ï¼ˆçŠ¶æ€ç ï¼‰ã€<code>statusText</code>ï¼ˆçŠ¶æ€ç å¯¹åº”çš„è§£é‡Šæ–‡å­—ï¼‰</p><p>ä¸è¿‡æ²¡æœ‰çœ‹è§æ•°æ®ï¼Œåªçœ‹è§äº†ä¸€ä¸ª<code>body</code>çš„å±æ€§ï¼Œæˆ‘ä»¬ç‚¹å¼€å‘ç°ä¸æ˜¯ä¸€ä¸ªç®€å•çš„å¯¹è±¡ï¼Œè€Œæ˜¯ä¸€ä¸ª<code>ReadableStream</code>å¯¹è±¡</p><p><img src="https://s1.ax1x.com/2020/10/02/0lV8QU.png" alt=""></p><p>ä¸€ä¸ªå¯è¯»çš„æµï¼ŒåŸºæœ¬ä¸Šå¯ä»¥æ–­å®šæ•°æ®å°±åœ¨é‡Œé¢äº†ï¼Œå¦‚ä½•å–å‡ºå‘¢ï¼Ÿ</p><p>ç»è¿‡åœ¨MDNä¸Šçš„æŸ¥æ‰¾ï¼Œéœ€è¦é€šè¿‡<code>ReadableStream</code>å¯¹è±¡è·å–ä¸€ä¸ª<code>Reader</code>ï¼Œ</p><p>ç„¶åå†åœ¨è¿™ä¸ª<code>Reader</code>ä¸Šé¢è¯»å–æ•°æ®</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">fetch</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">/hello</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418">  method</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">get</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">})</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">then</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">res</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> res</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">body</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">getReader</span><span style="--s-dark:#666666;--s-light:#999999">())</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">then</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">reader</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  return</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> new</span><span style="--s-dark:#B8A965;--s-light:#998418"> Promise</span><span style="--s-dark:#666666;--s-light:#999999">((</span><span style="--s-dark:#BD976A;--s-light:#B07D48">resolve</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">    // å­˜æ”¾Unit8Arrayæ•°ç»„</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">    let</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> result</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#666666;--s-light:#999999"> [];</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">    reader</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">read</span><span style="--s-dark:#666666;--s-light:#999999">().</span><span style="--s-dark:#80A665;--s-light:#59873A">then</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#CB7676;--s-light:#AB5959">function</span><span style="--s-dark:#80A665;--s-light:#59873A"> next</span><span style="--s-dark:#666666;--s-light:#999999">({</span><span style="--s-dark:#BD976A;--s-light:#B07D48">value</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> done</span><span style="--s-dark:#666666;--s-light:#999999">})</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">      // å‡½æ•°ä¼šæ¥æ”¶ä¸€ä¸ªå¯¹è±¡ï¼Œdoneè¡¨ç¤ºä¼ è¾“æ˜¯å¦å®Œæˆï¼Œvalueè¡¨ç¤ºå€¼</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">      if</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">done</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">        // å®Œæˆäº†å°±è§£å†³è¿”å›çš„Promise</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">        // æ­¤æ—¶valueä¸ºundefined</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">        resolve</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">result</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">        return</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">      }</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">      // æ²¡å®Œæˆï¼Œè¿˜æœ‰æ•°æ®</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">      result</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">push</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">value</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">      // è¯»å–ä¸‹ä¸€ä¸ª</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">      reader</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">read</span><span style="--s-dark:#666666;--s-light:#999999">().</span><span style="--s-dark:#80A665;--s-light:#59873A">then</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">next</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">    });</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  });</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">})</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">then</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">result</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  console</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">log</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">result</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">});</span></span></code></pre><p>æ‰§è¡Œåå¯ä»¥çœ‹åˆ°å¦‚ä¸‹</p><p><img src="https://s1.ax1x.com/2020/10/02/0lK0fA.png" alt=""></p><p><code>Uint8Array</code>å­˜æ”¾çš„æ˜¯æ— ç¬¦å·çš„8ä½çš„æ•´å½¢æ•°ç»„ï¼Œæˆ‘ä»¬éœ€è¦æŠŠé‡Œé¢çš„æ•°æ®è½¬æˆå­—ç¬¦ä¸²ç„¶åæ‹¼æ¥èµ·æ¥</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">fetch</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">/hello</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418">  method</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">get</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">})</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">// çœç•¥ä¸­é—´çš„then</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">then</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">result</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  console</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">log</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">result</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  for</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#CB7676;--s-light:#AB5959">let</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> array</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> of</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> result</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">    // æŠŠæ¯ä¸€ä¸ª8ä½æ•´æ•°è½¬æˆå­—ç¬¦ä¸²å¹¶ä¸”æ‹¼æ¥èµ·æ¥</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">    let</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> str</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> String</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">fromCodePoint</span><span style="--s-dark:#666666;--s-light:#999999">(...</span><span style="--s-dark:#BD976A;--s-light:#B07D48">array</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">    console</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">log</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">str</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  }</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">});</span></span></code></pre><p>æ‰§è¡Œä¹‹åå°±å¯ä»¥çœ‹åˆ°<code>hello world!</code></p><p><img src="https://s1.ax1x.com/2020/10/02/0lrr5j.png" alt=""></p><p>å½“ç„¶è¿™ä¸ªè§£æå…¶å®æœ‰ç‚¹é—®é¢˜ï¼Œå› ä¸º<code>String.fromCodePoint</code>æŒ‰ç…§å­—ç¬¦å¯¹åº”çš„<code>unicode</code>ç¼–ç æ¥è¿›è¡Œè§£æçš„</p><p>è¿™å¯¹äº<code>0 - 127</code>çš„<code>ASCII</code>ç æ²¡æœ‰å½±å“ï¼Œå› ä¸º<code>UTF-8</code>å¯¹<code>0 - 127</code>çš„ç¼–ç å’Œ<code>unicode</code>ç å®Œå…¨ä¸€æ ·</p><p>ä½†æ˜¯å¯¹äºæ¯”å¦‚è¯´ä¸­æ–‡ï¼Œæˆ–è€…emojiè¡¨æƒ…å°±ä¸æ˜¯è¿™æ ·äº†,<code>UTF-8</code>æ”¯æŒå˜é•¿ç¼–ç ï¼Œé€šè¿‡å‰ç¼€åŒºåˆ†ï¼Œæ­¤æ—¶ç¼–ç å’ŒUTF-8è¡¨ç¤ºçš„äºŒè¿›åˆ¶å°±å®Œå…¨ä¸ä¸€æ ·äº†</p><p>æ¯”å¦‚è¿™ä¸ªç¬‘å“­çš„emojiè¡¨æƒ… -&gt; ğŸ˜‚ ï¼Œä»–çš„<code>unicode</code>ç¼–ç æ˜¯<code>11111011000000010</code>ï¼ˆ2è¿›åˆ¶ï¼‰ï¼Œè½¬ä¸º16è¿›åˆ¶ä¸º<code>1f602</code>ï¼Œ</p><p>ä½†æ˜¯å®ƒåœ¨UTF-8ä¸­çš„2è¿›åˆ¶ç¼–ç ä¸º<code>11110000 10011111 10011000 10000010</code>ï¼Œå’Œå®ƒçš„<code>unicode</code>ç¼–ç ä¸ä¸€æ ·</p><p>å¦‚æœç›´æ¥è§£æï¼Œé‚£ä¹ˆä¼šå‡ºç°ä¹±ç ï¼Œå¦‚ä¸‹å›¾</p><p>æœåŠ¡å™¨ä»£ç </p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">router</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">get</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#C98A7D;--s-light:#B56959">/hello</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> async</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> ctx</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  ctx</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">body</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> '</span><span style="--s-dark:#C98A7D;--s-light:#B56959">hello world!ğŸ˜‚</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">});</span></span></code></pre><p>ä¹±ç ç°è±¡</p><p><img src="https://s1.ax1x.com/2020/10/02/0lqahn.png" alt=""></p><p>å¯ä»¥çœ‹åˆ°uint8Arrayæ•°ç»„æœ€åå››ä¸ª10è¿›åˆ¶æ•°å­—åˆ†åˆ«å¯¹åº”äº†ä¸Šé¢å†™åˆ°çš„<code>ğŸ˜‚</code>è¿™ä¸ªè¡¨æƒ…çš„<code>UTF-8</code>çš„2è¿›åˆ¶ç¼–ç </p><p>è§£å†³åŠæ³•å…¶å®ä¸éš¾ï¼Œå°±æ˜¯æŠŠ<code>UTF-8</code>ç¼–ç çš„è½¬ä¸º<code>unicode</code>ç ç‚¹å³å¯</p><p><code>UTF-8</code>ä½¿ç”¨äº†å˜é•¿çš„ç¼–ç æŠ€æœ¯ï¼Œé€šè¿‡å‰ç¼€1çš„ä¸ªæ•°æ¥åˆ¤æ–­å­—ç¬¦å å‡ ä¸ªå­—èŠ‚</p><table><thead><tr><th>Unicodeç¼–ç (åå…­è¿›åˆ¶)</th><th>UTF-8 å­—èŠ‚æµ(äºŒè¿›åˆ¶)</th></tr></thead><tbody><tr><td>000000-00007F</td><td>0xxxxxxx</td></tr><tr><td>000080-0007FF</td><td>110xxxxx 10xxxxxx</td></tr><tr><td>000800-00FFFF</td><td>1110xxxx 10xxxxxx 10xxxxxx</td></tr><tr><td>010000-10FFFF</td><td>11110xxx 10xxxxxx 10xxxxxx 10xxxxxx</td></tr></tbody></table><p>é‚£ä¹ˆæ ¹æ®è¿™ä¸ªè¡¨è¿›è¡Œè§£æå°±OKäº†ï¼Œä»£ç å¦‚ä¸‹</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">function</span><span style="--s-dark:#80A665;--s-light:#59873A"> utf8ToUnicode</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">utf8Array</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">  let</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> str</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> ""</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">  let</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> n1</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> n2</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> n3</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">  let</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> i</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 0</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  while</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">i</span><span style="--s-dark:#666666;--s-light:#999999"> &lt;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> utf8Array</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">byteLength</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">    let</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> cur</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> utf8Array</span><span style="--s-dark:#666666;--s-light:#999999">[</span><span style="--s-dark:#BD976A;--s-light:#B07D48">i</span><span style="--s-dark:#666666;--s-light:#999999">];</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">    i</span><span style="--s-dark:#CB7676;--s-light:#AB5959">++</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">    switch</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">cur</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> &gt;&gt;</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 4</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">      case</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 0</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#4D9375;--s-light:#1E754F">case</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 1</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#4D9375;--s-light:#1E754F">case</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 2</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#4D9375;--s-light:#1E754F">case</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 3</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#4D9375;--s-light:#1E754F">case</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 4</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#4D9375;--s-light:#1E754F">case</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 5</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#4D9375;--s-light:#1E754F">case</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 6</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#4D9375;--s-light:#1E754F">case</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 7</span><span style="--s-dark:#666666;--s-light:#999999">:</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">        // ä¸€ä¸ªå­—èŠ‚ç›´æ¥æ›¿æ¢</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">        // 0xxxxxxx ä¹Ÿå°±æ˜¯ 0001 - 0111</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">        str</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> +=</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> String</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">fromCodePoint</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">cur</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">        break</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">      case</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 12</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#4D9375;--s-light:#1E754F">case</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 13</span><span style="--s-dark:#666666;--s-light:#999999">:</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">        // ä¸¤ä¸ªå­—èŠ‚</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">        // 110xxxxx ä¹Ÿå°±æ˜¯ 1100 - 1101</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">        n1</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> utf8Array</span><span style="--s-dark:#666666;--s-light:#999999">[</span><span style="--s-dark:#BD976A;--s-light:#B07D48">i</span><span style="--s-dark:#CB7676;--s-light:#AB5959">++</span><span style="--s-dark:#666666;--s-light:#999999">];</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">        str</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> +=</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> String</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">fromCodePoint</span><span style="--s-dark:#666666;--s-light:#999999">(((</span><span style="--s-dark:#BD976A;--s-light:#B07D48">cur</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> &amp;</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 0b11111</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> &lt;&lt;</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 6</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> |</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">n1</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> &amp;</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 0b111111</span><span style="--s-dark:#666666;--s-light:#999999">));</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">        break</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">      case</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 14</span><span style="--s-dark:#666666;--s-light:#999999">:</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">        // ä¸‰ä¸ªå­—èŠ‚</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">        // 1110xxxx ä¹Ÿå°±æ˜¯ 1110</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">        n1</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> utf8Array</span><span style="--s-dark:#666666;--s-light:#999999">[</span><span style="--s-dark:#BD976A;--s-light:#B07D48">i</span><span style="--s-dark:#CB7676;--s-light:#AB5959">++</span><span style="--s-dark:#666666;--s-light:#999999">];</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">        n2</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> utf8Array</span><span style="--s-dark:#666666;--s-light:#999999">[</span><span style="--s-dark:#BD976A;--s-light:#B07D48">i</span><span style="--s-dark:#CB7676;--s-light:#AB5959">++</span><span style="--s-dark:#666666;--s-light:#999999">];</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">        str</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> +=</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> String</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">fromCodePoint</span><span style="--s-dark:#666666;--s-light:#999999">(</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">          (</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">            ((</span><span style="--s-dark:#BD976A;--s-light:#B07D48">cur</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> &amp;</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 0b1111</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> &lt;&lt;</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 12</span><span style="--s-dark:#666666;--s-light:#999999">)</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">            |</span><span style="--s-dark:#666666;--s-light:#999999"> ((</span><span style="--s-dark:#BD976A;--s-light:#B07D48">n1</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> &amp;</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 0b111111</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> &lt;&lt;</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 6</span><span style="--s-dark:#666666;--s-light:#999999">)</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">            |</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">n2</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> &amp;</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 0b111111</span><span style="--s-dark:#666666;--s-light:#999999">)</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">          )</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">        );</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">        break</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">      case</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 15</span><span style="--s-dark:#666666;--s-light:#999999">:</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">        // ä¸‰ä¸ªå­—èŠ‚</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">        // 11110xxx ä¹Ÿå°±æ˜¯ 1111</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">        n1</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> utf8Array</span><span style="--s-dark:#666666;--s-light:#999999">[</span><span style="--s-dark:#BD976A;--s-light:#B07D48">i</span><span style="--s-dark:#CB7676;--s-light:#AB5959">++</span><span style="--s-dark:#666666;--s-light:#999999">];</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">        n2</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> utf8Array</span><span style="--s-dark:#666666;--s-light:#999999">[</span><span style="--s-dark:#BD976A;--s-light:#B07D48">i</span><span style="--s-dark:#CB7676;--s-light:#AB5959">++</span><span style="--s-dark:#666666;--s-light:#999999">];</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">        n3</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> utf8Array</span><span style="--s-dark:#666666;--s-light:#999999">[</span><span style="--s-dark:#BD976A;--s-light:#B07D48">i</span><span style="--s-dark:#CB7676;--s-light:#AB5959">++</span><span style="--s-dark:#666666;--s-light:#999999">];</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">        str</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> +=</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> String</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">fromCodePoint</span><span style="--s-dark:#666666;--s-light:#999999">(</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">          (</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">            ((</span><span style="--s-dark:#BD976A;--s-light:#B07D48">cur</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> &amp;</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 0b111</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> &lt;&lt;</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 18</span><span style="--s-dark:#666666;--s-light:#999999">)</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">            |</span><span style="--s-dark:#666666;--s-light:#999999"> ((</span><span style="--s-dark:#BD976A;--s-light:#B07D48">n1</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> &amp;</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 0b111111</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> &lt;&lt;</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 12</span><span style="--s-dark:#666666;--s-light:#999999">)</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">            |</span><span style="--s-dark:#666666;--s-light:#999999"> ((</span><span style="--s-dark:#BD976A;--s-light:#B07D48">n2</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> &amp;</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 0b111111</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> &lt;&lt;</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 6</span><span style="--s-dark:#666666;--s-light:#999999">)</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">            |</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">n3</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> &amp;</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 0b111111</span><span style="--s-dark:#666666;--s-light:#999999">)</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">          )</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">        );</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">        break</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">    }</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  }</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  return</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> str</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span></code></pre><p>ç„¶åæˆ‘ä»¬å¯ä»¥å°è¯•å¯¹ğŸ˜‚è¯•ä¸€è¯•ï¼Œç»“æœå¦‚ä¸‹</p><p><img src="https://s1.ax1x.com/2020/10/02/01CBmn.png" alt=""></p><p>æ­£ç¡®åœ°è§£æäº†å‡ºæ¥</p><p>å½“ç„¶ï¼Œè‡ªå¸¦çš„æ–¹æ³•ä¸­å·²ç»å¾ˆè´´å¿ƒåœ°ä¸ºæˆ‘ä»¬è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œé€šè¿‡è°ƒç”¨<code>text</code>æ–¹æ³•å³å¯ï¼ˆè¿˜æ˜¯è¦æ‡‚åŸç†çš„ï¼Œè¿™ä¸ªæ‰æ˜¯é‡ç‚¹ï¼‰</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">// const req = ...</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">fetch</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">req</span><span style="--s-dark:#666666;--s-light:#999999">)</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  .</span><span style="--s-dark:#80A665;--s-light:#59873A">then</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">res</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> res</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">text</span><span style="--s-dark:#666666;--s-light:#999999">())</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  .</span><span style="--s-dark:#80A665;--s-light:#59873A">then</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">str</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> console</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">log</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">str</span><span style="--s-dark:#666666;--s-light:#999999">));</span></span></code></pre><p>è¡¨æƒ…å¯ä»¥æ­£å¸¸åœ°æ˜¾ç¤ºäº†ï¼Œä¹Ÿå°±æ˜¯æ­£å¸¸åœ°è§£æå‡ºæ¥äº†</p><p><img src="https://s1.ax1x.com/2020/10/02/0lLE3q.png" alt=""></p><h1 id="requestå’Œresponse" tabindex="-1"><code>Request</code>å’Œ<code>Response</code> <a class="header-anchor" href="#requestå’Œresponse">ğŸ”—</a></h1><p>è¿™ä¸¤è€…æ˜¯<code>fetch</code>ä¸­ç»å¸¸ä¼šçœ‹åˆ°çš„å¯¹è±¡</p><h2 id="request" tabindex="-1"><code>Request</code> <a class="header-anchor" href="#request">ğŸ”—</a></h2><p><code>fetch</code>çš„ç¬¬ä¸€ä¸ªå‚æ•°å¯ä»¥ä¼ å…¥ä¸€ä¸ª<code>Request</code>å¯¹è±¡</p><p><code>Request</code>æ„é€ å‡½æ•°çš„å‚æ•°å’Œ<code>fetch</code>åŸºæœ¬ä¸€æ ·</p><p>ä¹Ÿå°±æ˜¯ä¸Šé¢çš„ä»£ç å¯ä»¥æ”¹å†™æˆ</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> req</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> new</span><span style="--s-dark:#80A665;--s-light:#59873A"> Request</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#C98A7D;--s-light:#B56959">/hello</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#666666;--s-light:#999999">,{</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  // è¿™é‡Œçš„å‚æ•°å’Œfetchç¬¬äºŒä¸ªå‚æ•°ä¸€æ ·</span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418">  method</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">get</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">});</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">fetch</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">req</span><span style="--s-dark:#666666;--s-light:#999999">)</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">// .then... çœç•¥åé¢çš„thené“¾</span></span></code></pre><p>è¿è¡Œä¹‹åèƒ½å¤Ÿå¾—åˆ°å’Œä¸Šé¢ä¸€æ ·çš„ç»“æœ</p><p>æ—¢ç„¶å¯ä»¥ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±è¦çœ‹çœ‹åˆ°åº•æ˜¯è°ä¼˜å…ˆçº§æ›´é«˜äº†ï¼ˆåˆ¨æ ¹é—®åº•ğŸ˜‚ï¼‰</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> req</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> new</span><span style="--s-dark:#80A665;--s-light:#59873A"> Request</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#C98A7D;--s-light:#B56959">/hello</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#666666;--s-light:#999999">,{</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  // è¿™é‡Œçš„å‚æ•°å’Œfetchç¬¬äºŒä¸ªå‚æ•°ä¸€æ ·</span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418">  method</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">get</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">});</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">fetch</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">req</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418">  method</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">post</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">});</span></span></code></pre><p><img src="https://s1.ax1x.com/2020/10/02/01PqU0.png" alt=""></p><p>å‘ç°å‘å‡ºçš„æ˜¯<code>POST</code>è¯·æ±‚ï¼Œä¹Ÿå°±æ˜¯è¯´<code>fetch</code>å‚æ•°çš„ä¼˜å…ˆçº§æ¯”<code>Request</code>å¯¹è±¡å‚æ•°çš„ä¼˜å…ˆçº§é«˜ï¼ˆç”±äºæ¥å£æ˜¯<code>GET</code>çš„ï¼Œæ‰€ä»¥è¿™é‡ŒæŠ¥é”™ï¼‰</p><p>ä¸€ä¸ªå¯èƒ½è¿˜ä¸å¤Ÿè¯æ˜ï¼Œæˆ‘ä»¬è¯•è¯•è®¾ç½®ä¸€äº›è‡ªå®šä¹‰çš„è¯·æ±‚å¤´</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> req</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> new</span><span style="--s-dark:#80A665;--s-light:#59873A"> Request</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#C98A7D;--s-light:#B56959">/hello</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#666666;--s-light:#999999">,{</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  // è¿™é‡Œçš„å‚æ•°å’Œfetchç¬¬äºŒä¸ªå‚æ•°ä¸€æ ·</span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418">  method</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">get</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">,</span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418">  headers</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#C98A7D77;--s-light:#B5695977">    "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">my-header</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">www.elegy.top</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  }</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">});</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">fetch</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">req</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418">  method</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">post</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">,</span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418">  headers</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#C98A7D77;--s-light:#B5695977">    "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">my-header</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">www.koi-no-uta.design</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  }</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">});</span></span></code></pre><p><img src="https://s1.ax1x.com/2020/10/02/01iiUx.png" alt=""></p><p>å‘ç°ä¾ç„¶<code>fetch</code>å‚æ•°çš„ä¼˜å…ˆçº§æ¯”<code>Request</code>å¯¹è±¡å‚æ•°çš„ä¼˜å…ˆçº§é«˜</p><h2 id="response" tabindex="-1"><code>Response</code> <a class="header-anchor" href="#response">ğŸ”—</a></h2><p><code>fetch</code>è¿”å›çš„<code>Promise</code>çš„è§£å†³ç»“æœå¯¹è±¡</p><p>é™¤äº†å‰é¢è¯´è¿‡çš„<code>text</code>æ–¹æ³•ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–çš„æ–¹æ³•æ–¹ä¾¿å¼€å‘è€…è¿›è¡Œæ•°æ®åœ°è½¬æ¢</p><ul><li><code>json</code> æŠŠæ•°æ®æµè½¬æ¢æˆ<code>json</code>æ ¼å¼ï¼Œç”±äºjså¤©ç”Ÿæ”¯æŒ<code>json</code>æ ¼å¼çš„å¯¹è±¡ï¼Œæ‰€ä»¥å¾ˆå¤šæ—¶å€™éƒ½æ˜¯ä½¿ç”¨è¿™ä¸ªåŠæ³•</li><li><code>formData</code> æŠŠæ•°æ®è½¬æ¢æˆ<code>FormData</code>ç±»å‹</li><li><code>blob</code> æŠŠæ•°æ®æµè½¬æˆ<code>Blob</code>ç±»å‹</li><li><code>arrayBuffer</code> æŠŠæ•°æ®æµè½¬æˆ<code>ArrayBuffer</code>ç±»å‹</li></ul><p>ä¸€èˆ¬ç”¨åˆ°<code>json</code>æ–¹æ³•ä¼šæ¯”è¾ƒå¤šï¼Œæˆ‘ä»¬å¯ä»¥è¯•ä¸€ä¸‹</p><p>æœåŠ¡å™¨ä»£ç </p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">router</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">get</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">/hello</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> async</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> ctx</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  ctx</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">body</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418">    name</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">lwf</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">,</span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418">    age</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 12</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  };</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">});</span></span></code></pre><p>å®¢æˆ·ç«¯ä»£ç </p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> req</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> new</span><span style="--s-dark:#80A665;--s-light:#59873A"> Request</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">/hello</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418">  method</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">get</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">});</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">fetch</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">req</span><span style="--s-dark:#666666;--s-light:#999999">)</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  .</span><span style="--s-dark:#80A665;--s-light:#59873A">then</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">res</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> res</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">json</span><span style="--s-dark:#666666;--s-light:#999999">())</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  .</span><span style="--s-dark:#80A665;--s-light:#59873A">then</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">res</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> console</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">log</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">res</span><span style="--s-dark:#666666;--s-light:#999999">));</span></span></code></pre><p>æ•ˆæœå›¾</p><p><img src="https://s1.ax1x.com/2020/10/03/03EgRP.png" alt=""></p><p>å½“ç„¶ï¼Œä½¿ç”¨<code>blob</code>æ–¹æ³•ä¹Ÿèƒ½å¾—åˆ°ç›¸åŒçš„ç»“æœ</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> req</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> new</span><span style="--s-dark:#80A665;--s-light:#59873A"> Request</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">/hello</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418">  method</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">get</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">});</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">fetch</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">req</span><span style="--s-dark:#666666;--s-light:#999999">)</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  .</span><span style="--s-dark:#80A665;--s-light:#59873A">then</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">res</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> res</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">blob</span><span style="--s-dark:#666666;--s-light:#999999">())</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  .</span><span style="--s-dark:#80A665;--s-light:#59873A">then</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">blob</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">    console</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">log</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#C98A7D;--s-light:#B56959">æˆ‘æ˜¯è°ƒç”¨çš„blobæ–¹æ³•</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#666666;--s-light:#999999">)</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">    return</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> blob</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">text</span><span style="--s-dark:#666666;--s-light:#999999">();</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  })</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  .</span><span style="--s-dark:#80A665;--s-light:#59873A">then</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">str</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> console</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">log</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">JSON</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">parse</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">str</span><span style="--s-dark:#666666;--s-light:#999999">)));</span></span></code></pre><p>æ•ˆæœå›¾</p><p><img src="https://s1.ax1x.com/2020/10/03/03Z90g.png" alt=""></p><p>è¿™ä¹ˆåšæ˜¾ç„¶æ²¡å¿…è¦ï¼Œæ‰€ä»¥ä½¿ç”¨<code>json</code>æ–¹æ³•ç›´æ¥è½¬æ¢å³å¯ï¼Œ<code>blob</code>æ–¹æ³•æ¯”å¦‚åœ¨ä¸‹è½½ï¼Œæ’­æ”¾åª’ä½“è¿™äº›æ¯”è¾ƒå¸¸ç”¨</p><p>åƒBç«™ä½¿ç”¨çš„å°±æ˜¯<code>blob</code>çš„è§†é¢‘æµ</p><p><img src="https://s1.ax1x.com/2020/10/03/03ZB4A.png" alt=""></p><p>ä½¿ç”¨<code>URL.createObjectURL(blob)</code>å°±å¯ä»¥ä½¿å¾—blobå¯¹è±¡ä»¥ä¸€ç§<code>url</code>çš„å½¢å¼å±•ç¤ºå‡ºæ¥ï¼Œå°±å¯ä»¥åœ¨æ–‡æ¡£ä¸Šé€šè¿‡<code>src</code>æ¥å¼•ç”¨äº†</p><h1 id="headers" tabindex="-1">Headers <a class="header-anchor" href="#headers">ğŸ”—</a></h1><p><code>fetch</code>ä¹Ÿæ”¯æŒä»¥ä¸€ä¸ª<code>Headers</code>å¯¹è±¡æ¥è®¾ç½®è¯·æ±‚å¤´</p><p>å¸¸è§çš„æ–¹æ³•æœ‰</p><ul><li><code>append</code> æ·»åŠ ä¸€ä¸ªè¯·æ±‚å¤´</li><li><code>delete</code> åˆ é™¤ä¸€ä¸ªè¯·æ±‚å¤´</li><li><code>entries</code> è¿”å›æ‰€æœ‰è¯·æ±‚å¤´çš„è¿­ä»£å™¨å¯¹è±¡</li><li><code>get</code> è·å–æŸä¸ªè¯·æ±‚å¤´çš„å€¼</li><li><code>has</code> åˆ¤æ–­æ˜¯å¦å«æœ‰æŸä¸ªè¯·æ±‚å¤´</li></ul><p>å¯ä»¥æ”¹ä¸‹ä¹‹å‰çš„ä¾‹å­</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">// ä½¿ç”¨Headerså¯¹è±¡</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> headers</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> new</span><span style="--s-dark:#80A665;--s-light:#59873A"> Headers</span><span style="--s-dark:#666666;--s-light:#999999">();</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">headers</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">append</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">x-my-header1</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">lwf</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">headers</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">append</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">x-my-header2</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">12</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">// ä½¿ç”¨Requestå¯¹è±¡</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> req</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> new</span><span style="--s-dark:#80A665;--s-light:#59873A"> Request</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">/hello</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418">  method</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">get</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">,</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  headers</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">});</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">fetch</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">req</span><span style="--s-dark:#666666;--s-light:#999999">)</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  .</span><span style="--s-dark:#80A665;--s-light:#59873A">then</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">res</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> res</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">json</span><span style="--s-dark:#666666;--s-light:#999999">)</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  .</span><span style="--s-dark:#80A665;--s-light:#59873A">then</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">str</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> console</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">log</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">str</span><span style="--s-dark:#666666;--s-light:#999999">));</span></span></code></pre><p>å¯ä»¥çœ‹è§è¯·æ±‚å¤´éƒ½æ­£ç¡®åœ°æ·»åŠ åˆ°è¯·æ±‚ä¸Šé¢äº†</p><p><img src="https://s1.ax1x.com/2020/10/03/03KmTS.png" alt=""></p><p>ç„¶åè¯•è¯•åœ¨æ§åˆ¶å°ä¸Šæ“ä½œä¸€ä¸ª<code>header</code>çš„å…¶ä»–æ–¹æ³•</p><p><img src="https://s1.ax1x.com/2020/10/03/03K0p9.png" alt=""></p><h1 id="åè®°" tabindex="-1">åè®° <a class="header-anchor" href="#åè®°">ğŸ”—</a></h1><p><code>fetch</code>çš„å…¼å®¹æ€§è¿˜æ˜¯ç›¸å½“ä¸é”™çš„ï¼ˆé™¤äº†IEï¼ŒIEå…¨ç‰ˆæœ¬ä¸æ”¯æŒï¼ŒğŸ˜‚ï¼‰</p><p><img src="https://s1.ax1x.com/2020/10/03/03KqAS.png" alt=""></p><p>è™½ç„¶å…¼å®¹æ€§ä¸é”™ï¼Œä½†æ˜¯åŸºæœ¬ä¸Šä¼šä½¿ç”¨ä¸€äº›ä¸Šå±‚çš„åº“äºŒæ¬¡åœ°å°è£…ï¼Œæ¯”å¦‚<code>axios</code>ï¼ˆåŸºäº<code>XMLHttpRequest</code>ï¼‰</p><p>æ‰€ä»¥å¾ˆå¤šæ—¶å€™ç”¨ä¸åˆ°â€¦</p><p>ä¸è¿‡å­¦è¿˜æ˜¯è¦å­¦çš„å˜›</p></div><!--]--></div><div flex="~ wrap" text="[var(--mygo-c-text-2)]" mt-8="" gap-4="" justify-center=""><!--[--><div>#å‰ç«¯</div><!--]--></div><!--]--></div></div><div class="mujika-card mujika-card--hover mujika-card--border" w-full="" overflow-auto="" data-v-7ac4adc5=""><div class="p-4 lg:p-8" data-v-7ac4adc5=""><!--[--><div flex=""><a href="/349091160e40" class=""><i class="i-mi:chevron-left" mr-1=""></i><span>HTTP1.1çŠ¶æ€ç ï¼ˆè¯‘ï¼‰</span></a><a href="/dcde156bb7d3" class="" ml-auto=""><span>XMLHttpRequestå¯¹è±¡çš„ç®€å•ä½¿ç”¨</span><i class="i-mi:chevron-right" ml-1=""></i></a></div><!--]--></div></div><!--[--><div class="mujika-card mujika-card--hover mujika-card--border" w-full="" overflow-auto="" data-v-93b0ae89="" data-v-7ac4adc5=""><div class="p-4 lg:p-8" data-v-7ac4adc5=""><!--[--><div flex="" gap-4="" items-start="" data-v-93b0ae89=""><div flex="~ shrink-0" bg="[var(--mygo-c-bg-alt)]" rounded-6px="" w-60px="" aspect-ratio-square="" items-center="" justify-center="" data-v-93b0ae89=""><i text-40px="" text="[#999]" class="i-fa6-regular:user" data-v-93b0ae89=""></i></div><div flex="~ col grow" gap-4="" data-v-93b0ae89=""><textarea disabled="" placeholder="ä¸‡æ°´åƒå±±æ€»æ˜¯æƒ…ï¼Œç•™ä¸‹è¯„è®ºè¡Œä¸è¡Œ" class="mujika-git-talk-textarea" un-disabled:cursor-not-allowed="" p-2="" outline-0="" lg:p-4="" data-v-93b0ae89=""></textarea><div flex="" items-start="" justify-between="" data-v-93b0ae89=""><a target="_blank" href="https://guides.github.com/features/mastering-markdown/" data-v-93b0ae89="">æ”¯æŒ Markdown è¯­æ³• </a><button class="mujika-git-talk-button" cursor-pointer="" data-v-93b0ae89="">ç‚¹å‡»ç™»å½•</button></div></div></div><!--]--></div></div><!----><!--]--></div><aside class="mujika-aside" w="280px" flex="~ col shrink-0" top-2="" sticky="" max-h="[calc(100vh-var(--spacing)*4)]" un-hidden="" lg:block=""><div class="mujika-card mujika-card--hover mujika-card--border" w-full="" overflow-auto="" flex="~ col" gap-4="" data-v-7ac4adc5=""><!--[--><div p="4 b-0" flex-shrink-0="">æ–‡ç« ç›®å½•</div><div p="4 t-0" flex-grow="" min-h-0="" overflow-y-auto=""><!----></div><!--]--></div></aside><!--teleport start--><!--teleport end--></div></main><footer class="mujika-footer" px-4="" py-6="" bg="[var(--mygo-c-bg)]" flex="~ col shrink-0" gap-2="" items-center="" data-v-d1d7a153=""><div flex="" items-center="" data-v-d1d7a153=""><span data-v-d1d7a153="">Power by&nbsp;</span><i class="i-logos:vue" data-v-d1d7a153=""></i><span data-v-d1d7a153="">&nbsp;+&nbsp;</span><i class="i-logos:vitejs" data-v-d1d7a153=""></i></div><div text-center="" data-v-d1d7a153=""><a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" data-v-d1d7a153="">CC BY-NC-SA 4.0 </a>2021 - PRESENT Â© Dedicatus545</div><div text="[var(--mygo-c-text-2)]" text-center="" data-v-d1d7a153="">å¦‚æœæˆ‘å’Œç‹—ä¸€æ ·æœ‰å°¾å·´çš„è¯ï¼Œä¸€å®šä¼šè—ä¸ä½è¿™ä»½å–œæ‚¦ï¼Œè€Œå°¾å·´ä¸€ç›´æ‘‡ä¸ªä¸åœå§ã€‚</div></footer></div></div></body></html>