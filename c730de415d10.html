<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><link rel="icon" type="image/svg+xml" href="/logo.svg"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Underscore.jsæºç å­¦ä¹ </title><script type="importmap">{"imports":{"vue":"https://esm.sh/vue","vue-router":"https://esm.sh/vue-router","pinia":"https://esm.sh/pinia","@vueuse/core":"https://esm.sh/@vueuse/core","@vueuse/components":"https://esm.sh/@vueuse/components","@vueuse/router":"https://esm.sh/@vueuse/router","date-fns":"https://esm.sh/date-fns","nprogress":"https://esm.sh/nprogress","octokit":"https://esm.sh/octokit","pinia-plugin-persistedstate":"https://esm.sh/pinia-plugin-persistedstate","vue-router-better-scroller":"https://esm.sh/vue-router-better-scroller"}}</script><script type="module" async="" crossorigin="" src="/assets/app-C4XuqRXg.js"></script><link rel="stylesheet" crossorigin="" href="/assets/app-DgCMeXmb.css"><link rel="modulepreload" crossorigin="" href="/assets/Underscore-jsæºç å­¦ä¹ -o9c9idoR.js"><meta property="og:title" content="Underscore.jsæºç å­¦ä¹ "><meta name="twitter:title" content="Underscore.jsæºç å­¦ä¹ "></head><body><div id="app" data-server-rendered="true"><div class="mujika" min-h="100vh" flex="~ col" bg="[--mygo-c-bg-alt]"><header class="mujika-header" flex="~ shrink-0" px-4="" h="70px" bg="[var(--mygo-c-bg)]" items-center="" justify-between="" data-v-c1947e25=""><a href="/" class="" flex="" gap-4="" items-center="" data-v-c1947e25=""><img w="40px" aspect-ratio-square="" src="/logo.svg" alt="æ‹ã®æ­Œçš„logo" data-v-c1947e25=""></a><div data-v-c1947e25=""><div p-1="" flex="" gap-1="" rounded="6px" bg="[var(--mygo-c-bg-alt)]" data-v-c1947e25=""><!--[--><div leading="[1]" px-2="" py-1="" cursor-pointer="" rounded="6px" class="bg-[var(--mygo-c-bg)]" title="è‡ªåŠ¨" data-v-c1947e25=""><!--[-->Auto<!--]--></div><div leading="[1]" px-2="" py-1="" cursor-pointer="" rounded="6px" class="" title="æ—¥é—´" data-v-c1947e25=""><!--[--><i class="i-ri:sun-line" data-v-c1947e25=""></i><!--]--></div><div leading="[1]" px-2="" py-1="" cursor-pointer="" rounded="6px" class="" title="å¤œé—´" data-v-c1947e25=""><!--[--><i class="i-ri:moon-line" data-v-c1947e25=""></i><!--]--></div><!--]--></div></div></header><main class="mujika-home" flex="grow" mx="auto" min-h="0" p-2="" w-full="" un-2xl:w="[calc(96rem-var(--spacing)*2)]"><div flex="" gap-2="" items-start=""><div flex="~ col grow" gap-2="" min-w-0=""><div class="mujika-card mujika-card--hover mujika-card--border" w-full="" overflow-auto="" data-v-7ac4adc5=""><div class="p-4 lg:p-8" data-v-7ac4adc5=""><!--[--><div flex="~ col" mb-4="" gap-4=""><h1 break-all="" text="34px center">Underscore.jsæºç å­¦ä¹ </h1></div><div flex="~ col" gap-3="" text="[var(--mygo-c-text-2)]"><div flex="~ wrap" gap-3="" justify-center=""><!----><div flex="" gap-1="" items-center=""><i class="i-fa6-regular:calendar"></i><span un-hidden="" lg:inline="">å‘è¡¨äº</span><span pl-1="">2020-06-12 12:13</span></div><div flex="" gap-1="" items-center=""><i class="i-fa6-regular:calendar-check"></i><span un-hidden="" lg:inline="">æ›´æ–°äº</span><span pl-1="">2023-02-13 18:28</span></div><div flex="" gap-1="" items-center=""><i class="i-fa6-regular:folder"></i><span un-hidden="" lg:inline="">åˆ†ç±»äº</span><!--[--><a pl-1="" href="/category/ç¼–ç¨‹">ç¼–ç¨‹</a><!--]--></div></div><div flex="~ wrap" gap-3="" justify-center=""><div flex="" gap-1="" items-center=""><i class="i-fa6-regular:file-word"></i><span un-hidden="" lg:inline="">æ€»å­—æ•°</span><span pl-1="">3.4K</span></div><div flex="" gap-1="" items-center=""><i class="i-fa6-regular:clock"></i><span un-hidden="" lg:inline="">é˜…è¯»æ—¶é•¿ â‰ˆ</span><span pl-1="">13 åˆ†é’Ÿ</span></div></div></div><div class="mujika-doc-content"><!--[--><div class="kan-doc"><h1 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€">ğŸ”—</a></h1><p>Vueçš„æºç çœ‹çš„å¤´å¤§â€¦</p><p>å…ˆçœ‹çœ‹Underscoreçš„å§â€¦</p><p>è¿™ä¸ªè¿˜çœ‹å¾—æ‡‚ã€‚</p><h1 id="underscore-js" tabindex="-1">Underscore.js <a class="header-anchor" href="#underscore-js">ğŸ”—</a></h1><blockquote><p>Underscore.js is a utility-belt library for JavaScript that provides support for the usual functional suspects (each, map, reduce, filterâ€¦) without extending any core JavaScript objects.</p></blockquote><p>ä¸€ä¸ªæä¾›å¸¸ç”¨å‡½æ•°ï¼Œæ¯”å¦‚<code>forEach</code>ï¼Œ<code>map</code>ï¼Œ<code>filter</code>ç­‰ï¼Œæ”¯æŒä½ç‰ˆæœ¬çš„æµè§ˆå™¨</p><blockquote><p>githubåœ°å€ <a href="https://github.com/jashkenas/underscore" target="_blank" rel="noopener">underscore.js</a></p></blockquote><p>è¿™æ¬¡æ¥å­¦å­¦ä¸€äº›å…³äºæ•°ç»„çš„å‡½æ•°</p><h2 id="foreach" tabindex="-1"><code>forEach</code> <a class="header-anchor" href="#foreach">ğŸ”—</a></h2><p>å†…ç½®çš„<code>forEach</code>çš„è¯­æ³•</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#666666;--s-light:#999999">[].</span><span style="--s-dark:#80A665;--s-light:#59873A">forEach</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#CB7676;--s-light:#AB5959">function</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">v</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> i</span><span style="--s-dark:#666666;--s-light:#999999"> ,</span><span style="--s-dark:#BD976A;--s-light:#B07D48">a</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  // å‡½æ•°å†…å®¹</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">},</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> window</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0">/*æŒ‡å®šå‡½æ•°è¿è¡Œçš„ä¸Šä¸‹æ–‡*/</span><span style="--s-dark:#666666;--s-light:#999999">)</span></span></code></pre><p>åœ¨Underscoreä¸­ä¸º</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">_</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">forEach</span><span style="--s-dark:#666666;--s-light:#999999">([],</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> function</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">v</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> i</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> a</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  // å‡½æ•°å†…å®¹</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">},</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> window</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0">/*æŒ‡å®šå‡½æ•°è¿è¡Œçš„ä¸Šä¸‹æ–‡*/</span><span style="--s-dark:#666666;--s-light:#999999">)</span></span></code></pre><p>æºä»£ç å¦‚ä¸‹</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">export</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> function</span><span style="--s-dark:#80A665;--s-light:#59873A"> each</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">obj</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> iteratee</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> context</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  iteratee</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#80A665;--s-light:#59873A"> optimizeCb</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">iteratee</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> context</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">  var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">i</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> length</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  if</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#80A665;--s-light:#59873A">isArrayLike</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">obj</span><span style="--s-dark:#666666;--s-light:#999999">))</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">    for</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">i</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 0</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> length</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> obj</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#B8A965;--s-light:#998418">length</span><span style="--s-dark:#666666;--s-light:#999999">;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> i</span><span style="--s-dark:#666666;--s-light:#999999"> &lt;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> length</span><span style="--s-dark:#666666;--s-light:#999999">;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> i</span><span style="--s-dark:#CB7676;--s-light:#AB5959">++</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">      iteratee</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">obj</span><span style="--s-dark:#666666;--s-light:#999999">[</span><span style="--s-dark:#BD976A;--s-light:#B07D48">i</span><span style="--s-dark:#666666;--s-light:#999999">],</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> i</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> obj</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">    }</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  }</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> else</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">    var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">_keys</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#80A665;--s-light:#59873A"> keys</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">obj</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">    for</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">i</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 0</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> length</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> _keys</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#B8A965;--s-light:#998418">length</span><span style="--s-dark:#666666;--s-light:#999999">;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> i</span><span style="--s-dark:#666666;--s-light:#999999"> &lt;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> length</span><span style="--s-dark:#666666;--s-light:#999999">;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> i</span><span style="--s-dark:#CB7676;--s-light:#AB5959">++</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">      iteratee</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">obj</span><span style="--s-dark:#666666;--s-light:#999999">[</span><span style="--s-dark:#BD976A;--s-light:#B07D48">_keys</span><span style="--s-dark:#666666;--s-light:#999999">[</span><span style="--s-dark:#BD976A;--s-light:#B07D48">i</span><span style="--s-dark:#666666;--s-light:#999999">]],</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> _keys</span><span style="--s-dark:#666666;--s-light:#999999">[</span><span style="--s-dark:#BD976A;--s-light:#B07D48">i</span><span style="--s-dark:#666666;--s-light:#999999">],</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> obj</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">    }</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  }</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  return</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> obj</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span></code></pre><p>æµç¨‹å…¶å®å¾ˆæ¸…æ™°</p><ul><li><code>optimizeCb</code> å…ˆæ˜¯å¯¹ä¼ è¿›æ¥çš„å‡½æ•°å’Œä¸Šä¸‹æ–‡è¿›è¡Œå¤„ç†</li><li><code>isArrayLike</code> åˆ¤æ–­ä¼ è¿›æ¥çš„å¯¹è±¡æ˜¯æ•°ç»„ï¼Œç›´æ¥ç”¨ç´¢å¼•å–å€¼æ¥æ‰§è¡Œå‡½æ•°</li><li>ä¸æ˜¯æ•°ç»„ï¼Œè§†ä½œä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œè·å–é”®åï¼Œé€šè¿‡é”®åå–å€¼æ¥æ‰§è¡Œå‡½æ•°</li></ul><p>æ¥ä¸‹æ¥çœ‹ä¸‹<code>optimizeCb</code>è¿™ä¸ªå‡½æ•°</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">function</span><span style="--s-dark:#80A665;--s-light:#59873A"> optimizeCb</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">func</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> context</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> argCount</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  if</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">context</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> ===</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> void</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 0</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> return</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> func</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  switch</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">argCount</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> ==</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> null</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> ?</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 3</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> :</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> argCount</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">    case</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 1</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> return</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> function</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">value</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">      return</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> func</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">call</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">context</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> value</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">    };</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">    // The 2-argument case is omitted because weâ€™re not using it.</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">    case</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 3</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> return</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> function</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">value</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> index</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> collection</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">      return</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> func</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">call</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">context</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> value</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> index</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> collection</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">    };</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">    case</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 4</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> return</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> function</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">accumulator</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> value</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> index</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> collection</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">      return</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> func</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">call</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">context</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> accumulator</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> value</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> index</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> collection</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">    };</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  }</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  return</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> function</span><span style="--s-dark:#666666;--s-light:#999999">()</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">    return</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> func</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">apply</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">context</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#C99076;--s-light:#A65E2B"> arguments</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  };</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span></code></pre><p>è¿™é‡Œå‡½æ•°æ ¹æ®å‚æ•°<code>argCount</code>æ¥å†³å®šè¿”å›å‡½æ•°çš„å‚æ•°ä¸ªæ•°ã€‚</p><p><code>switch</code>è¯­å¥ä¸­<code>argCount</code>é»˜è®¤ä¸º3ï¼Œä¹Ÿå°±æ˜¯æ•°ç»„çš„å‡½æ•°æ–¹æ³•ä¸­æœ€å¸¸è§çš„å›è°ƒå‡½æ•°çš„å‚æ•°ï¼Œå³<code>item,index,array</code>è¿™ç§æ ¼å¼ã€‚</p><p>æ¥ä¸‹æ¥æ˜¯<code>isArrayLike(obj)</code>è¿™ä¸ªå‡½æ•°</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">isArrayLike</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#80A665;--s-light:#59873A"> createSizePropertyCheck</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">getLength</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span></code></pre><p>è¿™é‡Œä½¿ç”¨äº†<code>getLength</code>è¿™ä¸ªå˜é‡å’Œ<code>createSizePropertyCheck</code>è¿™ä¸ªå‡½æ•°ã€‚</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">getLength</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#80A665;--s-light:#59873A"> shallowProperty</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#C98A7D;--s-light:#B56959">length</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">function</span><span style="--s-dark:#80A665;--s-light:#59873A"> createSizePropertyCheck</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">getSizeProperty</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  return</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> function</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">collection</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">    var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">sizeProperty</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#80A665;--s-light:#59873A"> getSizeProperty</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">collection</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">    return</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> typeof</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> sizeProperty</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> ==</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> '</span><span style="--s-dark:#C98A7D;--s-light:#B56959">number</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> &amp;&amp;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> sizeProperty</span><span style="--s-dark:#666666;--s-light:#999999"> &gt;=</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 0</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> &amp;&amp;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> sizeProperty</span><span style="--s-dark:#666666;--s-light:#999999"> &lt;=</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> MAX_ARRAY_INDEX</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  }</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span></code></pre><p>ä¾‹å­</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">getLength</span><span style="--s-dark:#666666;--s-light:#999999">([</span><span style="--s-dark:#4C9A91;--s-light:#2F798A">1</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 2</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 3</span><span style="--s-dark:#666666;--s-light:#999999">]);</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0"> // è¾“å‡º3ï¼ˆæ•°ç»„çš„é•¿åº¦ï¼‰</span></span></code></pre><p>åˆä½¿ç”¨äº†<code>shallowProperty</code></p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">function</span><span style="--s-dark:#80A665;--s-light:#59873A"> shallowProperty</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">key</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  return</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> function</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">obj</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">    return</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> obj</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> ==</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> null</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> ?</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> void</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 0</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> :</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> obj</span><span style="--s-dark:#666666;--s-light:#999999">[</span><span style="--s-dark:#BD976A;--s-light:#B07D48">key</span><span style="--s-dark:#666666;--s-light:#999999">];</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  };</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span></code></pre><p><code>shallowProperty</code>è¿™ä¸ªå‡½æ•°ä¹Ÿä¸å¤æ‚ï¼Œå°±æ˜¯å¯¹å¯¹è±¡å–å±æ€§å€¼çš„æ“ä½œï¼Œæ¥æ”¶ä¸€ä¸ªå±æ€§åï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ¥æ”¶ä¸€ä¸ªå¯¹è±¡ï¼Œè¿”å›å¯¹åº”å±æ€§åçš„å±æ€§å€¼ã€‚</p><p><code>createSizePropertyCheck</code> ä½¿ç”¨äº†æˆ‘ä»¬åˆ›å»ºçš„<code>getLength</code>å‡ºæ¥çš„å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°åˆè¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œç”¨æ¥æ£€æŸ¥ä¼ è¿›æ¥çš„å‚æ•°çš„<code>length</code>å±æ€§å€¼ï¼Œè¿™é‡Œè¿”å›çš„åˆ¤æ–­ä¸º<code>typeof sizeProperty == &amp;#39;number&amp;#39; &amp;amp;&amp;amp; sizeProperty &amp;gt;= 0 &amp;amp;&amp;amp; sizeProperty &amp;lt;= MAX_ARRAY_INDEX</code>ï¼Œè¿™é‡Œå‰ä¸¤ä¸ªåˆ¤æ–­è¿˜æ˜¯æŒºå¥½ç†è§£çš„ï¼Œä¸€ä¸ªæ˜¯åˆ¤æ–­ç±»å‹æ˜¯ä¸æ˜¯ä¸º<code>number</code>ï¼Œä¸€ä¸ªåˆ¤æ–­é•¿åº¦æ˜¯ä¸æ˜¯å¤§äºç­‰äº0ï¼Œè‡³äºæœ€åä¸€ä¸ªåˆ¤æ–­ï¼Œ<code>MAX_ARRAY_INDEX</code>è¿™ä¸ªå˜é‡å¯¹äºçš„å€¼ä¸º<code>Math.pow(2, 53) - 1</code>ï¼Œè¿™ä¸ªå€¼ä¸ºJavaScriptæœ€å¤§çš„æ•´å‹æ•°å­—ï¼Œå¯ä»¥é€šè¿‡<code>Number.MAX_SAFE_INTEGER</code>æ¥æŸ¥çœ‹ã€‚ä½†æ˜¯æˆ‘è‡ªå·±è¯•äº†ä¸‹ï¼Œnewä¸å‡ºæ¥è¿™ä¹ˆå¤§çš„æ•°ç»„ï¼Œå¯èƒ½æ˜¯ä¸€ç§æŠ˜ä¸­çš„è§£å†³æ–¹æ¡ˆå§ã€‚</p><p>å›åˆ°<code>each</code>å‡½æ•°ï¼Œåªå·®æœ€åä¸€ä¸ª<code>keys</code>å‡½æ•°äº†</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">function</span><span style="--s-dark:#80A665;--s-light:#59873A"> keys</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">obj</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  if</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#CB7676;--s-light:#AB5959">!</span><span style="--s-dark:#80A665;--s-light:#59873A">isObject</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">obj</span><span style="--s-dark:#666666;--s-light:#999999">))</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> return</span><span style="--s-dark:#666666;--s-light:#999999"> [];</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  if</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">nativeKeys</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> return</span><span style="--s-dark:#80A665;--s-light:#59873A"> nativeKeys</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">obj</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">  var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">_keys</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#666666;--s-light:#999999"> [];</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  for</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#CB7676;--s-light:#AB5959">var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">key</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> in</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> obj</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> if</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#80A665;--s-light:#59873A">_has</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">obj</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> key</span><span style="--s-dark:#666666;--s-light:#999999">))</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> _keys</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">push</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">key</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  // Ahem, IE &lt; 9.</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  if</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">hasEnumBug</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#80A665;--s-light:#59873A"> collectNonEnumProps</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">obj</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> _keys</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  return</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> _keys</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span></code></pre><p>è¿™é‡Œä½¿ç”¨äº†<code>isObject(obj)</code>å‡½æ•°ï¼Œ<code>nativeKeys(obj)</code>å‡½æ•° <code>_has</code>å‡½æ•°ï¼Œ<code>hasEnumBug</code>å˜é‡å’Œ<code>collectNonEnumProps(obj, keys)</code>å‡½æ•°</p><p><code>isObject</code></p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">export</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> function</span><span style="--s-dark:#80A665;--s-light:#59873A"> isObject</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">obj</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">  var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">type</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> typeof </span><span style="--s-dark:#BD976A;--s-light:#B07D48">obj</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  return</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> type</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> ===</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> '</span><span style="--s-dark:#C98A7D;--s-light:#B56959">function</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> ||</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> type</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> ===</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> '</span><span style="--s-dark:#C98A7D;--s-light:#B56959">object</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> &amp;&amp;</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> !!</span><span style="--s-dark:#BD976A;--s-light:#B07D48">obj</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span></code></pre><p>åˆ¤æ–­å…¥å‚æ˜¯å¦ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œåˆ¤æ–­äº†å¯¹è±¡<code>typeof</code>åçš„å€¼ã€‚</p><p>é™¤äº†<code>type === &amp;#39;object&amp;#39;</code>è¿™ä¸ªæ ‡å‡†çš„åˆ¤æ–­ä¹‹å¤–ï¼Œ<code>!!obj</code>æ¡ä»¶æŠŠ<code>null</code>å€¼ç»™æ’é™¤ï¼Œ<code>type === &amp;#39;function&amp;#39;</code>æŠŠå‡½æ•°ä¹Ÿç»™å½’åˆ°å¯¹è±¡é‡Œé¢ã€‚</p><p><code>nativeKeys</code></p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">nativeKeys</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> Object</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">keys</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span></code></pre><p>è¿™é‡Œä¸ºä½¿ç”¨åŸç”Ÿçš„æ–¹æ³•ï¼Œå¦‚æœå­˜åœ¨çš„è¯ã€‚</p><p><code>_has</code></p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">ObjProto</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#B8A965;--s-light:#998418"> Object</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#B8A965;--s-light:#998418">prototype</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">hasOwnProperty</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> ObjProto</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">hasOwnProperty</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">function</span><span style="--s-dark:#80A665;--s-light:#59873A"> _has</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">obj</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> path</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  return</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> obj</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> !=</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> null</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> &amp;&amp;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> hasOwnProperty</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">call</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">obj</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> path</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span></code></pre><p>è¿™é‡Œæ˜¯ä½¿ç”¨äº†åŸç”Ÿçš„<code>hasOwnProperty</code>æ–¹æ³•</p><p><code>hasEnumBug</code></p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">// Keys in IE &lt; 9 that won't be iterated by `for key in ...` and thus missed.</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">hasEnumBug</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> !</span><span style="--s-dark:#666666;--s-light:#999999">{</span><span style="--s-dark:#B8A965;--s-light:#998418">toString</span><span style="--s-dark:#666666;--s-light:#999999">: </span><span style="--s-dark:#CB7676;--s-light:#AB5959">null</span><span style="--s-dark:#666666;--s-light:#999999">}.</span><span style="--s-dark:#80A665;--s-light:#59873A">propertyIsEnumerable</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#C98A7D;--s-light:#B56959">toString</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">nonEnumerableProps</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#666666;--s-light:#999999"> [</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#C98A7D;--s-light:#B56959">valueOf</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> '</span><span style="--s-dark:#C98A7D;--s-light:#B56959">isPrototypeOf</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> '</span><span style="--s-dark:#C98A7D;--s-light:#B56959">toString</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#666666;--s-light:#999999">,</span></span>
<span class="line"><span style="--s-dark:#C98A7D77;--s-light:#B5695977">  '</span><span style="--s-dark:#C98A7D;--s-light:#B56959">propertyIsEnumerable</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> '</span><span style="--s-dark:#C98A7D;--s-light:#B56959">hasOwnProperty</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> '</span><span style="--s-dark:#C98A7D;--s-light:#B56959">toLocaleString</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#666666;--s-light:#999999">];</span></span></code></pre><p>è¿™é‡Œåœ¨æºä»£ç ä¸­æœ‰æ³¨é‡Šï¼Œç¿»è¯‘è¿‡æ¥å¤§æ¦‚æ˜¯åœ¨IE9ä»¥ä¸‹çš„ç‰ˆæœ¬æŸäº›å±æ€§åä¸èƒ½è¢«<code>for-in</code>éå†ï¼ˆè¿™é‡Œçš„æŸäº›å±æ€§ååœ¨<code>nonEnumerableProps</code>å®šä¹‰äº†ï¼‰ï¼Œä¼šå¿½ç•¥è¿™ä¸ªæ“ä½œã€‚</p><p>æˆ‘åœ¨IE11ä¸Šç”¨IE5çš„æ‰“å¼€ä¸€ä¸ªè„šæœ¬æµ‹è¯•å‘ç°å¯ä»¥éå†å‡ºå±æ€§ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯ç”¨çš„IE11çš„é—®é¢˜ã€‚</p><p>è¿™å¥è¯å¯èƒ½è¯´çš„æ¯”è¾ƒå«ç³Šï¼Œæ ¹æ®ä»–è¿™ä¸ªè¯­å¥ï¼Œæˆ‘è§‰å¾—æ„æ€åº”è¯¥æ˜¯é‡å†™äº†æŸäº›å±æ€§ï¼Œä½†æ˜¯è¯¥å±æ€§ä¾ç„¶ä¸å¯æšä¸¾è¿™æ ·çš„bugã€‚</p><p><code>collectNonEnumProps</code></p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">function</span><span style="--s-dark:#80A665;--s-light:#59873A"> collectNonEnumProps</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">obj</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> _keys</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">  var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">nonEnumIdx</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> nonEnumerableProps</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#B8A965;--s-light:#998418">length</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">  var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">constructor</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> obj</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#B8A965;--s-light:#998418">constructor</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  // å–åŸå‹</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">  var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">proto</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#80A665;--s-light:#59873A"> isFunction</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">constructor</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> &amp;&amp; </span><span style="--s-dark:#B8A965;--s-light:#998418">constructor</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#B8A965;--s-light:#998418">prototype</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> || </span><span style="--s-dark:#BD976A;--s-light:#B07D48">ObjProto</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  // Constructor is a special case.</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  // constructoræ„é€ å™¨ç‰¹æ®Šå¤„ç†ï¼Œè¿™é‡Œä¸æ˜¯å¾ˆæ‡‚...</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">  var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">prop</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> '</span><span style="--s-dark:#C98A7D;--s-light:#B56959">constructor</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  if</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#80A665;--s-light:#59873A">_has</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">obj</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> prop</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> &amp;&amp;</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> !</span><span style="--s-dark:#80A665;--s-light:#59873A">contains</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">_keys</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> prop</span><span style="--s-dark:#666666;--s-light:#999999">))</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> _keys</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">push</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">prop</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  while</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">nonEnumIdx</span><span style="--s-dark:#CB7676;--s-light:#AB5959">--</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">    prop</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> nonEnumerableProps</span><span style="--s-dark:#666666;--s-light:#999999">[</span><span style="--s-dark:#BD976A;--s-light:#B07D48">nonEnumIdx</span><span style="--s-dark:#666666;--s-light:#999999">];</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">    // å±æ€§åœ¨æ•´ä¸ªåŸå‹é“¾ä¸­ï¼Œä½†æ˜¯å¯¹è±¡å’ŒåŸå‹æ‰€æ‹¥æœ‰çš„ä¸æ˜¯åŒä¸€ä¸ªã€‚</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">    if</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">prop</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> in</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> obj</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> &amp;&amp;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> obj</span><span style="--s-dark:#666666;--s-light:#999999">[</span><span style="--s-dark:#BD976A;--s-light:#B07D48">prop</span><span style="--s-dark:#666666;--s-light:#999999">]</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> !==</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> proto</span><span style="--s-dark:#666666;--s-light:#999999">[</span><span style="--s-dark:#BD976A;--s-light:#B07D48">prop</span><span style="--s-dark:#666666;--s-light:#999999">]</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> &amp;&amp;</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> !</span><span style="--s-dark:#80A665;--s-light:#59873A">contains</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">_keys</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> prop</span><span style="--s-dark:#666666;--s-light:#999999">))</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">      _keys</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">push</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">prop</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">    }</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  }</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span></code></pre><p>è¿™ä¸ªæ–¹æ³•å°±æ˜¯å¯¹å°è¯•å¯¹ä¸¢å¤±çš„å±æ€§è¿›è¡ŒæŸ¥æ‰¾å¹¶æ·»åŠ åˆ°å±æ€§åçš„æ•°ç»„ä¸­ã€‚</p><p>okï¼ŒæŠŠå‡½æ•°ææ¸…æ¥šä¹‹åï¼Œæ­¥éª¤å°±æ¸…æ™°äº†ï¼Œå¯¹äº<code>keys</code>æ–¹æ³•</p><ul><li>åˆ¤æ–­ä¸æ˜¯å¯¹è±¡ï¼Œä¸æ˜¯è¿”å›ä¸€ä¸ªç©ºçš„æ•°ç»„</li><li>åˆ¤æ–­åŸç”Ÿçš„<code>keys</code>æ–¹æ³•å¯ç”¨ï¼Œä½¿ç”¨åŸç”Ÿçš„æ–¹æ³•</li><li>åŸç”Ÿçš„<code>keys</code>æ–¹æ³•ä¸å¯ä»¥ï¼Œä½¿ç”¨<code>for-in</code>éå†å¹¶å­˜åˆ°æ•°ç»„ä¸­ã€‚</li><li>å­˜åœ¨IEé—å¤±å±æ€§çš„bugï¼Œå°±å°è¯•å¯»æ‰¾ä¸¢å¤±çš„å±æ€§åã€‚</li></ul><p>å¯¹äº<code>each</code>ï¼ŒåŸºæœ¬ä¸Šå°±æ˜¯è¿™æ ·ï¼Œæœ€åè¿”å›äº†æ•°ç»„æœ¬èº«ï¼Œæ–¹ä¾¿é“¾å¼è°ƒç”¨ã€‚</p><h2 id="map" tabindex="-1"><code>map</code> <a class="header-anchor" href="#map">ğŸ”—</a></h2><p>å†…ç½®çš„<code>map</code>çš„è¯­æ³•</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#666666;--s-light:#999999">[].</span><span style="--s-dark:#80A665;--s-light:#59873A">map</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#CB7676;--s-light:#AB5959">function</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">v</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> i</span><span style="--s-dark:#666666;--s-light:#999999"> ,</span><span style="--s-dark:#BD976A;--s-light:#B07D48">a</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  // å‡½æ•°å†…å®¹</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">},</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> window</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0">/*æŒ‡å®šä¸Šä¸‹æ–‡*/</span><span style="--s-dark:#666666;--s-light:#999999">)</span></span></code></pre><p>åœ¨Underscoreä¸­ä¸º</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">_</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">map</span><span style="--s-dark:#666666;--s-light:#999999">([],</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> function</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">v</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> i</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> a</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  // å‡½æ•°å†…å®¹</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">},</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> window</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0">/*æŒ‡å®šä¸Šä¸‹æ–‡*/</span><span style="--s-dark:#666666;--s-light:#999999">)</span></span></code></pre><p>å®ƒçš„æºç å¦‚ä¸‹</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">export</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> function</span><span style="--s-dark:#80A665;--s-light:#59873A"> map</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">obj</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> iteratee</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> context</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  iteratee</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#80A665;--s-light:#59873A"> cb</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">iteratee</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> context</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">  var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">_keys</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> !</span><span style="--s-dark:#80A665;--s-light:#59873A">isArrayLike</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">obj</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> &amp;&amp; </span><span style="--s-dark:#80A665;--s-light:#59873A">keys</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">obj</span><span style="--s-dark:#666666;--s-light:#999999">),</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">      length</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">_keys</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> || </span><span style="--s-dark:#BD976A;--s-light:#B07D48">obj</span><span style="--s-dark:#666666;--s-light:#999999">).</span><span style="--s-dark:#B8A965;--s-light:#998418">length</span><span style="--s-dark:#666666;--s-light:#999999">,</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">      results</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#80A665;--s-light:#59873A"> Array</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">length</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  for</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#CB7676;--s-light:#AB5959">var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">index</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 0</span><span style="--s-dark:#666666;--s-light:#999999">;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> index</span><span style="--s-dark:#666666;--s-light:#999999"> &lt;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> length</span><span style="--s-dark:#666666;--s-light:#999999">;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> index</span><span style="--s-dark:#CB7676;--s-light:#AB5959">++</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">    var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">currentKey</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> _keys</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> ? </span><span style="--s-dark:#BD976A;--s-light:#B07D48">_keys</span><span style="--s-dark:#666666;--s-light:#999999">[</span><span style="--s-dark:#BD976A;--s-light:#B07D48">index</span><span style="--s-dark:#666666;--s-light:#999999">]</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> : </span><span style="--s-dark:#BD976A;--s-light:#B07D48">index</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">    results</span><span style="--s-dark:#666666;--s-light:#999999">[</span><span style="--s-dark:#BD976A;--s-light:#B07D48">index</span><span style="--s-dark:#666666;--s-light:#999999">]</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#80A665;--s-light:#59873A"> iteratee</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">obj</span><span style="--s-dark:#666666;--s-light:#999999">[</span><span style="--s-dark:#BD976A;--s-light:#B07D48">currentKey</span><span style="--s-dark:#666666;--s-light:#999999">],</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> currentKey</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> obj</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  }</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  return</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> results</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span></code></pre><p>ç»è¿‡<code>each</code>ä¸­å¤§éƒ¨åˆ†å‡½æ•°çš„å­¦ä¹ ä¹‹åï¼Œçœ‹ä¹‹åçš„å‡½æ•°å°±ä¼šç®€å•å¾ˆå¤šäº†ï¼Œ</p><p>é¦–å…ˆé€šè¿‡<code>cb</code>å‡½æ•°æ¥å¤„ç†å›è°ƒå‡½æ•°å’Œä¸Šä¸‹æ–‡ï¼Œè¿™ä¸ª<code>cb</code>å’Œä¹‹å‰çš„<code>optimizeCb</code>ä¸åŒ</p><p><code>cb</code></p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">// The function we actually call internally. It invokes _.iteratee if</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">// overridden, otherwise baseIteratee.</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">function</span><span style="--s-dark:#80A665;--s-light:#59873A"> cb</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">value</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> context</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> argCount</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  if</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">_</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">iteratee</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> !==</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> iteratee</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> return</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> _</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">iteratee</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">value</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> context</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  return</span><span style="--s-dark:#80A665;--s-light:#59873A"> baseIteratee</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">value</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> context</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> argCount</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span></code></pre><p>è¿™é‡Œçš„æ³¨é‡Šè¯´æ˜äº†ä¸€èˆ¬æƒ…å†µä¸‹ä¼šä½¿ç”¨å†…éƒ¨çš„<code>baseIteratee</code>æ¥å¤„ç†å›è°ƒå‡½æ•°å’Œä¸Šä¸‹æ–‡ï¼Œå¦‚æœç”¨æˆ·è‡ªå·±æŒ‡å®šäº†<code>iteratee</code>ï¼Œå°±ä½¿ç”¨ç”¨æˆ·è‡ªå·±å®šä¹‰çš„ã€‚</p><p><code>baseIteratee</code></p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">// Keep the identity function around for default iteratees.</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">function</span><span style="--s-dark:#80A665;--s-light:#59873A"> identity</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">value</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  return</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> value</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">function</span><span style="--s-dark:#80A665;--s-light:#59873A"> baseIteratee</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">value</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> context</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> argCount</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  if</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">value</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> ==</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> null</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> return</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> identity</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  if</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#80A665;--s-light:#59873A">isFunction</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">value</span><span style="--s-dark:#666666;--s-light:#999999">))</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> return</span><span style="--s-dark:#80A665;--s-light:#59873A"> optimizeCb</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">value</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> context</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> argCount</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  if</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#80A665;--s-light:#59873A">isObject</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">value</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> &amp;&amp;</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> !</span><span style="--s-dark:#80A665;--s-light:#59873A">isArray</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">value</span><span style="--s-dark:#666666;--s-light:#999999">))</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> return</span><span style="--s-dark:#80A665;--s-light:#59873A"> matcher</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">value</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  return</span><span style="--s-dark:#80A665;--s-light:#59873A"> property</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">value</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span></code></pre><p>è¿™é‡Œçš„<code>baseIteratee</code>ä¸»è¦å¯¹å›è°ƒè¿›è¡Œå¤„ç†ï¼Œé»˜è®¤çš„<code>identity</code>å›è°ƒï¼Œè¿™æ ·å­åœ¨ä¸»å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯<code>map</code>å‡½æ•°çš„å†…éƒ¨å°±ä¸ç”¨å»åˆ¤æ–­å›è°ƒå‡½æ•°æ˜¯å¦ä¸ºç©ºäº†ã€‚</p><p>è¿™é‡Œå‰ä¸¤ä¸ªè¿”å›è¿˜æ˜¯æŒºå¥½ç†è§£çš„ï¼Œé‡è¦çš„æ˜¯åé¢ä¸¤ä¸ªè¿”å›ï¼Œä¸€ä¸ªæ˜¯åœ¨æ˜¯å¯¹è±¡ä½†ä¸æ˜¯æ•°ç»„çš„æƒ…å†µä¸‹çš„<code>matcher</code>å‡½æ•°å’Œæœ€åè¿”å›çš„<code>property</code>å‡½æ•°</p><p><code>matcher</code></p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">function</span><span style="--s-dark:#80A665;--s-light:#59873A"> matcher</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">attrs</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  attrs</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#80A665;--s-light:#59873A"> extendOwn</span><span style="--s-dark:#666666;--s-light:#999999">({},</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> attrs</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  return</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> function</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">obj</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">    return</span><span style="--s-dark:#80A665;--s-light:#59873A"> isMatch</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">obj</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> attrs</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  };</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span></code></pre><p>è¿™é‡Œåˆç”¨åˆ°äº†<code>extendOwn</code>å’Œ<code>isMatch</code>å‡½æ•°</p><p><code>extendOwn</code></p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">export</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">extendOwn</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#80A665;--s-light:#59873A"> createAssigner</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">keys</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">function</span><span style="--s-dark:#80A665;--s-light:#59873A"> createAssigner</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">keysFunc</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> defaults</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  return</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> function</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">obj</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">    var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">length</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#C99076;--s-light:#A65E2B"> arguments</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#B8A965;--s-light:#998418">length</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">    if</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">defaults</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> obj</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#80A665;--s-light:#59873A"> Object</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">obj</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">    if</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">length</span><span style="--s-dark:#666666;--s-light:#999999"> &lt;</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 2</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> ||</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> obj</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> ==</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> null</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> return</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> obj</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">    for</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#CB7676;--s-light:#AB5959">var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">index</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 1</span><span style="--s-dark:#666666;--s-light:#999999">;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> index</span><span style="--s-dark:#666666;--s-light:#999999"> &lt;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> length</span><span style="--s-dark:#666666;--s-light:#999999">;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> index</span><span style="--s-dark:#CB7676;--s-light:#AB5959">++</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">      var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">source</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#C99076;--s-light:#A65E2B"> arguments</span><span style="--s-dark:#666666;--s-light:#999999">[</span><span style="--s-dark:#BD976A;--s-light:#B07D48">index</span><span style="--s-dark:#666666;--s-light:#999999">],</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">          _keys</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#80A665;--s-light:#59873A"> keysFunc</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">source</span><span style="--s-dark:#666666;--s-light:#999999">),</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">          l</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> _keys</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#B8A965;--s-light:#998418">length</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">      for</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#CB7676;--s-light:#AB5959">var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">i</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 0</span><span style="--s-dark:#666666;--s-light:#999999">;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> i</span><span style="--s-dark:#666666;--s-light:#999999"> &lt;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> l</span><span style="--s-dark:#666666;--s-light:#999999">;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> i</span><span style="--s-dark:#CB7676;--s-light:#AB5959">++</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">        var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">key</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> _keys</span><span style="--s-dark:#666666;--s-light:#999999">[</span><span style="--s-dark:#BD976A;--s-light:#B07D48">i</span><span style="--s-dark:#666666;--s-light:#999999">];</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">        if</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#CB7676;--s-light:#AB5959">!</span><span style="--s-dark:#BD976A;--s-light:#B07D48">defaults</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> ||</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> obj</span><span style="--s-dark:#666666;--s-light:#999999">[</span><span style="--s-dark:#BD976A;--s-light:#B07D48">key</span><span style="--s-dark:#666666;--s-light:#999999">]</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> ===</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> void</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 0</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> obj</span><span style="--s-dark:#666666;--s-light:#999999">[</span><span style="--s-dark:#BD976A;--s-light:#B07D48">key</span><span style="--s-dark:#666666;--s-light:#999999">]</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> source</span><span style="--s-dark:#666666;--s-light:#999999">[</span><span style="--s-dark:#BD976A;--s-light:#B07D48">key</span><span style="--s-dark:#666666;--s-light:#999999">];</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">      }</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">    }</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">    return</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> obj</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  };</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span></code></pre><p>ä¾‹å­</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">extendOwn</span><span style="--s-dark:#666666;--s-light:#999999">({},</span><span style="--s-dark:#666666;--s-light:#999999"> {</span><span style="--s-dark:#B8A965;--s-light:#998418">a</span><span style="--s-dark:#666666;--s-light:#999999">: </span><span style="--s-dark:#4C9A91;--s-light:#2F798A">1</span><span style="--s-dark:#666666;--s-light:#999999">},</span><span style="--s-dark:#666666;--s-light:#999999"> {</span><span style="--s-dark:#B8A965;--s-light:#998418">b</span><span style="--s-dark:#666666;--s-light:#999999">: </span><span style="--s-dark:#4C9A91;--s-light:#2F798A">2</span><span style="--s-dark:#666666;--s-light:#999999">});</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0"> // è¾“å‡º{a: 1, b: 2}</span></span></code></pre><p><code>createAssigner</code>æ¥æ”¶ä¸€ä¸ªè·å–keysçš„å‡½æ•°ï¼Œè¿”å›äº†ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°çš„ä½œç”¨å°±æ˜¯æŠŠç¬¬äºŒä¸ªä¹‹åçš„å‚æ•°éƒ½åˆå¹¶åˆ°ç¬¬ä¸€ä¸ªå‚æ•°ä¸­ï¼Œå¹¶è¿”å›ç¬¬ä¸€ä¸ªå‚æ•°ã€‚</p><p><code>isMatch</code></p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">export</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> function</span><span style="--s-dark:#80A665;--s-light:#59873A"> isMatch</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">object</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> attrs</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">  var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">_keys</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#80A665;--s-light:#59873A"> keys</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">attrs</span><span style="--s-dark:#666666;--s-light:#999999">),</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> length</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> _keys</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#B8A965;--s-light:#998418">length</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  if</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">object</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> ==</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> null</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> return</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> !</span><span style="--s-dark:#BD976A;--s-light:#B07D48">length</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">  var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">obj</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#80A665;--s-light:#59873A"> Object</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">object</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  for</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#CB7676;--s-light:#AB5959">var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">i</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 0</span><span style="--s-dark:#666666;--s-light:#999999">;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> i</span><span style="--s-dark:#666666;--s-light:#999999"> &lt;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> length</span><span style="--s-dark:#666666;--s-light:#999999">;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> i</span><span style="--s-dark:#CB7676;--s-light:#AB5959">++</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">    var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">key</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> _keys</span><span style="--s-dark:#666666;--s-light:#999999">[</span><span style="--s-dark:#BD976A;--s-light:#B07D48">i</span><span style="--s-dark:#666666;--s-light:#999999">];</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">    if</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">attrs</span><span style="--s-dark:#666666;--s-light:#999999">[</span><span style="--s-dark:#BD976A;--s-light:#B07D48">key</span><span style="--s-dark:#666666;--s-light:#999999">]</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> !==</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> obj</span><span style="--s-dark:#666666;--s-light:#999999">[</span><span style="--s-dark:#BD976A;--s-light:#B07D48">key</span><span style="--s-dark:#666666;--s-light:#999999">]</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> ||</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> !</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">key</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> in</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> obj</span><span style="--s-dark:#666666;--s-light:#999999">))</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> return</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> false</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  }</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  return</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> true</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span></code></pre><p><code>isMatch</code>å°±æ˜¯åˆ¤æ–­ä¼ è¿›çš„å¯¹è±¡æ˜¯å¦å’Œ<code>attr</code>ä¸­å…¨éƒ¨çš„å±æ€§åç›¸ç­‰ã€‚</p><p>ä¾‹å­</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">isMatch</span><span style="--s-dark:#666666;--s-light:#999999">({</span><span style="--s-dark:#B8A965;--s-light:#998418">a</span><span style="--s-dark:#666666;--s-light:#999999">: </span><span style="--s-dark:#4C9A91;--s-light:#2F798A">1</span><span style="--s-dark:#666666;--s-light:#999999">},</span><span style="--s-dark:#666666;--s-light:#999999"> {</span><span style="--s-dark:#B8A965;--s-light:#998418">a</span><span style="--s-dark:#666666;--s-light:#999999">: </span><span style="--s-dark:#4C9A91;--s-light:#2F798A">1</span><span style="--s-dark:#666666;--s-light:#999999">});</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0"> // è¾“å‡ºtrue</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">isMatch</span><span style="--s-dark:#666666;--s-light:#999999">({</span><span style="--s-dark:#B8A965;--s-light:#998418">a</span><span style="--s-dark:#666666;--s-light:#999999">: </span><span style="--s-dark:#4C9A91;--s-light:#2F798A">1</span><span style="--s-dark:#666666;--s-light:#999999">},</span><span style="--s-dark:#666666;--s-light:#999999"> {</span><span style="--s-dark:#B8A965;--s-light:#998418">a</span><span style="--s-dark:#666666;--s-light:#999999">: </span><span style="--s-dark:#4C9A91;--s-light:#2F798A">1</span><span style="--s-dark:#666666;--s-light:#999999">, </span><span style="--s-dark:#B8A965;--s-light:#998418">b</span><span style="--s-dark:#666666;--s-light:#999999">: </span><span style="--s-dark:#4C9A91;--s-light:#2F798A">2</span><span style="--s-dark:#666666;--s-light:#999999">});</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0"> // è¾“å‡ºfalse</span></span></code></pre><p>æœ€åä¸€ä¸ªè¿”å›å°±æ˜¯<code>property</code>å‡½æ•°äº†</p><p><code>property</code></p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">export</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> function</span><span style="--s-dark:#80A665;--s-light:#59873A"> property</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">path</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  if</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#CB7676;--s-light:#AB5959">!</span><span style="--s-dark:#80A665;--s-light:#59873A">isArray</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">path</span><span style="--s-dark:#666666;--s-light:#999999">))</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">    return</span><span style="--s-dark:#80A665;--s-light:#59873A"> shallowProperty</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">path</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  }</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  return</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> function</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">obj</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">    return</span><span style="--s-dark:#80A665;--s-light:#59873A"> deepGet</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">obj</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> path</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  };</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span></code></pre><p><code>shallowProperty</code>ä¹‹å‰è¯´è¿‡äº†å°±æ˜¯å–å¯¹è±¡çš„å±æ€§å€¼çš„ï¼Œæ‰€ä»¥åªè¦çœ‹<code>deepGet</code>å‡½æ•°å°±è¡Œ</p><p><code>deepGet</code></p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">function</span><span style="--s-dark:#80A665;--s-light:#59873A"> deepGet</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">obj</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> path</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">  var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">length</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> path</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#B8A965;--s-light:#998418">length</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  for</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#CB7676;--s-light:#AB5959">var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">i</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 0</span><span style="--s-dark:#666666;--s-light:#999999">;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> i</span><span style="--s-dark:#666666;--s-light:#999999"> &lt;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> length</span><span style="--s-dark:#666666;--s-light:#999999">;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> i</span><span style="--s-dark:#CB7676;--s-light:#AB5959">++</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">    if</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">obj</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> ==</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> null</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> return</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> void</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 0</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">    obj</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> obj</span><span style="--s-dark:#666666;--s-light:#999999">[</span><span style="--s-dark:#BD976A;--s-light:#B07D48">path</span><span style="--s-dark:#666666;--s-light:#999999">[</span><span style="--s-dark:#BD976A;--s-light:#B07D48">i</span><span style="--s-dark:#666666;--s-light:#999999">]];</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  }</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  return</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> length</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> ?</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> obj</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> :</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> void</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 0</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span></code></pre><p>è¿™é‡Œä¼ è¿›æ¥çš„<code>path</code>å°±æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œé€šè¿‡è¿­ä»£æ¥å–å¾—å±‚çº§å±æ€§çš„å€¼ã€‚</p><p>ä¾‹å­</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">deepGet</span><span style="--s-dark:#666666;--s-light:#999999">({</span><span style="--s-dark:#B8A965;--s-light:#998418">a</span><span style="--s-dark:#666666;--s-light:#999999">: {</span><span style="--s-dark:#B8A965;--s-light:#998418">b</span><span style="--s-dark:#666666;--s-light:#999999">: </span><span style="--s-dark:#4C9A91;--s-light:#2F798A">1</span><span style="--s-dark:#666666;--s-light:#999999">}},</span><span style="--s-dark:#666666;--s-light:#999999"> [</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#C98A7D;--s-light:#B56959">a</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> '</span><span style="--s-dark:#C98A7D;--s-light:#B56959">b</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#666666;--s-light:#999999">])</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0"> // è¾“å‡º1</span></span></code></pre><p>å›åˆ°<code>map</code>å‡½æ•°ä¸­</p><p>æ¥ç€<code>var _keys = !isArrayLike(obj) &amp;amp;&amp;amp; keys(obj)</code></p><p>å½“ä¼ å…¥çš„æ˜¯å¯¹è±¡çš„æ˜¯å¦ï¼Œ<code>!isArrayLike(obj)</code>ä¼šæ˜¯<code>true</code>ï¼Œå°±ä¼šæ‰§è¡Œ<code>keys</code>å‡½æ•°æ¥è¿”å›<code>obj</code>çš„å±æ€§åæ•°ç»„ï¼Œæ ¹æ®<code>&amp;amp;&amp;amp;</code>è¿™ä¸ªæ“ä½œç¬¦ï¼Œä¼šè¿”å›åé¢çš„å€¼ï¼Œä¹Ÿå°±æ˜¯<code>obj</code>çš„å±æ€§åæ•°ç»„ã€‚</p><p>ç„¶å<code>length = (_keys || obj).length</code>ï¼Œå¦‚æœå‰ä¸€æ­¥ç¡®å®šæ˜¯å¯¹è±¡äº†ï¼Œå°±ä¼šè·å–<code>_keys</code>æ•°ç»„çš„é•¿åº¦ï¼Œå¦åˆ™å°±æ˜¯æ­£å¸¸çš„è·å–<code>obj</code>æ•°ç»„çš„é•¿åº¦</p><p>æ¥ç€ä¾¿æ˜¯å¾ˆç®€å•çš„éå†è°ƒç”¨å¹¶å­˜å‚¨ç»“æœï¼Œæœ€åè¿”å›è¿™ä¸ªç»“æœã€‚</p><h2 id="filter" tabindex="-1"><code>filter</code> <a class="header-anchor" href="#filter">ğŸ”—</a></h2><p>å†…ç½®çš„<code>filter</code>çš„è¯­æ³•</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#666666;--s-light:#999999">[].</span><span style="--s-dark:#80A665;--s-light:#59873A">filter</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#CB7676;--s-light:#AB5959">function</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">v</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> i</span><span style="--s-dark:#666666;--s-light:#999999"> ,</span><span style="--s-dark:#BD976A;--s-light:#B07D48">a</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  // å‡½æ•°å†…å®¹</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">},</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> window</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0">/*æŒ‡å®šä¸Šä¸‹æ–‡*/</span><span style="--s-dark:#666666;--s-light:#999999">)</span></span></code></pre><p>åœ¨Underscoreä¸­ä¸º</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">_</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">filter</span><span style="--s-dark:#666666;--s-light:#999999">([],</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> function</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">v</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> i</span><span style="--s-dark:#666666;--s-light:#999999"> ,</span><span style="--s-dark:#BD976A;--s-light:#B07D48">a</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  // å‡½æ•°å†…å®¹</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">},</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> window</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0">/*æŒ‡å®šä¸Šä¸‹æ–‡*/</span><span style="--s-dark:#666666;--s-light:#999999">)</span></span></code></pre><p>å®ƒçš„æºä»£ç ä¸º</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">export</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> function</span><span style="--s-dark:#80A665;--s-light:#59873A"> filter</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">obj</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> predicate</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> context</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">  var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">results</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#666666;--s-light:#999999"> [];</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  predicate</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#80A665;--s-light:#59873A"> cb</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">predicate</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> context</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">  each</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">obj</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> function</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">value</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> index</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> list</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">    if</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#80A665;--s-light:#59873A">predicate</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">value</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> index</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> list</span><span style="--s-dark:#666666;--s-light:#999999">))</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> results</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">push</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">value</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  });</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  return</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> results</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span></code></pre><p>è¿˜æ˜¯å…ˆé€šè¿‡<code>cb</code>æ¥å¤„ç†å›è°ƒå’Œä¸Šä¸‹æ–‡ã€‚</p><p>ç„¶åå¯ä»¥çœ‹åˆ°ï¼Œå†…éƒ¨ä½¿ç”¨äº†<code>each</code>å‡½æ•°æ¥éå†ï¼Œåœ¨å‡½æ•°ä½“å†…æ‰§è¡Œä¼ è¿›æ¥çš„åˆ¤å®šå‡½æ•°<code>predicate</code>æ¥éªŒè¯æ˜¯å¦åŠ å…¥ç»“æœé›†ä¸­ã€‚</p><h2 id="find" tabindex="-1"><code>find</code> <a class="header-anchor" href="#find">ğŸ”—</a></h2><p>å†…ç½®çš„<code>find</code>çš„è¯­æ³•</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#666666;--s-light:#999999">[].</span><span style="--s-dark:#80A665;--s-light:#59873A">find</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#CB7676;--s-light:#AB5959">function</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">v</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> i</span><span style="--s-dark:#666666;--s-light:#999999"> ,</span><span style="--s-dark:#BD976A;--s-light:#B07D48">a</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  // å‡½æ•°å†…å®¹</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">},</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> window</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0">/*æŒ‡å®šä¸Šä¸‹æ–‡*/</span><span style="--s-dark:#666666;--s-light:#999999">)</span></span></code></pre><p>åœ¨Underscoreä¸­</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">_</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">find</span><span style="--s-dark:#666666;--s-light:#999999">([],</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> function</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">v</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> i</span><span style="--s-dark:#666666;--s-light:#999999"> ,</span><span style="--s-dark:#BD976A;--s-light:#B07D48">a</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  // å‡½æ•°å†…å®¹</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">},</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> window</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0">/*æŒ‡å®šä¸Šä¸‹æ–‡*/</span><span style="--s-dark:#666666;--s-light:#999999">)</span></span></code></pre><p>å®ƒçš„æºä»£ç ä¸º</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">export</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> function</span><span style="--s-dark:#80A665;--s-light:#59873A"> find</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">obj</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> predicate</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> context</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">  var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">keyFinder</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#80A665;--s-light:#59873A"> isArrayLike</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">obj</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> ? </span><span style="--s-dark:#BD976A;--s-light:#B07D48">findIndex</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> : </span><span style="--s-dark:#BD976A;--s-light:#B07D48">findKey</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">  var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">key</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#80A665;--s-light:#59873A"> keyFinder</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">obj</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> predicate</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> context</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  if</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">key</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> !==</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> void</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 0</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> &amp;&amp;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> key</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> !==</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> -</span><span style="--s-dark:#4C9A91;--s-light:#2F798A">1</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> return</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> obj</span><span style="--s-dark:#666666;--s-light:#999999">[</span><span style="--s-dark:#BD976A;--s-light:#B07D48">key</span><span style="--s-dark:#666666;--s-light:#999999">];</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span></code></pre><p>ä¸»è¦çš„å®ç°åœ¨<code>findIndex</code>å’Œ<code>findKey</code>ä¸­ï¼Œä¸€ä¸ªæ˜¯å¯»æ‰¾æ•°ç»„ç´¢å¼•ï¼Œä¸€ä¸ªæ˜¯å¯»æ‰¾å¯¹è±¡çš„é”®ã€‚</p><p><code>findIndex</code></p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">export</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">findIndex</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#80A665;--s-light:#59873A"> createPredicateIndexFinder</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#4C9A91;--s-light:#2F798A">1</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">function</span><span style="--s-dark:#80A665;--s-light:#59873A"> createPredicateIndexFinder</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">dir</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  return</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> function</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">array</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> predicate</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> context</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">    predicate</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#80A665;--s-light:#59873A"> cb</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">predicate</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> context</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">    var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">length</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#80A665;--s-light:#59873A"> getLength</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">array</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">    var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">index</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> dir</span><span style="--s-dark:#666666;--s-light:#999999"> &gt;</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 0</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> ? </span><span style="--s-dark:#4C9A91;--s-light:#2F798A">0</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> : </span><span style="--s-dark:#BD976A;--s-light:#B07D48">length</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> - </span><span style="--s-dark:#4C9A91;--s-light:#2F798A">1</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">    for</span><span style="--s-dark:#666666;--s-light:#999999"> (;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> index</span><span style="--s-dark:#666666;--s-light:#999999"> &gt;=</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 0</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> &amp;&amp;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> index</span><span style="--s-dark:#666666;--s-light:#999999"> &lt;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> length</span><span style="--s-dark:#666666;--s-light:#999999">;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> index</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> +=</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> dir</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">      if</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#80A665;--s-light:#59873A">predicate</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">array</span><span style="--s-dark:#666666;--s-light:#999999">[</span><span style="--s-dark:#BD976A;--s-light:#B07D48">index</span><span style="--s-dark:#666666;--s-light:#999999">],</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> index</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> array</span><span style="--s-dark:#666666;--s-light:#999999">))</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> return</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> index</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">    }</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">    return</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> -</span><span style="--s-dark:#4C9A91;--s-light:#2F798A">1</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  };</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span></code></pre><p>é€šè¿‡<code>createPredicateIndexFinder</code>æ¥åˆ›å»ºå›è°ƒå‡½æ•°</p><p>é¦–å…ˆæ˜¯<code>cb</code>å¤„ç†ä¸Šä¸‹æ–‡ï¼Œç„¶å<code>getLength</code>è·å–æ•°ç»„é•¿åº¦ï¼Œç„¶åé€šè¿‡å…¥å‚<code>dir</code>æ¥ç¡®å®šéå†çš„æ–¹å‘ï¼Œç„¶åå°±æ˜¯éå†æ¥æ‰¾åˆ°ç¬¬ä¸€ä¸ªç¡®å®šçš„ç´¢å¼•ï¼Œæ‰¾ä¸åˆ°å°±è¿”å›<code>-1</code>.</p><p>è¿™é‡Œè¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯å¾ªç¯ä½“ä¸­çš„<code>index += dir</code>ï¼Œè¿™é‡Œä¼ å…¥<code>1</code>å°±æ˜¯æ­£å‘æŸ¥æ‰¾ï¼Œä¼ å…¥<code>-1</code>å°±æ˜¯åå‘æŸ¥æ‰¾ï¼Œä¹Ÿå¯ä»¥çœ‹åˆ°æºç ä¸­ä¹Ÿæœ‰ä¸€ä¸ª<code>findLastIndex</code></p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">export</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">findLastIndex</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#80A665;--s-light:#59873A"> createPredicateIndexFinder</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#CB7676;--s-light:#AB5959">-</span><span style="--s-dark:#4C9A91;--s-light:#2F798A">1</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span></code></pre><p><code>findKey</code></p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">export</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> function</span><span style="--s-dark:#80A665;--s-light:#59873A"> findKey</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">obj</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> predicate</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> context</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  predicate</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#80A665;--s-light:#59873A"> cb</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">predicate</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> context</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">  var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">_keys</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#80A665;--s-light:#59873A"> keys</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">obj</span><span style="--s-dark:#666666;--s-light:#999999">),</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> key</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  for</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#CB7676;--s-light:#AB5959">var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">i</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 0</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> length</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> _keys</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#B8A965;--s-light:#998418">length</span><span style="--s-dark:#666666;--s-light:#999999">;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> i</span><span style="--s-dark:#666666;--s-light:#999999"> &lt;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> length</span><span style="--s-dark:#666666;--s-light:#999999">;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> i</span><span style="--s-dark:#CB7676;--s-light:#AB5959">++</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">    key</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> _keys</span><span style="--s-dark:#666666;--s-light:#999999">[</span><span style="--s-dark:#BD976A;--s-light:#B07D48">i</span><span style="--s-dark:#666666;--s-light:#999999">];</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">    if</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#80A665;--s-light:#59873A">predicate</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">obj</span><span style="--s-dark:#666666;--s-light:#999999">[</span><span style="--s-dark:#BD976A;--s-light:#B07D48">key</span><span style="--s-dark:#666666;--s-light:#999999">],</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> key</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> obj</span><span style="--s-dark:#666666;--s-light:#999999">))</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> return</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> key</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  }</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span></code></pre><p>è€æ ·å­ï¼Œè¿˜æ˜¯<code>cb</code>å¤„ç†ä¸Šä¸‹æ–‡ï¼Œä¹‹åç”¨<code>keys</code>æ¥è·å–å¯¹è±¡çš„æ‰€æœ‰çš„é”®ï¼Œç„¶åå°±æ˜¯ç®€å•çš„éå†äº†ã€‚</p><p>å‡½æ•°é»˜è®¤å°±æ˜¯è¿”å›<code>undefined</code>ï¼Œ<code>findKey</code>æ²¡æ‰¾åˆ°è¿”å›<code>undefined</code>ï¼Œ<code>void 0</code>è¿”å›çš„å°±æ˜¯<code>undefined</code>ï¼Œ<code>findIndex</code>æ²¡æ‰¾åˆ°å°±è¿”å›<code>-1</code>ï¼Œæ‰€ä»¥æœ€ååˆ¤æ–­æ˜¯å¦æ‰¾åˆ°äº†ï¼Œæ‰¾åˆ°äº†å°±é€šè¿‡<code>obj[property]</code>è¿™ç§å½¢å¼è¿”å›ã€‚å¦‚æœæ²¡æ‰¾åˆ°ï¼Œæ²¡æœ‰è¿”å›ï¼Œå‡½æ•°é»˜è®¤çš„è¿”å›å°±æ˜¯<code>undefined</code>ã€‚</p><h2 id="reduce-reduceright" tabindex="-1"><code>reduce</code> &amp;&amp; <code>reduceRight</code> <a class="header-anchor" href="#reduce-reduceright">ğŸ”—</a></h2><p>å†…ç½®çš„<code>reduce</code>è¯­æ³•</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#666666;--s-light:#999999">[].</span><span style="--s-dark:#80A665;--s-light:#59873A">reduce</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#CB7676;--s-light:#AB5959">function</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">pre</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> cur</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> i</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> a</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  // å‡½æ•°å†…å®¹</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">},</span><span style="--s-dark:#666666;--s-light:#999999"> {}</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0"> /*åˆå§‹å€¼*/</span><span style="--s-dark:#666666;--s-light:#999999"> )</span></span></code></pre><p>åœ¨Underscoreä¸­ä¸º</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">_</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">reduce</span><span style="--s-dark:#666666;--s-light:#999999">([],</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> function</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">pre</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> cur</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> i</span><span style="--s-dark:#666666;--s-light:#999999"> ,</span><span style="--s-dark:#BD976A;--s-light:#B07D48">a</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  // å‡½æ•°å†…å®¹</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">},</span><span style="--s-dark:#666666;--s-light:#999999"> {}</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0"> /*åˆå§‹å€¼*/</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> window</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0">/*æŒ‡å®šä¸Šä¸‹æ–‡*/</span><span style="--s-dark:#666666;--s-light:#999999">)</span></span></code></pre><p>è¿™é‡Œå¯èƒ½æœ‰äººæ²¡æ€ä¹ˆä½¿ç”¨è¿‡è¿™ä¸ªå‡½æ•°ï¼Œå¯¹è¿™ä¸ªå‡½æ•°çš„ä½œç”¨ä¸æ˜¯ç‰¹åˆ«æ¸…æ¥šã€‚MDNä¸Šå¯¹<code>reduce</code>çš„è§£é‡Šä¸º</p><blockquote><p>reduce() æ–¹æ³•å¯¹æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œä¸€ä¸ªç”±æ‚¨æä¾›çš„reducerå‡½æ•°(å‡åºæ‰§è¡Œ)ï¼Œå°†å…¶ç»“æœæ±‡æ€»ä¸ºå•ä¸ªè¿”å›å€¼ã€‚</p></blockquote><p>å¯ä»¥ä¸¾ä¸ªä¾‹å­</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#666666;--s-light:#999999">[</span><span style="--s-dark:#4C9A91;--s-light:#2F798A">1</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 2</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 3</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 4</span><span style="--s-dark:#666666;--s-light:#999999">].</span><span style="--s-dark:#80A665;--s-light:#59873A">reduce</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#CB7676;--s-light:#AB5959">function</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">pre</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> cur</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> i</span><span style="--s-dark:#666666;--s-light:#999999"> ,</span><span style="--s-dark:#BD976A;--s-light:#B07D48">a</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  return</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> pre</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> +</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> cur</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">},</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 0</span><span style="--s-dark:#666666;--s-light:#999999">);</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  // è¾“å‡º 10ï¼Œå³å¯¹æ•°ç»„çš„é¡¹è¿›è¡Œç´¯åŠ </span></span></code></pre><p>è¿™ä¸ªå‡½æ•°çš„å››ä¸ªå‚æ•°åˆ†åˆ«ä¸ºï¼š</p><ul><li><code>pre</code> ç´¯åŠ å™¨</li><li><code>cur</code> å½“å‰å€¼</li><li><code>i</code> å½“å‰å€¼åœ¨æ•°ç»„å†…çš„ç´¢å¼•</li><li><code>a</code> åŸæ•°ç»„</li></ul><p>å½“ä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°ä½œä¸ºèµ·å§‹å€¼æ—¶ï¼Œä¼šä»ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹éå†ï¼Œä¹Ÿå°±æ˜¯ç¬¬ä¸€æ¬¡éå†æ—¶ï¼Œ<code>pre = 0</code>ï¼Œ<code>cur = 1</code> è€Œå¦‚æœä¸ä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°ï¼Œåˆ™å‡½æ•°ç¬¬ä¸€é¡¹ä¼šä½œä¸ºèµ·å§‹å€¼ï¼Œè·³è¿‡ç¬¬ä¸€é¡¹ï¼Œä»ç¬¬äºŒé¡¹å¼€å§‹éå†ï¼Œä¹Ÿå°±æ˜¯ç¬¬ä¸€æ¬¡éå†æ—¶ï¼Œ<code>pre = 1</code>ï¼Œ<code>cur = 2</code></p><p>å®ƒçš„æºç ä¸º</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">export</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">reduce</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#80A665;--s-light:#59873A"> createReduce</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#4C9A91;--s-light:#2F798A">1</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span></code></pre><p>è¿™é‡Œä¸»è¦çš„å®ç°æ˜¯é€šè¿‡<code>createReduce</code>è¿™ä¸ªå‡½æ•°ï¼Œæ‰€ä»¥æ‰¾åˆ°è¿™ä¸ªå‡½æ•°</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">function</span><span style="--s-dark:#80A665;--s-light:#59873A"> createReduce</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">dir</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  // Wrap code that reassigns argument variables in a separate function than</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  // the one that accesses `arguments.length` to avoid a perf hit. (#1991)</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">  var </span><span style="--s-dark:#80A665;--s-light:#59873A">reducer</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> function</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">obj</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> iteratee</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> memo</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> initial</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">    var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">_keys</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> !</span><span style="--s-dark:#80A665;--s-light:#59873A">isArrayLike</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">obj</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> &amp;&amp; </span><span style="--s-dark:#80A665;--s-light:#59873A">keys</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">obj</span><span style="--s-dark:#666666;--s-light:#999999">),</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">        length</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">_keys</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> || </span><span style="--s-dark:#BD976A;--s-light:#B07D48">obj</span><span style="--s-dark:#666666;--s-light:#999999">).</span><span style="--s-dark:#B8A965;--s-light:#998418">length</span><span style="--s-dark:#666666;--s-light:#999999">,</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">        index</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> dir</span><span style="--s-dark:#666666;--s-light:#999999"> &gt;</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 0</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> ? </span><span style="--s-dark:#4C9A91;--s-light:#2F798A">0</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> : </span><span style="--s-dark:#BD976A;--s-light:#B07D48">length</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> - </span><span style="--s-dark:#4C9A91;--s-light:#2F798A">1</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">    if</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#CB7676;--s-light:#AB5959">!</span><span style="--s-dark:#BD976A;--s-light:#B07D48">initial</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">      memo</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> obj</span><span style="--s-dark:#666666;--s-light:#999999">[</span><span style="--s-dark:#BD976A;--s-light:#B07D48">_keys</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> ? </span><span style="--s-dark:#BD976A;--s-light:#B07D48">_keys</span><span style="--s-dark:#666666;--s-light:#999999">[</span><span style="--s-dark:#BD976A;--s-light:#B07D48">index</span><span style="--s-dark:#666666;--s-light:#999999">]</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> : </span><span style="--s-dark:#BD976A;--s-light:#B07D48">index</span><span style="--s-dark:#666666;--s-light:#999999">];</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">      index</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> += </span><span style="--s-dark:#BD976A;--s-light:#B07D48">dir</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">    }</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">    for</span><span style="--s-dark:#666666;--s-light:#999999"> (;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> index</span><span style="--s-dark:#666666;--s-light:#999999"> &gt;=</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 0</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> &amp;&amp; </span><span style="--s-dark:#BD976A;--s-light:#B07D48">index</span><span style="--s-dark:#666666;--s-light:#999999"> &lt;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> length</span><span style="--s-dark:#666666;--s-light:#999999">;</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> index</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> += </span><span style="--s-dark:#BD976A;--s-light:#B07D48">dir</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">      var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">currentKey</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> _keys</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> ? </span><span style="--s-dark:#BD976A;--s-light:#B07D48">_keys</span><span style="--s-dark:#666666;--s-light:#999999">[</span><span style="--s-dark:#BD976A;--s-light:#B07D48">index</span><span style="--s-dark:#666666;--s-light:#999999">]</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> : </span><span style="--s-dark:#BD976A;--s-light:#B07D48">index</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">      memo</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#80A665;--s-light:#59873A"> iteratee</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">memo</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> obj</span><span style="--s-dark:#666666;--s-light:#999999">[</span><span style="--s-dark:#BD976A;--s-light:#B07D48">currentKey</span><span style="--s-dark:#666666;--s-light:#999999">],</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> currentKey</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> obj</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">    }</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">    return</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> memo</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  };</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  return</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> function</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">obj</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> iteratee</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> memo</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> context</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">    var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">initial</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#C99076;--s-light:#A65E2B"> arguments</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#B8A965;--s-light:#998418">length</span><span style="--s-dark:#666666;--s-light:#999999"> &gt;=</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 3</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">    return</span><span style="--s-dark:#80A665;--s-light:#59873A"> reducer</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">obj</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#80A665;--s-light:#59873A"> optimizeCb</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">iteratee</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> context</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 4</span><span style="--s-dark:#666666;--s-light:#999999">),</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> memo</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> initial</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  };</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span></code></pre><p>è¿™ä¸ªå‡½æ•°å†…éƒ¨åˆå®šä¹‰äº†ä¸€ä¸ª<code>reducer</code>å‡½æ•°ï¼Œè¿”å›äº†ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›çš„å‡½æ•°ä¸­è°ƒç”¨äº†è¿™ä¸ª<code>reducer</code>ï¼ˆå¹¶ä¸”é€šè¿‡<code>optimizeCb</code>åšäº†ä¸Šä¸‹æ–‡ç»‘å®šï¼‰ã€‚</p><p><code>reducer</code>åšçš„äº‹æƒ…å…¶å®å¾ˆç®€å•ï¼Œå°±æ˜¯æ ¹æ®<code>dir</code>å’Œ<code>initial</code>å˜é‡æ¥ç¡®å®šæ•´ä¸ªè¿è¡Œè¿‡ç¨‹ã€‚</p><p>å…¶ä¸­<code>dir</code>æ§åˆ¶äº†éå†çš„æ–¹å‘ã€‚</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">index</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> dir</span><span style="--s-dark:#666666;--s-light:#999999"> &gt;</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 0</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> ?</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 0</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> :</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> length</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> -</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 1</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span></code></pre><p>è€Œ<code>initial</code>æ§åˆ¶äº†æ˜¯å¦è®¾ç½®ç¬¬ä¸€ä¸ªç´¢å¼•å€¼ä½œä¸ºé»˜è®¤å€¼ã€‚</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">// æ— åˆå§‹å€¼</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">if</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#CB7676;--s-light:#AB5959">!</span><span style="--s-dark:#BD976A;--s-light:#B07D48">initial</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  // memoè®¾ä¸ºç¬¬ä¸€ä¸ªå€¼</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  memo</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> obj</span><span style="--s-dark:#666666;--s-light:#999999">[</span><span style="--s-dark:#BD976A;--s-light:#B07D48">_keys</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> ?</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> _keys</span><span style="--s-dark:#666666;--s-light:#999999">[</span><span style="--s-dark:#BD976A;--s-light:#B07D48">index</span><span style="--s-dark:#666666;--s-light:#999999">]</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> :</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> index</span><span style="--s-dark:#666666;--s-light:#999999">];</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  // è·³è¿‡è¯¥ç´¢å¼•</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  index</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> +=</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> dir</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span></code></pre><p><code>createReduce</code>è¿”å›çš„å‡½æ•°ä¸­ï¼Œä½¿ç”¨äº†å‡½æ•°å†…éƒ¨çš„å˜é‡<code>arguments</code>çš„<code>length</code>å±æ€§æ¥ç¡®å®šç”¨æˆ·æ˜¯å¦ä¼ å…¥äº†memoå˜é‡ã€‚</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">initial</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#C99076;--s-light:#A65E2B"> arguments</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#B8A965;--s-light:#998418">length</span><span style="--s-dark:#666666;--s-light:#999999"> &gt;=</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 3</span><span style="--s-dark:#666666;--s-light:#999999">;</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0"> // å°äº3ï¼Œæ²¡æœ‰ä¼ å…¥memoåˆå§‹å€¼ï¼Œinitialä¸ºfalseï¼Œåä¹‹ä¸ºtrue</span></span></code></pre><p>é€šè¿‡<code>createReduce</code>ï¼Œä¹Ÿå¯ä»¥ç”Ÿæˆä¸€ä¸ªä»å³å¾€å·¦çš„<code>reduce</code>ï¼Œä¹Ÿå°±æ˜¯<code>reduceRight</code></p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">export</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">reduceRight</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#80A665;--s-light:#59873A"> createReduce</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#CB7676;--s-light:#AB5959">-</span><span style="--s-dark:#4C9A91;--s-light:#2F798A">1</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span></code></pre><h1 id="åè®°" tabindex="-1">åè®° <a class="header-anchor" href="#åè®°">ğŸ”—</a></h1><p>æ„Ÿè§‰Underscoreä¸­å¤§é‡ä½¿ç”¨äº†è¿”å›å‡½æ•°çš„å½¢å¼æ¥ç»„ç»‡ä»£ç ï¼Œçœ‹èµ·æ¥è·³æ¥è·³å»çš„ï¼Œå¾—è€å¿ƒä¸‹æ¥è¯»ã€‚</p><p>æš‚æ—¶å°±å†™è¿™ä¹ˆå¤šï¼Œå­¦ä¸€å­¦ä¸€äº›åŸºæœ¬çš„<code>Polyfill</code>ä¹Ÿæ˜¯ç›¸å½“ä¸é”™çš„ã€‚åç»­åº”è¯¥ä¼šæ¥ç€æ›´æ–°~</p></div><!--]--></div><div flex="~ wrap" text="[var(--mygo-c-text-2)]" mt-8="" gap-4="" justify-center=""><!--[--><div>#JavaScript</div><div>#Vue</div><!--]--></div><!--]--></div></div><div class="mujika-card mujika-card--hover mujika-card--border" w-full="" overflow-auto="" data-v-7ac4adc5=""><div class="p-4 lg:p-8" data-v-7ac4adc5=""><!--[--><div flex="~ wrap" gap-4=""><a href="/e245b6a116a9" class="" truncate="" title="Reduxæºç è§£è¯» - createStoreç¯‡"><i class="i-mi:chevron-left" mr-1=""></i><span>Reduxæºç è§£è¯» - createStoreç¯‡</span></a><a href="/bb8ab1e3fdfa" class="" ml-auto="" truncate="" title="Vue3.0Sharedä¸­é‚£äº›å°è€Œç¾çš„å‡½æ•°"><span>Vue3.0Sharedä¸­é‚£äº›å°è€Œç¾çš„å‡½æ•°</span><i class="i-mi:chevron-right" ml-1=""></i></a></div><!--]--></div></div><!--[--><div class="mujika-card mujika-card--hover mujika-card--border" w-full="" overflow-auto="" data-v-a68bfdd1="" data-v-7ac4adc5=""><div class="p-4 lg:p-8" data-v-7ac4adc5=""><!--[--><div flex="" gap-4="" items-start="" data-v-a68bfdd1=""><div flex="~ shrink-0" bg="[var(--mygo-c-bg-alt)]" rounded-6px="" w-60px="" aspect-ratio-square="" items-center="" justify-center="" data-v-a68bfdd1=""><i text-40px="" text="[#999]" class="i-fa6-regular:user" data-v-a68bfdd1=""></i></div><div flex="~ col grow" gap-2="" lg:gap-4="" data-v-a68bfdd1=""><textarea disabled="" placeholder="ä¸‡æ°´åƒå±±æ€»æ˜¯æƒ…ï¼Œç•™ä¸‹è¯„è®ºè¡Œä¸è¡Œ" class="mujika-git-talk-textarea" un-disabled:cursor-not-allowed="" p-2="" outline-0="" lg:p-4="" data-v-a68bfdd1=""></textarea><div flex="" items-start="" data-v-a68bfdd1=""><a target="_blank" href="https://guides.github.com/features/mastering-markdown/" data-v-a68bfdd1="">æ”¯æŒ Markdown è¯­æ³•</a><div ml-auto="" data-v-a68bfdd1=""></div><!----><button class="mujika-button" data-v-a68bfdd1="" data-v-15330f5f=""><!--[--><!--]--><!--[-->ç‚¹å‡»ç™»å½•<!--]--></button></div></div></div><!--]--></div></div><!----><!--]--></div><aside class="mujika-aside" w="280px" flex="~ col shrink-0" top-2="" sticky="" max-h="[calc(100vh-var(--spacing)*4)]" un-hidden="" lg:block=""><div class="mujika-card mujika-card--hover mujika-card--border" w-full="" overflow-auto="" flex="~ col" gap-4="" data-v-7ac4adc5=""><!--[--><div p="4 b-0" flex-shrink-0="">æ–‡ç« ç›®å½•</div><div p="4 t-0" flex-grow="" min-h-0="" overflow-y-auto=""><!----></div><!--]--></div></aside><!--teleport start--><!--teleport end--></div></main><footer class="mujika-footer" px-4="" py-6="" bg="[var(--mygo-c-bg)]" flex="~ col shrink-0" gap-2="" items-center="" data-v-d1d7a153=""><div flex="" items-center="" data-v-d1d7a153=""><span data-v-d1d7a153="">Power by&nbsp;</span><i class="i-logos:vue" data-v-d1d7a153=""></i><span data-v-d1d7a153="">&nbsp;+&nbsp;</span><i class="i-logos:vitejs" data-v-d1d7a153=""></i></div><div text-center="" data-v-d1d7a153=""><a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" data-v-d1d7a153="">CC BY-NC-SA 4.0 </a>2021 - PRESENT Â© Dedicatus545</div><div text="[var(--mygo-c-text-2)]" text-center="" data-v-d1d7a153="">å¦‚æœæˆ‘å’Œç‹—ä¸€æ ·æœ‰å°¾å·´çš„è¯ï¼Œä¸€å®šä¼šè—ä¸ä½è¿™ä»½å–œæ‚¦ï¼Œè€Œå°¾å·´ä¸€ç›´æ‘‡ä¸ªä¸åœå§ã€‚</div></footer></div></div></body></html>