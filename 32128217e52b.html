<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><link rel="icon" type="image/svg+xml" href="/logo.svg"><meta name="viewport" content="width=device-width,initial-scale=1"><title>ä¸ºnaive-uiæ·»åŠ å…¨å±€çš„messageå‡½æ•°</title><script type="importmap">{"imports":{"vue":"https://esm.sh/vue","vue-router":"https://esm.sh/vue-router","pinia":"https://esm.sh/pinia","@vueuse/core":"https://esm.sh/@vueuse/core","@vueuse/components":"https://esm.sh/@vueuse/components","@vueuse/router":"https://esm.sh/@vueuse/router","date-fns":"https://esm.sh/date-fns","nprogress":"https://esm.sh/nprogress","octokit":"https://esm.sh/octokit","pinia-plugin-persistedstate":"https://esm.sh/pinia-plugin-persistedstate","vue-router-better-scroller":"https://esm.sh/vue-router-better-scroller"}}</script><script type="module" async="" crossorigin="" src="/assets/app-2Hgo7EZs.js"></script><link rel="stylesheet" crossorigin="" href="/assets/app-BmBo8YJO.css"><link rel="modulepreload" crossorigin="" href="/assets/ä¸ºnaive-uiæ·»åŠ å…¨å±€çš„messageå‡½æ•°-D08JwVhw.js"><meta property="og:title" content="ä¸ºnaive-uiæ·»åŠ å…¨å±€çš„messageå‡½æ•°"><meta name="twitter:title" content="ä¸ºnaive-uiæ·»åŠ å…¨å±€çš„messageå‡½æ•°"></head><body><div id="app" data-server-rendered="true"><div class="mujika" min-h="100vh" flex="~ col" bg="[--mygo-c-bg-alt]"><header class="mujika-header" flex="~ shrink-0" px-4="" h="70px" bg="[var(--mygo-c-bg)]" items-center="" justify-between="" data-v-c1947e25=""><a href="/" class="" flex="" gap-4="" items-center="" data-v-c1947e25=""><img w="40px" aspect-ratio-square="" src="/logo.svg" alt="æ‹ã®æ­Œçš„logo" data-v-c1947e25=""></a><div data-v-c1947e25=""><div p-1="" flex="" gap-1="" rounded="6px" bg="[var(--mygo-c-bg-alt)]" data-v-c1947e25=""><!--[--><div leading="[1]" px-2="" py-1="" cursor-pointer="" rounded="6px" class="bg-[var(--mygo-c-bg)]" title="è‡ªåŠ¨" data-v-c1947e25=""><!--[-->Auto<!--]--></div><div leading="[1]" px-2="" py-1="" cursor-pointer="" rounded="6px" class="" title="æ—¥é—´" data-v-c1947e25=""><!--[--><i class="i-ri:sun-line" data-v-c1947e25=""></i><!--]--></div><div leading="[1]" px-2="" py-1="" cursor-pointer="" rounded="6px" class="" title="å¤œé—´" data-v-c1947e25=""><!--[--><i class="i-ri:moon-line" data-v-c1947e25=""></i><!--]--></div><!--]--></div></div></header><main class="mujika-home" flex="grow" mx="auto" min-h="0" p-2="" w-full="" un-2xl:w="[calc(96rem-var(--spacing)*2)]"><div flex="" gap-2="" items-start=""><div flex="~ col grow" gap-2="" min-w-0=""><div class="mujika-card mujika-card--hover mujika-card--border" w-full="" overflow-auto="" data-v-7ac4adc5=""><div class="p-4 lg:p-8" data-v-7ac4adc5=""><!--[--><div flex="~ col" mb-4="" gap-4=""><h1 break-all="" text="34px center">ä¸ºnaive-uiæ·»åŠ å…¨å±€çš„messageå‡½æ•°</h1></div><div flex="~ col" gap-3="" text="[var(--mygo-c-text-2)]"><div flex="~ wrap" gap-3="" justify-center=""><!----><div flex="" gap-1="" items-center=""><i class="i-fa6-regular:calendar"></i><span un-hidden="" lg:inline="">å‘è¡¨äº</span><span pl-1="">2021-12-14 11:01</span></div><div flex="" gap-1="" items-center=""><i class="i-fa6-regular:calendar-check"></i><span un-hidden="" lg:inline="">æ›´æ–°äº</span><span pl-1="">2023-02-13 18:28</span></div><div flex="" gap-1="" items-center=""><i class="i-fa6-regular:folder"></i><span un-hidden="" lg:inline="">åˆ†ç±»äº</span><!--[--><a pl-1="" href="/category/ç¼–ç¨‹">ç¼–ç¨‹</a><!--]--></div></div><div flex="~ wrap" gap-3="" justify-center=""><div flex="" gap-1="" items-center=""><i class="i-fa6-regular:file-word"></i><span un-hidden="" lg:inline="">æ€»å­—æ•°</span><span pl-1="">1.2K</span></div><div flex="" gap-1="" items-center=""><i class="i-fa6-regular:clock"></i><span un-hidden="" lg:inline="">é˜…è¯»æ—¶é•¿ â‰ˆ</span><span pl-1="">5 åˆ†é’Ÿ</span></div></div></div><div class="mujika-doc-content"><!--[--><div class="kan-doc"><h1 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€">ğŸ”—</a></h1><p>ä¸º <code>naive-ui</code> æ·»åŠ å…¨å±€çš„ <code>message</code> ï¼Œ<code>notification</code> ï¼Œ <code>loaddingBar</code> ï¼Œ <code>dialog</code> å‡½æ•°</p><p>å¯¹äº <code>Vue3</code> ï¼Œä¸ªäººéå¸¸å–œæ¬¢ <code>naive-ui</code> è¿™ä¸ª <code>ui</code> åº“ï¼Œå¹¶ä¸”ä¹Ÿåœ¨å·¥ä½œä¸­æŠŠå®ƒåº”ç”¨åˆ°äº†ç›¸åº”çš„é¡¹ç›®ä¹‹ä¸­</p><p>è™½ç„¶å®ƒçœ‹èµ·æ¥æœ‰ç‚¹åƒ <code>ant-design</code> ï¼Œ ä¸è¿‡å›½å†…çš„ <code>ui</code> åº“å¤§ä½“éƒ½æ˜¯ä»¥è“è‰²ä¸ºä¸»è‰²ï¼Œçœ‹èµ·æ¥å°±æœ‰äº›å®¡ç¾ç–²åŠ³äº†</p><h1 id="æ­£æ–‡" tabindex="-1">æ­£æ–‡ <a class="header-anchor" href="#æ­£æ–‡">ğŸ”—</a></h1><p>æˆ‘ä»¬éƒ½çŸ¥é“ï¼Œåƒ <code>element-ui</code> ï¼Œ <code>ant-design</code> ç­‰éƒ½æœ‰ä¸€äº›é€šç”¨çš„æ–¹æ³•å¯ä¾›å…¨å±€ä½¿ç”¨ï¼Œå³å¯ä»¥è„±ç¦»ç»„ä»¶çš„ä¸Šä¸‹æ–‡</p><p>æ¯”å¦‚ <code>element-plus</code> çš„</p><ul><li><a href="https://element-plus.gitee.io/zh-CN/component/message.html" target="_blank" rel="noopener">ElMessage</a></li><li><a href="https://element-plus.gitee.io/zh-CN/component/notification.html" target="_blank" rel="noopener">ElNotification</a></li><li><a href="https://element-plus.gitee.io/zh-CN/component/message-box.html" target="_blank" rel="noopener">ElMessageBox</a></li></ul><p>æˆ‘ä»¬å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨è¿™äº›ç»„ä»¶ï¼Œæ¯”å¦‚ <code>axios</code> çš„æ‹¦æˆªå™¨ä¸­ï¼Œæˆ–è€…è·¯ç”±å®ˆå«ï¼ˆ <code>hooks</code> ï¼‰ä¸­</p><p>è€Œåœ¨ <code>naive-ui</code> ä¸­ï¼Œä½¿ç”¨ <code>message</code> çš„æ–¹æ³•æ¯”è¾ƒç‰¹åˆ«</p><p>é¦–å…ˆæ˜¯å¿…é¡»åŒ…åœ¨ <code>n-message-provider</code> ç»„ä»¶ä¸‹</p><p>ç„¶åä½¿ç”¨ <code>useMessage</code> æ¥è·å– <code>message</code> å®ä¾‹</p><p><code>App.vue</code></p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-html"><span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F">script</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> setup</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> lang</span><span style="--s-dark:#666666;--s-light:#999999">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">ts</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">import</span><span style="--s-dark:#666666;--s-light:#999999"> {</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> NMessageProvider</span><span style="--s-dark:#666666;--s-light:#999999"> }</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> from</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> '</span><span style="--s-dark:#C98A7D;--s-light:#B56959">naive-ui</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">import</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> Content</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> from</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> '</span><span style="--s-dark:#C98A7D;--s-light:#B56959">./Content.vue</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F">script</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F">template</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  &lt;</span><span style="--s-dark:#FDAEB7;--s-light:#B31D28">NMessageProvider</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">    &lt;</span><span style="--s-dark:#FDAEB7;--s-light:#B31D28">Content</span><span style="--s-dark:#666666;--s-light:#999999">&gt;&lt;/</span><span style="--s-dark:#FDAEB7;--s-light:#B31D28">Content</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  &lt;/</span><span style="--s-dark:#FDAEB7;--s-light:#B31D28">NMessageProvider</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F">template</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span></code></pre><p><code>Content.vue</code></p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-html"><span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F">script</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> setup</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> lang</span><span style="--s-dark:#666666;--s-light:#999999">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">ts</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">import</span><span style="--s-dark:#666666;--s-light:#999999"> {</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> useMessage</span><span style="--s-dark:#666666;--s-light:#999999"> }</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> from</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> '</span><span style="--s-dark:#C98A7D;--s-light:#B56959">naive-ui</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> message</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#80A665;--s-light:#59873A"> useMessage</span><span style="--s-dark:#666666;--s-light:#999999">();</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">const</span><span style="--s-dark:#80A665;--s-light:#59873A"> open</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#666666;--s-light:#999999"> ()</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  message</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">info</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#C98A7D;--s-light:#B56959">æˆ‘æ˜¯æ¶ˆæ¯</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#666666;--s-light:#999999">)</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F">script</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F">template</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  &lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F">button</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> @click</span><span style="--s-dark:#666666;--s-light:#999999">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">open</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34">æ‰“å¼€message</span><span style="--s-dark:#666666;--s-light:#999999">&lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F">button</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F">template</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span></code></pre><p>çœ‹èµ·æ¥æœ‰ç‚¹å¤æ‚</p><p>æˆ‘å»ç¿»äº†ä¸‹å†å²çš„ <code>issues</code> è®°å½•ï¼Œ å‘ç°æœ‰äººå·²ç»æœ‰æè¿‡ç›¸å…³çš„ <code>issue</code> äº†</p><ul><li><a href="https://github.com/TuSimple/naive-ui/issues/1333" target="_blank" rel="noopener">issue#1333 å¸Œæœ›æ–°å¢ä»¥ä¸‹ç»„ä»¶çš„ä¸€äº›æ–¹æ³•</a></li><li><a href="https://github.com/TuSimple/naive-ui/issues/771" target="_blank" rel="noopener">issue#771 Loading Barå’ŒMessageå…¨å±€ä½¿ç”¨</a></li><li><a href="https://github.com/TuSimple/naive-ui/issues/665" target="_blank" rel="noopener">issue#665 Messageç»„ä»¶åœ¨setupå¤–è°ƒç”¨æ–¹å¼</a></li></ul><p>ä¸è¿‡ä½œè€…ä¼¼ä¹å¹¶ä¸æƒ³æä¾›è¿™æ ·çš„ <code>api</code> ï¼Œä½œè€…åœ¨ç¬¬ä¸‰ä¸ª <code>issue</code> ä¸­å›å¤äº†</p><blockquote><p>If you must need to render a message before app is ready, you need to render a app outside current app and set message api globally. However remember message is a part of your app. You canâ€™t operate a phone before you turn it on.</p></blockquote><p>æ„æ€æ˜¯å¦‚æœç¡®å®éœ€è¦åœ¨ <code>app</code> è¢«æŒ‚åœ¨å‰è°ƒç”¨ <code>message</code>ï¼Œ é‚£ä¹ˆéœ€è¦åœ¨åŸ <code>app</code> å¤–éƒ¨é¢å¤–æ¸²æŸ“ä¸€ä¸ª <code>app</code> ï¼Œå¹¶ä¸”æŠŠç›¸å…³çš„ <code>api</code> å…¨å±€åŒ–</p><p>ä½œè€…çš„æ„æ€å¾ˆç®€å•ï¼Œæƒ³ç”¨ <code>message</code>ï¼Œ å°±æ˜¯å¾— <code>app</code> æŒ‚è½½äº†æ‰èƒ½ç”¨ï¼Œå› ä¸º <code>message</code> å°±æ˜¯æ•´ä¸ª <code>app</code> çš„ä¸€ä¸ªéƒ¨åˆ†</p><p>ä½œè€…è¿˜ä¸¾äº†ä¸ªä¾‹å­ï¼š<strong>ä½ ä¸èƒ½åœ¨æ‰‹æœºè¿˜æ²¡å¼€æœºçš„æ—¶å€™å°±æ“ä½œå®ƒ</strong></p><p>æ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦æŒ‰ç…§ä½œè€…è¯´çš„æ¥è¿›è¡Œ <code>hack</code></p><h2 id="å¹²æ‰-usexxx" tabindex="-1">å¹²æ‰ <code>useXXX</code> <a class="header-anchor" href="#å¹²æ‰-usexxx">ğŸ”—</a></h2><p>æ¯æ¬¡éƒ½è¦ <code>useMessage</code> å¾ˆéº»çƒ¦ï¼Œé‚£ä¹ˆå¦‚ä½•æ‰èƒ½å¯¼å‡ºä¸€ä¸ªå…¨å±€å˜é‡å‘¢ï¼Ÿ</p><p>å¯ä»¥é€šè¿‡æ·»åŠ ä¸€ä¸ªç©ºçš„ç»„ä»¶æ¥æŠŠ <code>message</code> æå‡åˆ°å…¨å±€</p><p><code>MessageInjectWindow.vue</code></p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-html"><span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F">script</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> setup</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> lang</span><span style="--s-dark:#666666;--s-light:#999999">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">ts</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">import</span><span style="--s-dark:#666666;--s-light:#999999"> {</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> useMessage</span><span style="--s-dark:#666666;--s-light:#999999"> }</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> from</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">naive-ui</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">window</span><span style="--s-dark:#666666;--s-light:#999999">[</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">$message</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">]</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#80A665;--s-light:#59873A"> useMessage</span><span style="--s-dark:#666666;--s-light:#999999">();</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F">script</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F">template</span><span style="--s-dark:#666666;--s-light:#999999">&gt;&lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F">template</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span></code></pre><p>ç„¶åæˆ‘ä»¬æŠŠä¸Šé¢çš„ç»„ä»¶æ”¾åˆ° <code>App.vue</code> ä¸­</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-html"><span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F">script</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> setup</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> lang</span><span style="--s-dark:#666666;--s-light:#999999">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">ts</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">import</span><span style="--s-dark:#666666;--s-light:#999999"> {</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> NMessageProvider</span><span style="--s-dark:#666666;--s-light:#999999"> }</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> from</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> '</span><span style="--s-dark:#C98A7D;--s-light:#B56959">naive-ui</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">import</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> Content</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> from</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> '</span><span style="--s-dark:#C98A7D;--s-light:#B56959">./Content.vue</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F">script</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F">template</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  &lt;</span><span style="--s-dark:#FDAEB7;--s-light:#B31D28">NMessageProvider</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">    &lt;</span><span style="--s-dark:#FDAEB7;--s-light:#B31D28">MessageInjectWindow</span><span style="--s-dark:#666666;--s-light:#999999">&gt;&lt;/</span><span style="--s-dark:#FDAEB7;--s-light:#B31D28">MessageInjectWindow</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">    &lt;</span><span style="--s-dark:#FDAEB7;--s-light:#B31D28">Content</span><span style="--s-dark:#666666;--s-light:#999999">&gt;&lt;/</span><span style="--s-dark:#FDAEB7;--s-light:#B31D28">Content</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  &lt;/</span><span style="--s-dark:#FDAEB7;--s-light:#B31D28">NMessageProvider</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F">template</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span></code></pre><p>ç„¶ååœ¨ <code>Content.vue</code> ä¸­å°±å¯ä»¥ä½¿ç”¨ <code>$message</code> äº†</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-html"><span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F">script</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> setup</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> lang</span><span style="--s-dark:#666666;--s-light:#999999">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">ts</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">const</span><span style="--s-dark:#80A665;--s-light:#59873A"> open</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#666666;--s-light:#999999"> ()</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  $message</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">info</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#C98A7D;--s-light:#B56959">æˆ‘æ˜¯æ¶ˆæ¯</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F">script</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F">template</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  &lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F">button</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> @click</span><span style="--s-dark:#666666;--s-light:#999999">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">open</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34">æ‰“å¼€message</span><span style="--s-dark:#666666;--s-light:#999999">&lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F">button</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F">template</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span></code></pre><p>ä¸è¿‡åœ¨ä»£ç çš„è¿‡ç¨‹ä¸­æ€»è§‰å¾—ç¼ºäº†ç‚¹å•¥ï¼Ÿæ²¡é”™ï¼Œå°±æ˜¯ä»£ç æç¤º</p><p>è¿™æ˜¯ä¸€ä¸ª <code>ts</code> çš„é¡¹ç›®ï¼Œé€šè¿‡æ·»åŠ  <code>d.ts</code> å¯ä»¥ä¸º <code>$message</code> èµ‹äºˆç±»å‹æç¤º</p><p>åˆ›å»º <code>global.d.ts</code> ç„¶åè¾“å…¥ä»¥ä¸‹å†…å®¹</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-ts"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">declare</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> global</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  // å¯ä»¥ç›´æ¥ä½¿ç”¨ $message</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">  const </span><span style="--s-dark:#BD976A;--s-light:#B07D48">$message</span><span style="--s-dark:#666666;--s-light:#999999">: </span><span style="--s-dark:#CB7676;--s-light:#AB5959">import</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">naive-ui</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">).</span><span style="--s-dark:#5DA994;--s-light:#2E8F82">MessageApi</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">  const </span><span style="--s-dark:#BD976A;--s-light:#B07D48">$dialog</span><span style="--s-dark:#666666;--s-light:#999999">: </span><span style="--s-dark:#CB7676;--s-light:#AB5959">import</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">naive-ui</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">).</span><span style="--s-dark:#5DA994;--s-light:#2E8F82">DialogApi</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">  const </span><span style="--s-dark:#BD976A;--s-light:#B07D48">$notification</span><span style="--s-dark:#666666;--s-light:#999999">: </span><span style="--s-dark:#CB7676;--s-light:#AB5959">import</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">naive-ui</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">).</span><span style="--s-dark:#5DA994;--s-light:#2E8F82">NotificationApi</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">  const </span><span style="--s-dark:#BD976A;--s-light:#B07D48">$loadingBar</span><span style="--s-dark:#666666;--s-light:#999999">: </span><span style="--s-dark:#CB7676;--s-light:#AB5959">import</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">naive-ui</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">).</span><span style="--s-dark:#5DA994;--s-light:#2E8F82">LoadingBarApi</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">  interface</span><span style="--s-dark:#5DA994;--s-light:#2E8F82"> Window</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">    // æŒ‚è½½éœ€è¦çš„ç±»å‹æç¤º</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">    // æˆ–è€…é€šè¿‡ window.$message ä½¿ç”¨</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">    $message</span><span style="--s-dark:#666666;--s-light:#999999">: </span><span style="--s-dark:#CB7676;--s-light:#AB5959">import</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">naive-ui</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">).</span><span style="--s-dark:#5DA994;--s-light:#2E8F82">MessageApi</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">    $dialog</span><span style="--s-dark:#666666;--s-light:#999999">: </span><span style="--s-dark:#CB7676;--s-light:#AB5959">import</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">naive-ui</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">).</span><span style="--s-dark:#5DA994;--s-light:#2E8F82">DialogApi</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">    $notification</span><span style="--s-dark:#666666;--s-light:#999999">: </span><span style="--s-dark:#CB7676;--s-light:#AB5959">import</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">naive-ui</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">).</span><span style="--s-dark:#5DA994;--s-light:#2E8F82">NotificationApi</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">    $loadingBar</span><span style="--s-dark:#666666;--s-light:#999999">: </span><span style="--s-dark:#CB7676;--s-light:#AB5959">import</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">naive-ui</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">).</span><span style="--s-dark:#5DA994;--s-light:#2E8F82">LoadingBarApi</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  }</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">export</span><span style="--s-dark:#666666;--s-light:#999999"> {};</span></span></code></pre><p>åœ¨ <code>Window</code> ä¸‹å®šä¹‰æ˜¯å› ä¸ºéœ€è¦é€šè¿‡ <code>window['$xxx'] = useXXX()</code> æ¥æŒ‚è½½ï¼Œ ä¸åŠ çš„è¯åœ¨ <code>ts</code> é¡¹ç›®ä¸‹å°±ä¼šæœ‰çº¢çº¿</p><p>åœ¨ <code>global</code> ä¸‹å®šä¹‰æ„å‘³ç€é™¤äº† <code>window['$xxx']</code> æ¥è°ƒç”¨ä¹‹å¤–ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨ <code>$xxx</code> ç›´æ¥ä½¿ç”¨</p><p>è¿™æ ·å­ä»£ç å°±æœ‰ä¸é”™çš„æç¤ºäº†</p><p><a data-fancybox="doc-gallery" href="https://s4.ax1x.com/2021/12/14/ovKKRH.png" target="_blank" rel="noopener noreferrer"><img src="https://s4.ax1x.com/2021/12/14/ovKKRH.png" alt=""></a></p><p><a data-fancybox="doc-gallery" href="https://s4.ax1x.com/2021/12/14/ovKUJg.png" target="_blank" rel="noopener noreferrer"><img src="https://s4.ax1x.com/2021/12/14/ovKUJg.png" alt=""></a></p><h2 id="å¹²æ‰åªèƒ½åœ¨appå†…ä½¿ç”¨" tabindex="-1">å¹²æ‰åªèƒ½åœ¨appå†…ä½¿ç”¨ <a class="header-anchor" href="#å¹²æ‰åªèƒ½åœ¨appå†…ä½¿ç”¨">ğŸ”—</a></h2><p>è™½ç„¶æˆ‘ä»¬å·²ç»æå–äº†å…¨å±€çš„ <code>api</code> äº†ï¼Œä½†æ˜¯ä¾ç„¶æ— æ³•åœ¨æ²¡æœ‰ <code>app</code> çš„ä¸Šä¸‹æ–‡ä¸‹ä½¿ç”¨</p><p>æ¯”å¦‚å¦‚æœæˆ‘æƒ³åœ¨ <code>mount</code> ä¹‹å‰è°ƒç”¨ä¸€ä¸ªæ¥å£ï¼Œè¿™ä¸ªæ¥å£è¦ä½¿ç”¨ <code>message</code> æ¥æ˜¾ç¤ºä¸€äº›ä¿¡æ¯ï¼Œé‚£ä¹ˆå°±ä¼šæŠ¥é”™</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-ts"><span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">import</span><span style="--s-dark:#666666;--s-light:#999999"> {</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> createApp</span><span style="--s-dark:#666666;--s-light:#999999"> }</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> from</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">vue</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">import</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> App</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> from</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">./App.vue</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">const </span><span style="--s-dark:#80A665;--s-light:#59873A">bootstrap</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> async </span><span style="--s-dark:#666666;--s-light:#999999">()</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  // æƒ³åœ¨æŒ‚åœ¨å‰è°ƒç”¨ä¸€ä¸ªæ¥å£</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  await</span><span style="--s-dark:#B8A965;--s-light:#998418"> Promise</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">resolve</span><span style="--s-dark:#666666;--s-light:#999999">().</span><span style="--s-dark:#80A665;--s-light:#59873A">then</span><span style="--s-dark:#666666;--s-light:#999999">(()</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">    $message</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">info</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">hello</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  });</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  // æ¥å£å®Œæˆå†æŒ‚è½½ app</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">  createApp</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">App</span><span style="--s-dark:#666666;--s-light:#999999">).</span><span style="--s-dark:#80A665;--s-light:#59873A">mount</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">#app</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">};</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">bootstrap</span><span style="--s-dark:#666666;--s-light:#999999">();</span></span></code></pre><p>ç»“æœæ˜¾è€Œæ˜“è§ï¼ŒæŠ¥é”™</p><p><a data-fancybox="doc-gallery" href="https://s4.ax1x.com/2021/12/14/ovMdAK.png" target="_blank" rel="noopener noreferrer"><img src="https://s4.ax1x.com/2021/12/14/ovMdAK.png" alt=""></a></p><p>åŸå› å¾ˆç®€å•ï¼Œéƒ½æ²¡æŒ‚è½½ <code>app</code> ï¼Œé‚£ä¹ˆ <code>MessageInjectWindow.vue</code> çš„ <code>setup</code> ä¸ä¼šæ‰§è¡Œï¼Œè‡ªç„¶ä¹Ÿå°±æ²¡æœ‰æ³¨å…¥ <code>message</code> å®ä¾‹äº†</p><p>é‚£ä¹ˆè¿™æ—¶å€™å°±éœ€è¦æ„å»ºä¸€ä¸ªç©ºçš„ <code>app</code> ï¼Œåœ¨ç›®æ ‡ <code>app</code> ä¹‹å‰æŒ‚è½½ï¼Œç„¶åå…¨å±€åŒ– <code>api</code></p><p>åˆ›å»º AppProvider.vue</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-html"><span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F">script</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> lang</span><span style="--s-dark:#666666;--s-light:#999999">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">ts</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> setup</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">import</span><span style="--s-dark:#666666;--s-light:#999999"> {</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> NMessageProvider</span><span style="--s-dark:#666666;--s-light:#999999"> }</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> from</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">naive-ui</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">import</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> MessageInjectWindow</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> from</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">./MessageInjectWindow.vue</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F">script</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F">template</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  &lt;</span><span style="--s-dark:#FDAEB7;--s-light:#B31D28">NMessageProvider</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">    &lt;</span><span style="--s-dark:#FDAEB7;--s-light:#B31D28">MessageInjectWindow</span><span style="--s-dark:#666666;--s-light:#999999">&gt;&lt;/</span><span style="--s-dark:#FDAEB7;--s-light:#B31D28">MessageInjectWindow</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  &lt;/</span><span style="--s-dark:#FDAEB7;--s-light:#B31D28">NMessageProvider</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">&lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F">template</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span></span></code></pre><p>å†…å®¹åŸºæœ¬ä¸€æ ·ï¼Œä¸è¿‡æ²¡æœ‰ <code>Content.vue</code> ï¼Œå› ä¸ºä½œä¸ºä¸€ä¸ªç©ºçš„ app ï¼Œä¸éœ€è¦æ¸²æŸ“çœŸæ­£çš„å†…å®¹èŠ‚ç‚¹</p><p>ç„¶åä¿®æ”¹ <code>main.ts</code></p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-ts"><span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">import</span><span style="--s-dark:#666666;--s-light:#999999"> {</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> createApp</span><span style="--s-dark:#666666;--s-light:#999999"> }</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> from</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">vue</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">import</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> App</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> from</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">./App.vue</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">import</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> AppProvider</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> from</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> '</span><span style="--s-dark:#C98A7D;--s-light:#B56959">./AppProvider.vue</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">const </span><span style="--s-dark:#80A665;--s-light:#59873A">bootstrap</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> async </span><span style="--s-dark:#666666;--s-light:#999999">()</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  // æŒ‚è½½ä¸€ä¸ªç©ºçš„ app</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">  createApp</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">AppProvider</span><span style="--s-dark:#666666;--s-light:#999999">).</span><span style="--s-dark:#80A665;--s-light:#59873A">mount</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#C98A7D;--s-light:#B56959">#app-provider</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  // æƒ³åœ¨æŒ‚åœ¨å‰è°ƒç”¨ä¸€ä¸ªæ¥å£</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  await</span><span style="--s-dark:#B8A965;--s-light:#998418"> Promise</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">resolve</span><span style="--s-dark:#666666;--s-light:#999999">().</span><span style="--s-dark:#80A665;--s-light:#59873A">then</span><span style="--s-dark:#666666;--s-light:#999999">(()</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">    $message</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">info</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">hello</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  });</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  // æ¥å£å®Œæˆå†æŒ‚è½½ app</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">  createApp</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">App</span><span style="--s-dark:#666666;--s-light:#999999">).</span><span style="--s-dark:#80A665;--s-light:#59873A">mount</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">#app</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">};</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">bootstrap</span><span style="--s-dark:#666666;--s-light:#999999">();</span></span></code></pre><p>ç„¶åå°±å¯ä»¥æ„‰å¿«çš„ä½¿ç”¨å…¨å±€çš„ <code>$message</code> äº†</p><h1 id="åè®°" tabindex="-1">åè®° <a class="header-anchor" href="#åè®°">ğŸ”—</a></h1><p>è¿™ä¸ªæ–¹æ³•æ˜¯ä» <code>Naive-ui-admin</code> ä»¥åŠç›¸å…³çš„ <code>issues</code> æŸ¥æ‰¾åˆ°çš„</p><p>ç›®å‰å·²ç»ç”¨åœ¨å…¬å¸çš„é¡¹ç›®ä¸­</p><p>å¦‚æœåªæ˜¯è®¨åŒæ¯æ¬¡è°ƒç”¨æ¥å£æ—¶å†™ <code>useXXX</code></p><p><code>issues</code> ä¸­ä¹Ÿæœ‰ç”¨æˆ·æè®®å¯ä»¥å°è£…é€šç”¨çš„ <code>useRequest</code></p><p>åæ­£ï¼Œèåœé’èœå„æœ‰æ‰€çˆ±å§~</p></div><!--]--></div><div flex="~ wrap" text="[var(--mygo-c-text-2)]" mt-8="" gap-4="" justify-center=""><!--[--><div>#JavaScript</div><div>#Vue</div><div>#Naive-UI</div><!--]--></div><!--]--></div></div><div class="mujika-card mujika-card--hover mujika-card--border" w-full="" overflow-auto="" data-v-7ac4adc5=""><div class="p-4 lg:p-8" data-v-7ac4adc5=""><!--[--><div flex="~ wrap" gap-4=""><a href="/167c74b8906d" class="" truncate="" title="2021 - 2022 çµ‚ã‚ã‚‰ãªã„æ­Œ"><i class="i-mi:chevron-left" mr-1=""></i><span>2021 - 2022 çµ‚ã‚ã‚‰ãªã„æ­Œ</span></a><a href="/af69021a3b0b" class="" ml-auto="" truncate="" title="ä½¿ç”¨pnpmæ¥ä»£æ›¿yarn1è§£å†³å¹»å½±ä¾èµ–"><span>ä½¿ç”¨pnpmæ¥ä»£æ›¿yarn1è§£å†³å¹»å½±ä¾èµ–</span><i class="i-mi:chevron-right" ml-1=""></i></a></div><!--]--></div></div><!--[--><div class="mujika-card mujika-card--hover mujika-card--border" w-full="" overflow-auto="" data-v-557c65bc="" data-v-7ac4adc5=""><div class="p-4 lg:p-8" data-v-7ac4adc5=""><!--[--><div flex="" gap-4="" items-start="" data-v-557c65bc=""><div flex="~ shrink-0" bg="[var(--mygo-c-bg-alt)]" rounded-6px="" w-60px="" aspect-ratio-square="" items-center="" justify-center="" data-v-557c65bc=""><i text-40px="" text="[#999]" class="i-fa6-regular:user" data-v-557c65bc=""></i></div><div flex="~ col grow" gap-2="" lg:gap-4="" data-v-557c65bc=""><textarea disabled="" placeholder="ä¸‡æ°´åƒå±±æ€»æ˜¯æƒ…ï¼Œç•™ä¸‹è¯„è®ºè¡Œä¸è¡Œ" class="mujika-git-talk-textarea" un-disabled:cursor-not-allowed="" p-2="" outline-0="" h-4em="" lg:p-4="" lg:h-8em="" data-v-557c65bc=""></textarea><div flex="" items-start="" data-v-557c65bc=""><a target="_blank" href="https://guides.github.com/features/mastering-markdown/" data-v-557c65bc="">æ”¯æŒ Markdown è¯­æ³•</a><div ml-auto="" data-v-557c65bc=""></div><!----><button class="mujika-button" data-v-557c65bc="" data-v-15330f5f=""><!--[--><!--]--><!--[-->ç‚¹å‡»ç™»å½•<!--]--></button></div></div></div><!--]--></div></div><div class="mujika-card mujika-card--hover mujika-card--border" w-full="" overflow-auto="" data-v-557c65bc="" data-v-7ac4adc5=""><div class="p-4 lg:p-8" data-v-7ac4adc5=""><!--[--><div flex="" items-center="" justify-center="" data-v-557c65bc="">å“¦å‘¢è¯¥ï¼Œå¦‚æœæ²¡æœ‰è¯„è®ºçš„è¯ï¼Œç“¦è¾¾è¥¿...</div><!----><!--]--></div></div><!--]--></div><aside class="mujika-aside" w="280px" flex="~ col shrink-0" top-2="" sticky="" max-h="[calc(100vh-var(--spacing)*4)]" un-hidden="" lg:block=""><div class="mujika-card mujika-card--hover mujika-card--border" w-full="" overflow-auto="" flex="~ col" gap-4="" data-v-7ac4adc5=""><!--[--><div p="4 b-0" flex-shrink-0="">æ–‡ç« ç›®å½•</div><div p="4 t-0" flex-grow="" min-h-0="" overflow-y-auto=""><!----></div><!--]--></div></aside><!--teleport start--><!--teleport end--></div></main><footer class="mujika-footer" px-4="" py-6="" bg="[var(--mygo-c-bg)]" flex="~ col shrink-0" gap-2="" items-center="" data-v-689781c6=""><div flex="" items-center="" data-v-689781c6=""><span data-v-689781c6="">ç”±&nbsp;</span><i class="i-logos:vue" data-v-689781c6=""></i><span data-v-689781c6="">&nbsp;+&nbsp;</span><i class="i-logos:vitejs" data-v-689781c6=""></i><span data-v-689781c6="">&nbsp;é©±åŠ¨</span></div><div text-center="" data-v-689781c6=""><a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" data-v-689781c6="">CC BY-NC-SA 4.0 </a>2021 - PRESENT Â© Dedicatus545</div><div text="[var(--mygo-c-text-2)]" text-center="" data-v-689781c6="">å¦‚æœæˆ‘å’Œç‹—ä¸€æ ·æœ‰å°¾å·´çš„è¯ï¼Œä¸€å®šä¼šè—ä¸ä½è¿™ä»½å–œæ‚¦ï¼Œè€Œå°¾å·´ä¸€ç›´æ‘‡ä¸ªä¸åœå§ã€‚ - ã€Šç§’é€Ÿäº”å˜ç±³ã€‹</div></footer></div></div></body></html>