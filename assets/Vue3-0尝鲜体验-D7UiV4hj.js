import{createElementBlock as t,openBlock as n,createStaticVNode as p}from"vue";import{c as e}from"./app-CGnJzz9B.js";import"nprogress";import"pinia-plugin-persistedstate";import"vue-router";import"vue-router-better-scroller";import"@vueuse/core";import"@vueuse/components";import"@vueuse/router";import"octokit";import"pinia";import"date-fns";const l={class:"kan-doc"},f="Vue3.0尝鲜体验",V=1591930416,b="2020-06-12T10:53:36.000Z",q="2023-02-13T18:28:43.000Z",E=["JavaScript","Vue"],x=["编程"],F=3168,j=[{property:"og:title",content:"Vue3.0尝鲜体验"},{name:"twitter:title",content:"Vue3.0尝鲜体验"}],S={__name:"Vue3-0尝鲜体验",setup(d,{expose:a}){return a({frontmatter:{title:"Vue3.0尝鲜体验",key:1591930416,date:"2020-06-12T10:53:36.000Z",updated:"2023-02-13T18:28:43.000Z",tags:["JavaScript","Vue"],categories:["编程"],wordCount:3168,meta:[{property:"og:title",content:"Vue3.0尝鲜体验"},{name:"twitter:title",content:"Vue3.0尝鲜体验"}]}}),e({title:"Vue3.0尝鲜体验",meta:[{property:"og:title",content:"Vue3.0尝鲜体验"},{name:"twitter:title",content:"Vue3.0尝鲜体验"}]}),(o,s)=>(n(),t("div",l,s[0]||(s[0]=[p(`<p><code>Vue3.0</code>尝鲜体验。</p><p>这次来体验下<code>Vue3.0</code>。</p><p>首先我们去<code>vue3.0</code>的<code>github</code>仓库：</p><blockquote><p><a href="https://github.com/vuejs/vue-next" target="_blank" rel="noopener">vue-next</a></p></blockquote><h1 id="区别" tabindex="-1">区别 <a class="header-anchor" href="#区别">🔗</a></h1><p>最近也在看<code>Vue3.0</code>中关于<code>reactivity</code>包的源码，感觉挺新奇的。</p><p><code>Vue2</code>对属性改变的监听用的是<code>Object.defineProperty</code>，需要遍历每个对象的每个属性。</p><p>而<code>Vue3</code>用的是<code>Proxy</code>，监听的为整个对象，而且对数组的支持更好了。</p><p>最最最重要的是<code>Vue3</code>完全由<code>TypeScript</code>开发，而且也支持通过<code>TypeScript</code>来编写组件，相当的香。</p><p>在<code>Vue2</code>的时候，整个项目完全使用了<code>JavaScript</code>进行编写，为了能够支持静态类型检查，而引入了<code>flowjs</code>，不使用<code>TypeScript</code>的原因是重构成本过高，而<code>flowjs</code>可以平滑的引入的项目中。</p><p>不过随着<code>TypeScript</code>的发展，<code>VSCode</code>的出现，以及<code>ECMAScript</code>规范的不断更新，<code>Vue3</code>就基本完全使用<code>TypeScript</code>来编写了。</p><p>想当初使用<code>React</code>也是因为支持<code>TypeScript</code>（复杂<code>TypeScript</code>用法我也不会 🤣，只能写写基本类型定义这个样子。</p><h1 id="编译-vue-next-项目生成库文件" tabindex="-1">编译 Vue-next 项目生成库文件 <a class="header-anchor" href="#编译-vue-next-项目生成库文件">🔗</a></h1><p>电脑必须有<code>node</code>的环境，如果不知道有没有的可以在<code>cmd</code>输入<code>node -v</code>来查看。</p><p>先把项目给克隆到本地，我们的目的就是用过构建这个项目来生成一个<code>Vue.js</code>的<code>js</code>库，然后使用它。</p><ul><li><code>git clone https://github.com/vuejs/vue-next.git</code></li></ul><p>然后我们就在本地有了一份<code>Vue-next</code>的源码。</p><p><img src="https://i.loli.net/2020/04/23/HXRDImixUVLZnCN.png" alt=""></p><p><code>IDE</code>推荐用<code>idea</code>或者<code>VSCode</code>，使用起来非常舒服。</p><p>在控制台输入以下命令：</p><ul><li><code>yarn</code></li></ul><p>此命令用于安装依赖，注意是在文件夹的内部使用，如果没有安装<code>yarn</code>，可以使用<code>npm install</code>来执行。</p><p>接着我们可以看看<code>package.json</code>里面的<code>script</code>命令。</p><p><img src="https://i.loli.net/2020/04/23/MBp8Lzfma7i1r5P.png" alt=""></p><p>发现有挺多的，但是我们只要运行第一条命令即可，<code>dev</code>命令会在<code>package/vue/dist</code>下生成<code>vue.global.js</code>的文件，这个就是开发环境下的文件了。</p><ul><li><code>yarn dev</code></li></ul><p>没有<code>yarn</code>的，运行<code>npm run dev</code>的效果是一样的。</p><p>这样就得到了一个可以通过<code>script</code>引入的库文件了。</p><h1 id="新建项目来使用生成的库文件" tabindex="-1">新建项目来使用生成的库文件 <a class="header-anchor" href="#新建项目来使用生成的库文件">🔗</a></h1><p>新建一个文件夹，我这边的命名为<code>vue3</code>，我们的目的是搭建一个<code>node</code>的服务器来，然后通过<code>html</code>文件来引入<code>js</code>库来使用<code>Vue3</code>。</p><ul><li>运行<code>npm init</code>来初始化项目；</li><li>把生成的库文件找个地方放起来，我这边是建了个<code>lib</code>的文件夹；</li><li>建个<code>html</code>文件夹来存放我们的 html 文件。</li></ul><p>上面做完后，目录大致和下面一样：</p><p><img src="https://i.loli.net/2020/04/23/41MGQiaWznsPXAK.png" alt=""></p><p>有<code>node_modules</code>文件夹是因为使用了一些依赖，下面讲。</p><p>接下来使用<code>Koa</code>来搭建一个静态的服务器。</p><p>先引入依赖：</p><ul><li>运行<code>yarn add koa</code>或者<code>npm install koa</code>；</li><li>运行<code>yarn add koa-static</code>或者<code>npm install koa-static</code>。</li></ul><p><code>koa</code>是一个<code>node</code>平台的<code>web</code>框架，使用了<code>async</code>和<code>await</code>的语法，挺不错的。</p><p>但是我们基本用不到这些语法，因为我们主要是当作静态资源服务器，只要简单的配置就可以使用。</p><p><code>koa-static</code>用于处理静态资源。</p><p>我们在项目的根目录下建立全局入口文件<code>index.js</code>。</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff;" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">// 导入依赖</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> Koa</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#80A665;--s-light:#59873A;"> require</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">koa</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">);</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> KoaStatic</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#80A665;--s-light:#59873A;"> require</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">koa-static</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">);</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> path</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#80A665;--s-light:#59873A;"> require</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">path</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">);</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">// 新建一个app</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> app</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> new</span><span style="--s-dark:#80A665;--s-light:#59873A;"> Koa</span><span style="--s-dark:#666666;--s-light:#999999;">();</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">// 获取当前项目的路径并通koa-static生成一个中间件</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> home</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#80A665;--s-light:#59873A;"> KoaStatic</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">path</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">join</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">__dirname</span><span style="--s-dark:#666666;--s-light:#999999;">));</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">// 使用中间件</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">app</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">use</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">home</span><span style="--s-dark:#666666;--s-light:#999999;">);</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">// 监听端口</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">app</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">listen</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#4C9A91;--s-light:#2F798A;">3030</span><span style="--s-dark:#666666;--s-light:#999999;">,</span><span style="--s-dark:#666666;--s-light:#999999;"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">err</span><span style="--s-dark:#666666;--s-light:#999999;">)</span><span style="--s-dark:#666666;--s-light:#999999;"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F;">  if</span><span style="--s-dark:#666666;--s-light:#999999;"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">err</span><span style="--s-dark:#666666;--s-light:#999999;">)</span><span style="--s-dark:#4D9375;--s-light:#1E754F;"> throw</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> err</span><span style="--s-dark:#666666;--s-light:#999999;">;</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">  console</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">log</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">服务器已经运行</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">});</span></span></code></pre><p>接下来我们在 html 文件夹下面新建一个<code>vue.html</code>来使用<code>Vue3</code>：</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff;" tabindex="0"><code class="language-html"><span class="line"><span style="--s-dark:#666666;--s-light:#999999;">&lt;!</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">DOCTYPE</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> html</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">&lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">html</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">  &lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">head</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">    &lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">title</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">vue</span><span style="--s-dark:#666666;--s-light:#999999;">&lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">title</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">  &lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">head</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">  &lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">body</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">    &lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">div</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> id</span><span style="--s-dark:#666666;--s-light:#999999;">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">app</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;&lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">div</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">    &lt;!-- 导入依赖 --&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">    &lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">script</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> type</span><span style="--s-dark:#666666;--s-light:#999999;">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">text/javascript</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> src</span><span style="--s-dark:#666666;--s-light:#999999;">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">/lib/vue.global.js</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;&lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">script</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">    &lt;!-- 编写想实验的代码 --&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">    &lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">script</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> type</span><span style="--s-dark:#666666;--s-light:#999999;">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">text/javascript</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">      const</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> reactive</span><span style="--s-dark:#666666;--s-light:#999999;"> }</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> Vue</span><span style="--s-dark:#666666;--s-light:#999999;">;</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">      const</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> component</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> Vue</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">createApp</span><span style="--s-dark:#666666;--s-light:#999999;">({</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A;">        setup</span><span style="--s-dark:#666666;--s-light:#999999;">()</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">          const</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> data</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#80A665;--s-light:#59873A;"> reactive</span><span style="--s-dark:#666666;--s-light:#999999;">({</span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418;">            msg</span><span style="--s-dark:#666666;--s-light:#999999;">:</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;"> &quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">Hello~ Vue3</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">,</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">          });</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F;">          return</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">            data</span><span style="--s-dark:#666666;--s-light:#999999;">,</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">          };</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">        },</span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418;">        template</span><span style="--s-dark:#666666;--s-light:#999999;">:</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;"> \`</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">&lt;h1&gt;{{data.msg}}&lt;/h1&gt;</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">\`</span><span style="--s-dark:#666666;--s-light:#999999;">,</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">      }).</span><span style="--s-dark:#80A665;--s-light:#59873A;">mount</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">#app</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">    &lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">script</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">  &lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">body</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">&lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">html</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span></code></pre><p>到此，静态服务器搭建完成。</p><ul><li>运行 <code>node index.js</code>；</li><li>浏览器打开 <code>localhost:3030/html/vue.html</code>就可以看到我们的网页了。</li></ul><p><img src="https://i.loli.net/2020/04/23/GDrINQAWZzU7YJK.png" alt=""></p><p>然后我们在控制台可以输入<code>component.data.msg = &amp;#39;Hello lwf&amp;#39;</code>就可以观察到视图发生变化了。</p><p><img src="https://i.loli.net/2020/04/23/UeMpwSDxZTQotlC.gif" alt=""></p><p>更多的<code>Api</code>可以看下面的网站。</p><blockquote><p><a href="https://vue-composition-api-rfc.netlify.app/api.html#template-refs" target="_blank" rel="noopener">Vue3 的 Api</a></p></blockquote>`,51)])))}};export{x as categories,b as date,S as default,V as key,j as meta,E as tags,f as title,q as updated,F as wordCount};
