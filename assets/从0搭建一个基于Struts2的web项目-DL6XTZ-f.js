import{createElementBlock as t,openBlock as l,createStaticVNode as e}from"vue";const n={class:"kan-doc"},h="从0搭建一个基于Struts2的web项目",d=1591885784,o="2020-06-11T22:29:44.000Z",c="2023-02-13T18:28:44.000Z",y=["Java"],k=3189,D={__name:"从0搭建一个基于Struts2的web项目",setup(r,{expose:a}){return a({frontmatter:{title:"从0搭建一个基于Struts2的web项目",key:1591885784,date:"2020-06-11T22:29:44.000Z",updated:"2023-02-13T18:28:44.000Z",tags:["Java"],wordCount:3189}}),(i,s)=>(l(),t("div",n,s[0]||(s[0]=[e(`<h1 id="写个帖子证明我还活着" tabindex="-1">写个帖子证明我还活着 <a class="header-anchor" href="#写个帖子证明我还活着">🔗</a></h1><p>Struts这个框架之前也是没怎么用到。 之前用的SpringMVC写过小项目，基本不用Sturts。 趁着有个可以记录的地方，写下整个项目的搭建过程</p><h2 id="工具" tabindex="-1">工具 <a class="header-anchor" href="#工具">🔗</a></h2><ul><li>IntelliJ IDEA 2019.02</li><li>Struts2</li></ul><h2 id="创建一个基本的web项目" tabindex="-1">创建一个基本的Web项目 <a class="header-anchor" href="#创建一个基本的web项目">🔗</a></h2><p>首先是基本流程 点击File -&gt; New -&gt; Project (PS: 记得勾上创建web.xml) <a data-fancybox="doc-gallery" href="https://i.loli.net/2019/10/22/5eDtVxsgRT7NWr8.png" target="_blank" rel="noopener noreferrer"><img src="https://i.loli.net/2019/10/22/5eDtVxsgRT7NWr8.png" alt="新建项目"></a></p><p>建完项目之后的目录如图所示 <a data-fancybox="doc-gallery" href="https://i.loli.net/2019/10/23/2XDvhYcFROUCqAo.png" target="_blank" rel="noopener noreferrer"><img src="https://i.loli.net/2019/10/23/2XDvhYcFROUCqAo.png" alt="项目目录"></a></p><p>设置编译后的class文件的导入路径 在web/WEB-INF目录下新建一个classes目录 <a data-fancybox="doc-gallery" href="https://i.loli.net/2019/10/23/phM4aVe3JGom5Cv.png" target="_blank" rel="noopener noreferrer"><img src="https://i.loli.net/2019/10/23/phM4aVe3JGom5Cv.png" alt="新建classes目录"></a> 建完文件夹之后按住Ctrl+Shift+Alt+S进入项目的设置（或者File -&gt; Project Structure 进入项目设置） apply之后会发现classes文件夹编程橙色证明就是设置成功了 <a data-fancybox="doc-gallery" href="https://i.loli.net/2019/10/23/kiD3vwg5yN94FCd.png" target="_blank" rel="noopener noreferrer"><img src="https://i.loli.net/2019/10/23/kiD3vwg5yN94FCd.png" alt="设置成功"></a></p><p>设置外部包的导入文件夹 在web/WEB-INF目录下新建一个lib目录 <a data-fancybox="doc-gallery" href="https://i.loli.net/2019/10/23/6FSh35tHqyDKIZl.png" target="_blank" rel="noopener noreferrer"><img src="https://i.loli.net/2019/10/23/6FSh35tHqyDKIZl.png" alt="新建一个lib目录"></a> Ctrl+Shift+Alt+S进入项目的设置 <a data-fancybox="doc-gallery" href="https://i.loli.net/2019/10/23/RUcIe9MHPGkrDdo.png" target="_blank" rel="noopener noreferrer"><img src="https://i.loli.net/2019/10/23/RUcIe9MHPGkrDdo.png" alt=""></a> 选择lib目录 <a data-fancybox="doc-gallery" href="https://i.loli.net/2019/10/23/QfPBa9jAwzbL3TE.png" target="_blank" rel="noopener noreferrer"><img src="https://i.loli.net/2019/10/23/QfPBa9jAwzbL3TE.png" alt="选择lib目录"></a> 确定之后设置为Jar目录 <a data-fancybox="doc-gallery" href="https://i.loli.net/2019/10/23/QXPRShIsMNBC5v3.png" target="_blank" rel="noopener noreferrer"><img src="https://i.loli.net/2019/10/23/QXPRShIsMNBC5v3.png" alt="设置为Jar目录"></a></p><h2 id="导入相关的包" tabindex="-1">导入相关的包 <a class="header-anchor" href="#导入相关的包">🔗</a></h2><p>先导入Struts2的包</p><blockquote><p>Struts2官网下载 <a href="https://struts.apache.org/download.cgi#struts2520" target="_blank" rel="noopener">起飞传送</a></p></blockquote><p>下载 struts-2.5.20-all.zip 这个文件 <a data-fancybox="doc-gallery" href="https://i.loli.net/2019/10/23/wgBvaR4T2oXbdHQ.png" target="_blank" rel="noopener noreferrer"><img src="https://i.loli.net/2019/10/23/wgBvaR4T2oXbdHQ.png" alt="struts-2.5.20-all.zip"></a> 解压之后 找到如图的路径就是struts2的全部jar包了 <a data-fancybox="doc-gallery" href="https://i.loli.net/2019/10/23/I8NZGXzhdBDyF1e.png" target="_blank" rel="noopener noreferrer"><img src="https://i.loli.net/2019/10/23/I8NZGXzhdBDyF1e.png" alt="struts2-jar包"></a> 当然我们不需要导入全部的jar包 有一些是和Spring相关的 有一些我也不知道干嘛的 只需要导入如图所示的包 <a data-fancybox="doc-gallery" href="https://i.loli.net/2019/10/23/xDaW4ZJGvcCjrdE.png" target="_blank" rel="noopener noreferrer"><img src="https://i.loli.net/2019/10/23/xDaW4ZJGvcCjrdE.png" alt="需要导入的包"></a></p><h1 id="编写web-xml和struts-xml" tabindex="-1">编写web.xml和struts.xml <a class="header-anchor" href="#编写web-xml和struts-xml">🔗</a></h1><h2 id="编写web-xml" tabindex="-1">编写web.xml <a class="header-anchor" href="#编写web-xml">🔗</a></h2><p>Struts最重要的就是配置他的核心过滤器</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff;" tabindex="0"><code class="language-xml"><span class="line"><span style="--s-dark:#666666;--s-light:#999999;">&lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">web-app</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> xmlns</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">http://xmlns.jcp.org/xml/ns/javaee</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">         xmlns</span><span style="--s-dark:#666666;--s-light:#999999;">:</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">xsi</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">http://www.w3.org/2001/XMLSchema-instance</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">         xsi</span><span style="--s-dark:#666666;--s-light:#999999;">:</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">schemaLocation</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">         version</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">4.0</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">     &lt;!-- 定义一个过滤器 --&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">    &lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">filter</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">        &lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">filter-name</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">struts</span><span style="--s-dark:#666666;--s-light:#999999;">&lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">filter-name</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">        &lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">filter-class</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">org.apache.struts2.dispatcher.filter.StrutsPrepareAndExecuteFilter</span><span style="--s-dark:#666666;--s-light:#999999;">&lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">filter-class</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">    &lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">filter</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">    &lt;!-- 添加过滤器的映射 --&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">    &lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">filter-mapping</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">        &lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">filter-name</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">struts</span><span style="--s-dark:#666666;--s-light:#999999;">&lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">filter-name</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">        &lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">url-pattern</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">/*</span><span style="--s-dark:#666666;--s-light:#999999;">&lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">url-pattern</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">    &lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">filter-mapping</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">&lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">web-app</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span></code></pre><p>PS：最新的struts2的核心过滤器在 <code>org.apache.struts2.dispatcher.filter.StrutsPrepareAndExecuteFilter</code> 低版本的struts的核心过滤器在 <code>org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter</code> 具体可以打开struts的<code>struts2-core-2.5.20.jar</code>包查看</p><h2 id="编写struts-xml" tabindex="-1">编写struts.xml <a class="header-anchor" href="#编写struts-xml">🔗</a></h2><p>在src下新建一个struts.xml文件</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff;" tabindex="0"><code class="language-xml"><span class="line"><span style="--s-dark:#666666;--s-light:#999999;">&lt;?</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">xml</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> version</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">1.0</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> encoding</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">UTF-8</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">?&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">&lt;!</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">DOCTYPE</span><span style="--s-dark:#C99076;--s-light:#A65E2B;"> struts</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;"> PUBLIC</span></span>
<span class="line"><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">        &quot;-//Apache Software Foundation//DTD Struts Configuration 2.5//EN&quot;</span></span>
<span class="line"><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">        &quot;http://struts.apache.org/dtds/struts-2.5.dtd&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">&lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">struts</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">&lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">struts</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span></code></pre><h1 id="启动项目" tabindex="-1">启动项目 <a class="header-anchor" href="#启动项目">🔗</a></h1><p>做完前面的步骤之后，就可以愉快的启动项目了 随便写一个Action并配置struts.xml <a data-fancybox="doc-gallery" href="https://i.loli.net/2019/10/23/Q4qI6TuyHUapgl9.png" target="_blank" rel="noopener noreferrer"><img src="https://i.loli.net/2019/10/23/Q4qI6TuyHUapgl9.png" alt=""></a></p><h1 id="其他" tabindex="-1">其他 <a class="header-anchor" href="#其他">🔗</a></h1><h2 id="控制台错误" tabindex="-1">控制台错误 <a class="header-anchor" href="#控制台错误">🔗</a></h2><p><code>ERROR StatusLogger Log4j2 could not find a logging implementation. Please add log4j-core to the classpath</code><a data-fancybox="doc-gallery" href="https://i.loli.net/2019/10/23/lKcv9LtOk1oiybm.png" target="_blank" rel="noopener noreferrer"><img src="https://i.loli.net/2019/10/23/lKcv9LtOk1oiybm.png" alt=""></a> 这个是因为没有找到记录日志的包 提示让我们导入<code>log4j-core</code>这个包 OK！百度启动</p><blockquote><p>Apache Log4j 2下载地址 <a href="https://logging.apache.org/log4j/2.x/download.html" target="_blank" rel="noopener">传送起飞</a></p></blockquote><p>下载如图所示的压缩包 <a data-fancybox="doc-gallery" href="https://i.loli.net/2019/10/23/hINyZ5FGjsgqbdr.png" target="_blank" rel="noopener noreferrer"><img src="https://i.loli.net/2019/10/23/hINyZ5FGjsgqbdr.png" alt="下载Log4j2"></a> 下载完解压找到对应的包导入错误提示就消失！ 没有错误的控制台就是令人心情舒畅！ <del>就像穿着新内裤迎接新年的第一个早晨一样</del> （雾）</p><h1 id="结束" tabindex="-1">结束 <a class="header-anchor" href="#结束">🔗</a></h1><p>到这里基本就结束了项目的创建了 接下来就是写写Action 配置Action Struts可玩性感觉还是蛮高的</p>`,30)])))}};export{o as date,D as default,d as key,y as tags,h as title,c as updated,k as wordCount};
