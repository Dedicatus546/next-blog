import{createElementBlock as n,openBlock as e,createStaticVNode as t}from"vue";import{c as l}from"./app-C4XuqRXg.js";import"nprogress";import"pinia-plugin-persistedstate";import"vue-router";import"vue-router-better-scroller";import"@vueuse/core";import"@vueuse/components";import"@vueuse/router";import"octokit";import"pinia";import"date-fns";const p={class:"kan-doc"},m="ä»¥ç°ä»£çš„æ–¹å¼åœ¨JavaScriptä¸­è¿›è¡Œæ·±å…‹éš†ï¼ˆè¯‘ï¼‰",v=["Deep Clone","JavaScript"],S=["è¯‘æ–‡"],w=1703599853,x="2023-12-26T22:10:53.000Z",E="2023-12-26T22:10:53.000Z",F=7146,_=[{property:"og:title",content:"ä»¥ç°ä»£çš„æ–¹å¼åœ¨JavaScriptä¸­è¿›è¡Œæ·±å…‹éš†ï¼ˆè¯‘ï¼‰"},{name:"twitter:title",content:"ä»¥ç°ä»£çš„æ–¹å¼åœ¨JavaScriptä¸­è¿›è¡Œæ·±å…‹éš†ï¼ˆè¯‘ï¼‰"}],q={__name:"ä»¥ç°ä»£çš„æ–¹å¼åœ¨JavaScriptä¸­è¿›è¡Œæ·±å…‹éš†ï¼ˆè¯‘ï¼‰",setup(i,{expose:a}){return a({frontmatter:{title:"ä»¥ç°ä»£çš„æ–¹å¼åœ¨JavaScriptä¸­è¿›è¡Œæ·±å…‹éš†ï¼ˆè¯‘ï¼‰",tags:["Deep Clone","JavaScript"],categories:["è¯‘æ–‡"],key:1703599853,date:"2023-12-26T22:10:53.000Z",updated:"2023-12-26T22:10:53.000Z",wordCount:7146,meta:[{property:"og:title",content:"ä»¥ç°ä»£çš„æ–¹å¼åœ¨JavaScriptä¸­è¿›è¡Œæ·±å…‹éš†ï¼ˆè¯‘ï¼‰"},{name:"twitter:title",content:"ä»¥ç°ä»£çš„æ–¹å¼åœ¨JavaScriptä¸­è¿›è¡Œæ·±å…‹éš†ï¼ˆè¯‘ï¼‰"}]}}),l({title:"ä»¥ç°ä»£çš„æ–¹å¼åœ¨JavaScriptä¸­è¿›è¡Œæ·±å…‹éš†ï¼ˆè¯‘ï¼‰",meta:[{property:"og:title",content:"ä»¥ç°ä»£çš„æ–¹å¼åœ¨JavaScriptä¸­è¿›è¡Œæ·±å…‹éš†ï¼ˆè¯‘ï¼‰"},{name:"twitter:title",content:"ä»¥ç°ä»£çš„æ–¹å¼åœ¨JavaScriptä¸­è¿›è¡Œæ·±å…‹éš†ï¼ˆè¯‘ï¼‰"}]}),(h,s)=>(e(),n("div",p,s[0]||(s[0]=[t(`<h1 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€">ğŸ”—</a></h1><p>åŸæ–‡åœ°å€ï¼š<a href="https://www.builder.io/blog/structured-cloneDeep" target="_blank" rel="noopener">Cloning Objects in JavaScript, the Modern Way</a></p><p><a data-fancybox="doc-gallery" href="https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F03f2036674724006ae64d9bc4d07ab6d?format=webp&amp;width=1600" target="_blank" rel="noopener noreferrer"><img src="https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F03f2036674724006ae64d9bc4d07ab6d?format=webp&amp;width=1600" alt=""></a></p><h1 id="æ­£æ–‡" tabindex="-1">æ­£æ–‡ <a class="header-anchor" href="#æ­£æ–‡">ğŸ”—</a></h1><p>ä½ çŸ¥é“ç°åœ¨åœ¨ JavaScript ä¸­å·²ç»æœ‰ä¸€ä¸ªåŸç”Ÿçš„æ–¹æ³•å¯ä»¥æ·±åº¦å…‹éš†å¯¹è±¡äº†å—ï¼Ÿ</p><p>æ²¡é”™ï¼Œ JavaScript çš„è¿è¡Œæ—¶å†…å»ºäº†è¿™ä¸ªæ–¹æ³•ï¼Œå°±æ˜¯ <code>structuredClone</code> ï¼š</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff;" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> calendarEvent</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418;">  title</span><span style="--s-dark:#666666;--s-light:#999999;">:</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;"> &quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">Builder.io Conf</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">,</span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418;">  date</span><span style="--s-dark:#666666;--s-light:#999999;">:</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> new</span><span style="--s-dark:#80A665;--s-light:#59873A;"> Date</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#4C9A91;--s-light:#2F798A;">123</span><span style="--s-dark:#666666;--s-light:#999999;">),</span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418;">  attendees</span><span style="--s-dark:#666666;--s-light:#999999;">:</span><span style="--s-dark:#666666;--s-light:#999999;"> [</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">Steve</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">]</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">// ğŸ˜</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> copied</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#80A665;--s-light:#59873A;"> structuredClone</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">calendarEvent</span><span style="--s-dark:#666666;--s-light:#999999;">)</span></span></code></pre><p>ä½ å¯èƒ½ç•™æ„åˆ°äº†åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä¸ä»…æ‹·è´äº†ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä¸”åŒ…å«äº†åµŒå¥—çš„æ•°ç»„ï¼Œç”šè‡³æ˜¯ä¸€ä¸ª <code>Date</code> å¯¹è±¡ã€‚</p><p>å¯¹è¿™äº›ç±»å‹çš„å…‹éš†ä¹Ÿå’Œé¢„æœŸä¸€è‡´ï¼š</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff;" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">copied</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">attendees</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0;"> // [&quot;Steve&quot;]</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">copied</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">date</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0;"> // Date: Wed Dec 31 1969 16:00:00</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">cocalendarEvent</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">attendees</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> ===</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> copied</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">attendees</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0;"> // false</span></span></code></pre><p>æ²¡é”™ï¼Œä½† <code>structuredClone</code> ä¸ä»…èƒ½æ”¯æŒä¸Šé¢çš„æƒ…å†µï¼Œè¿˜èƒ½ï¼š</p><ul><li>å…‹éš†æ— é™åµŒå¥—çš„å¯¹è±¡æˆ–è€…æ•°ç»„ã€‚</li><li>å…‹éš†å¾ªç¯å¼•ç”¨ã€‚</li><li>å…‹éš†å„ç§å„æ ·çš„ JavaScript ç±»å‹ï¼Œæ¯”å¦‚ <code>Date</code> ï¼Œ <code>Set</code> ï¼Œ <code>Map</code> ï¼Œ <code>Error</code> ï¼Œ <code>RegExp</code> ï¼Œ <code>ArrayBuffer</code> ï¼Œ <code>Blob</code> ï¼Œ <code>File</code> ï¼Œ <code>ImageData</code> <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Structured_clone_algorithm#supported_types" target="_blank" rel="noopener">ç­‰ç­‰</a>ã€‚</li><li>è½¬ç§»ä»»ä½•<a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Transferable_objects" target="_blank" rel="noopener">å¯ä»¥è½¬ç§»çš„å¯¹è±¡</a>ã€‚</li></ul><p>æ‰€ä»¥ï¼Œæ‹·è´ä¸‹é¢çš„ä¾‹å­çš„å¯¹è±¡è™½ç„¶æœ‰ç‚¹ç–¯ç‹‚ï¼Œä½† <code>structuredClone</code> å´èƒ½æŒ‰é¢„æœŸå·¥ä½œï¼š</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff;" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> kitchenSink</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418;">  set</span><span style="--s-dark:#666666;--s-light:#999999;">:</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> new</span><span style="--s-dark:#80A665;--s-light:#59873A;"> Set</span><span style="--s-dark:#666666;--s-light:#999999;">([</span><span style="--s-dark:#4C9A91;--s-light:#2F798A;">1</span><span style="--s-dark:#666666;--s-light:#999999;">,</span><span style="--s-dark:#4C9A91;--s-light:#2F798A;"> 3</span><span style="--s-dark:#666666;--s-light:#999999;">,</span><span style="--s-dark:#4C9A91;--s-light:#2F798A;"> 3</span><span style="--s-dark:#666666;--s-light:#999999;">]),</span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418;">  map</span><span style="--s-dark:#666666;--s-light:#999999;">:</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> new</span><span style="--s-dark:#80A665;--s-light:#59873A;"> Map</span><span style="--s-dark:#666666;--s-light:#999999;">([[</span><span style="--s-dark:#4C9A91;--s-light:#2F798A;">1</span><span style="--s-dark:#666666;--s-light:#999999;">,</span><span style="--s-dark:#4C9A91;--s-light:#2F798A;"> 2</span><span style="--s-dark:#666666;--s-light:#999999;">]]),</span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418;">  regex</span><span style="--s-dark:#666666;--s-light:#999999;">:</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;"> /</span><span style="--s-dark:#C4704F;--s-light:#AB5E3F;">foo</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">/</span><span style="--s-dark:#666666;--s-light:#999999;">,</span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418;">  deep</span><span style="--s-dark:#666666;--s-light:#999999;">:</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span><span style="--s-dark:#B8A965;--s-light:#998418;"> array</span><span style="--s-dark:#666666;--s-light:#999999;">:</span><span style="--s-dark:#666666;--s-light:#999999;"> [</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> new</span><span style="--s-dark:#80A665;--s-light:#59873A;"> File</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">someBlobData</span><span style="--s-dark:#666666;--s-light:#999999;">,</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;"> &#39;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">file.txt</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&#39;</span><span style="--s-dark:#666666;--s-light:#999999;">)</span><span style="--s-dark:#666666;--s-light:#999999;"> ]</span><span style="--s-dark:#666666;--s-light:#999999;"> },</span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418;">  error</span><span style="--s-dark:#666666;--s-light:#999999;">:</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> new</span><span style="--s-dark:#80A665;--s-light:#59873A;"> Error</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&#39;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">Hello!</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&#39;</span><span style="--s-dark:#666666;--s-light:#999999;">)</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">}</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">kitchenSink</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">circular</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> kitchenSink</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">// âœ… å®Œç¾ï¼Œå®Œå…¨æ·±åº¦åœ°å¤åˆ¶</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> clonedSink</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#80A665;--s-light:#59873A;"> structuredClone</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">kitchenSink</span><span style="--s-dark:#666666;--s-light:#999999;">)</span></span></code></pre><h2 id="ä¸ºä»€ä¹ˆä¸ç”¨å¯¹è±¡å±•å¼€ï¼Ÿ" tabindex="-1">ä¸ºä»€ä¹ˆä¸ç”¨å¯¹è±¡å±•å¼€ï¼Ÿ <a class="header-anchor" href="#ä¸ºä»€ä¹ˆä¸ç”¨å¯¹è±¡å±•å¼€ï¼Ÿ">ğŸ”—</a></h2><p>è¦æ³¨æ„åˆ°æˆ‘ä»¬è°ˆè®ºçš„æ˜¯æ·±åº¦å¤åˆ¶ã€‚å¦‚æœä½ åªæ˜¯éœ€è¦ä¸€ä¸ªæµ…å¤åˆ¶ï¼ŒåŠä¸ç”¨å¤åˆ¶åµŒå¥—çš„å¯¹è±¡æˆ–è€…æ•°æ®ï¼Œé‚£æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨å¯¹è±¡å±•å¼€ï¼š</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff;" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> simpleEvent</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418;">  title</span><span style="--s-dark:#666666;--s-light:#999999;">:</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;"> &quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">Builder.io Conf</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">,</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">}</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">// âœ… æ­£å¸¸å·¥ä½œï¼Œè¿™é‡Œå¹¶æ²¡æœ‰åµŒå¥—çš„å¯¹è±¡æˆ–è€…æ•°ç»„</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> shallowCopy</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span><span style="--s-dark:#666666;--s-light:#999999;"> ...</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">calendarEvent</span><span style="--s-dark:#666666;--s-light:#999999;"> }</span></span></code></pre><p>æˆ–è€…ä½ æ›´å–œæ¬¢å…¶ä»–çš„æ–¹å¼ï¼š</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff;" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> shallowCopy</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> Object</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">assign</span><span style="--s-dark:#666666;--s-light:#999999;">({},</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> simpleEvent</span><span style="--s-dark:#666666;--s-light:#999999;">)</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> shallowCopy</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> Object</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">create</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">simpleEvent</span><span style="--s-dark:#666666;--s-light:#999999;">)</span></span></code></pre><p>ä½†æ˜¯ä¸€æ—¦æˆ‘ä»¬éœ€è¦å¤åˆ¶åµŒå¥—çš„é¡¹çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±ä¼šé‡åˆ°é—®é¢˜ï¼š</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff;" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> calendarEvent</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418;">  title</span><span style="--s-dark:#666666;--s-light:#999999;">:</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;"> &quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">Builder.io Conf</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">,</span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418;">  date</span><span style="--s-dark:#666666;--s-light:#999999;">:</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> new</span><span style="--s-dark:#80A665;--s-light:#59873A;"> Date</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#4C9A91;--s-light:#2F798A;">123</span><span style="--s-dark:#666666;--s-light:#999999;">),</span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418;">  attendees</span><span style="--s-dark:#666666;--s-light:#999999;">:</span><span style="--s-dark:#666666;--s-light:#999999;"> [</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">Steve</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">]</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> shallowCopy</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span><span style="--s-dark:#666666;--s-light:#999999;"> ...</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">calendarEvent</span><span style="--s-dark:#666666;--s-light:#999999;"> }</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">// ğŸš©  &quot;Bob&quot; æ·»åŠ åˆ°äº†å¤åˆ¶çš„å¯¹è±¡å’ŒåŸå§‹çš„å¯¹è±¡ä¸­ï¼Œå®ƒä»¬æ˜¯åŒä¸€ä¸ªå¼•ç”¨</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">shallowCopy</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">attendees</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">push</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">Bob</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">// ğŸš© æ›´æ–°äº†å¤åˆ¶çš„å¯¹è±¡å’ŒåŸå§‹çš„å¯¹è±¡çš„ date ï¼Œå®ƒä»¬æ˜¯åŒä¸€ä¸ªå¼•ç”¨</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">shallowCopy</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">date</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">setTime</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#4C9A91;--s-light:#2F798A;">456</span><span style="--s-dark:#666666;--s-light:#999999;">)</span></span></code></pre><p>å°±å¦‚ä½ çœ‹åˆ°çš„é‚£æ ·ï¼Œæˆ‘ä»¬æ— æ³•é€šè¿‡å¯¹è±¡å±•å¼€æ¥å®Œå…¨æ‹·è´ä¸€ä¸ªè¿™æ ·çš„å¯¹è±¡ã€‚</p><p>åµŒå¥—çš„æ—¥æœŸå¯¹è±¡æˆ–è€…æ•°æ®åœ¨ä¸¤è€…é—´ä»ç„¶æ˜¯ä¸€ä¸ªå…±äº«çš„å¼•ç”¨ï¼Œå¦‚æœæˆ‘ä»¬åœ¨ç¼–è¾‘æ—¶è®¤ä¸ºè¿™äº›æ“ä½œåªæ˜¯æ›´æ–°äº†å¤åˆ¶çš„ <code>calendarEvent</code> å¯¹è±¡çš„è¯ï¼Œé‚£ä¹ˆä¼šå¸¦æ¥ä¸¥é‡çš„é—®é¢˜ã€‚</p><h2 id="ä¸ºä»€ä¹ˆä¸ç”¨-json-parse-json-stringify-x-ï¼Ÿ" tabindex="-1">ä¸ºä»€ä¹ˆä¸ç”¨ <code>JSON.parse(JSON.stringify(x))</code> ï¼Ÿ <a class="header-anchor" href="#ä¸ºä»€ä¹ˆä¸ç”¨-json-parse-json-stringify-x-ï¼Ÿ">ğŸ”—</a></h2><p>æ˜¯çš„ï¼Œè¿™ç§æ–¹å¼å®é™…ä¸Šæ˜¯ä¸€ä¸ªå¾ˆæ£’çš„æ–¹å¼ï¼Œå®ƒçš„æ€§èƒ½å‡ºå¥‡åœ°å¥½ï¼Œä½†æ˜¯å­˜åœ¨ä¸€äº› <code>structuredClone</code> å·²ç»è§£å†³çš„é—®é¢˜ã€‚</p><p>æ¯”å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff;" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> calendarEvent</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418;">  title</span><span style="--s-dark:#666666;--s-light:#999999;">:</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;"> &quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">Builder.io Conf</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">,</span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418;">  date</span><span style="--s-dark:#666666;--s-light:#999999;">:</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> new</span><span style="--s-dark:#80A665;--s-light:#59873A;"> Date</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#4C9A91;--s-light:#2F798A;">123</span><span style="--s-dark:#666666;--s-light:#999999;">),</span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418;">  attendees</span><span style="--s-dark:#666666;--s-light:#999999;">:</span><span style="--s-dark:#666666;--s-light:#999999;"> [</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">Steve</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">]</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">// ğŸš© JSON.stringify æŠŠ date è½¬æˆä¸€ä¸ªå­—ç¬¦ä¸²äº†</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> problematicCopy</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> JSON</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">parse</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">JSON</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">stringify</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">calendarEvent</span><span style="--s-dark:#666666;--s-light:#999999;">))</span></span></code></pre><p>å¦‚æœæˆ‘ä»¬æ‰“å° <code>problematicCopy</code> ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°ï¼š</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff;" tabindex="0"><code class="language-json5"><span class="line"><span style="--s-dark:#666666;--s-light:#999999;">{</span></span>
<span class="line"><span style="--s-dark:#C98A7D;--s-light:#B56959;">  title</span><span style="--s-dark:#666666;--s-light:#999999;">:</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;"> &quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">Builder.io Conf</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">,</span></span>
<span class="line"><span style="--s-dark:#C98A7D;--s-light:#B56959;">  date</span><span style="--s-dark:#666666;--s-light:#999999;">:</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;"> &quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">1970-01-01T00:00:00.123Z</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">,</span></span>
<span class="line"><span style="--s-dark:#C98A7D;--s-light:#B56959;">  attendees</span><span style="--s-dark:#666666;--s-light:#999999;">:</span><span style="--s-dark:#666666;--s-light:#999999;"> [</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">Steve</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">]</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">}</span></span></code></pre><p>è¿™ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼ <code>date</code> å­—æ®µåº”è¯¥æ˜¯ä¸€ä¸ª <code>Date</code> å¯¹è±¡ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</p><p>å‡ºç°è¿™ç§æƒ…å†µçš„åŸå› æ˜¯ <code>JSON.stringify</code> åªèƒ½å¤„ç†åŸºæœ¬çš„å¯¹è±¡ã€æ•°ç»„å’ŒåŸºæœ¬çš„ç±»å‹ã€‚ä»»ä½•å…¶ä»–çš„ç±»å‹ä¼šä»¥éš¾ä»¥é¢„æµ‹çš„æ–¹å¼è¿›è¡Œå¤„ç†ã€‚å°±æ¯”å¦‚ <code>Date</code> ä¼šè¢«è½¬åŒ–æˆå­—ç¬¦ä¸²ï¼Œä½†ä¸€ä¸ª <code>Set</code> å¯¹è±¡å°±ä¼šè¢«ç®€å•åœ°è½¬åŒ–ä¸º <code>{}</code> ã€‚</p><p><code>JSON.stringify</code> ç”šè‡³ä¼šå®Œå…¨å¿½ç•¥æŸäº›ä¸œè¥¿ï¼Œæ¯”å¦‚ <code>undefined</code> æˆ–è€…å‡½æ•°ã€‚</p><p>æ¯”å¦‚ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨ <code>JSON.stringify</code> æ‹·è´ <code>kitchenSink</code> å˜é‡çš„è¯ï¼š</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff;" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> kitchenSink</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418;">  set</span><span style="--s-dark:#666666;--s-light:#999999;">:</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> new</span><span style="--s-dark:#80A665;--s-light:#59873A;"> Set</span><span style="--s-dark:#666666;--s-light:#999999;">([</span><span style="--s-dark:#4C9A91;--s-light:#2F798A;">1</span><span style="--s-dark:#666666;--s-light:#999999;">,</span><span style="--s-dark:#4C9A91;--s-light:#2F798A;"> 3</span><span style="--s-dark:#666666;--s-light:#999999;">,</span><span style="--s-dark:#4C9A91;--s-light:#2F798A;"> 3</span><span style="--s-dark:#666666;--s-light:#999999;">]),</span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418;">  map</span><span style="--s-dark:#666666;--s-light:#999999;">:</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> new</span><span style="--s-dark:#80A665;--s-light:#59873A;"> Map</span><span style="--s-dark:#666666;--s-light:#999999;">([[</span><span style="--s-dark:#4C9A91;--s-light:#2F798A;">1</span><span style="--s-dark:#666666;--s-light:#999999;">,</span><span style="--s-dark:#4C9A91;--s-light:#2F798A;"> 2</span><span style="--s-dark:#666666;--s-light:#999999;">]]),</span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418;">  regex</span><span style="--s-dark:#666666;--s-light:#999999;">:</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;"> /</span><span style="--s-dark:#C4704F;--s-light:#AB5E3F;">foo</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">/</span><span style="--s-dark:#666666;--s-light:#999999;">,</span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418;">  deep</span><span style="--s-dark:#666666;--s-light:#999999;">:</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span><span style="--s-dark:#B8A965;--s-light:#998418;"> array</span><span style="--s-dark:#666666;--s-light:#999999;">:</span><span style="--s-dark:#666666;--s-light:#999999;"> [</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> new</span><span style="--s-dark:#80A665;--s-light:#59873A;"> File</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">someBlobData</span><span style="--s-dark:#666666;--s-light:#999999;">,</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;"> &#39;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">file.txt</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&#39;</span><span style="--s-dark:#666666;--s-light:#999999;">)</span><span style="--s-dark:#666666;--s-light:#999999;"> ]</span><span style="--s-dark:#666666;--s-light:#999999;"> },</span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418;">  error</span><span style="--s-dark:#666666;--s-light:#999999;">:</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> new</span><span style="--s-dark:#80A665;--s-light:#59873A;"> Error</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&#39;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">Hello!</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&#39;</span><span style="--s-dark:#666666;--s-light:#999999;">)</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> veryProblematicCopy</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> JSON</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">parse</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">JSON</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">stringify</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">kitchenSink</span><span style="--s-dark:#666666;--s-light:#999999;">))</span></span></code></pre><p>æˆ‘ä»¬ä¼šå¾—åˆ°ï¼š</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff;" tabindex="0"><code class="language-json"><span class="line"><span style="--s-dark:#666666;--s-light:#999999;">{</span></span>
<span class="line"><span style="--s-dark:#B8A96577;--s-light:#99841877;">  &quot;</span><span style="--s-dark:#B8A965;--s-light:#998418;">set</span><span style="--s-dark:#B8A96577;--s-light:#99841877;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">:</span><span style="--s-dark:#666666;--s-light:#999999;"> {},</span></span>
<span class="line"><span style="--s-dark:#B8A96577;--s-light:#99841877;">  &quot;</span><span style="--s-dark:#B8A965;--s-light:#998418;">map</span><span style="--s-dark:#B8A96577;--s-light:#99841877;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">:</span><span style="--s-dark:#666666;--s-light:#999999;"> {},</span></span>
<span class="line"><span style="--s-dark:#B8A96577;--s-light:#99841877;">  &quot;</span><span style="--s-dark:#B8A965;--s-light:#998418;">regex</span><span style="--s-dark:#B8A96577;--s-light:#99841877;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">:</span><span style="--s-dark:#666666;--s-light:#999999;"> {},</span></span>
<span class="line"><span style="--s-dark:#B8A96577;--s-light:#99841877;">  &quot;</span><span style="--s-dark:#B8A965;--s-light:#998418;">deep</span><span style="--s-dark:#B8A96577;--s-light:#99841877;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">:</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"><span style="--s-dark:#B8A96577;--s-light:#99841877;">    &quot;</span><span style="--s-dark:#B8A965;--s-light:#998418;">array</span><span style="--s-dark:#B8A96577;--s-light:#99841877;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">:</span><span style="--s-dark:#666666;--s-light:#999999;"> [</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">      {}</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">    ]</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">  },</span></span>
<span class="line"><span style="--s-dark:#B8A96577;--s-light:#99841877;">  &quot;</span><span style="--s-dark:#B8A965;--s-light:#998418;">error</span><span style="--s-dark:#B8A96577;--s-light:#99841877;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">:</span><span style="--s-dark:#666666;--s-light:#999999;"> {}</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">}</span></span></code></pre><p>å‘ƒã€‚</p><p>å“¦å¯¹äº†ï¼Œæˆ‘ä»¬è¿˜å¿…é¡»åˆ é™¤æˆ‘ä»¬æœ€åˆéœ€è¦çš„å¾ªç¯å¼•ç”¨ï¼Œå› ä¸º <code>JSON.stringify</code> åœ¨é‡åˆ°å®ƒä»¬æ—¶ä¼šç®€å•åœ°æŠ›å‡ºé”™è¯¯ã€‚</p><p>æ‰€ä»¥ï¼Œå¦‚æœæˆ‘ä»¬çš„éœ€æ±‚ç¬¦åˆå®ƒçš„åŠŸèƒ½ï¼Œé‚£ä¹ˆè¿™ç§æ–¹å¼å¾ˆæ£’ã€‚æˆ‘ä»¬å¯ä»¥ç”¨ <code>structuredClone</code> æ¥åšå¾ˆå¤š <code>JSON.stringify</code> åšä¸åˆ°çš„äº‹æƒ…ã€‚</p><h2 id="ä¸ºä»€ä¹ˆä¸ç”¨-clonedeep-ï¼Ÿ" tabindex="-1">ä¸ºä»€ä¹ˆä¸ç”¨ <code>_.cloneDeep</code> ï¼Ÿ <a class="header-anchor" href="#ä¸ºä»€ä¹ˆä¸ç”¨-clonedeep-ï¼Ÿ">ğŸ”—</a></h2><p>å¦‚ä»Šï¼Œ Lodash çš„ <code>cloneDeep</code> å‡½æ•°å·²ç»æ˜¯è§£å†³è¯¥é—®é¢˜çš„ä¸€ä¸ªéå¸¸å¸¸è§çš„æ–¹æ³•ã€‚</p><p>äº‹å®ä¸Šå®ƒä¹ŸæŒ‰é¢„æœŸå·¥ä½œï¼š</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff;" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F;">import</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> cloneDeep</span><span style="--s-dark:#4D9375;--s-light:#1E754F;"> from</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;"> &#39;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">lodash/cloneDeep</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> calendarEvent</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418;">  title</span><span style="--s-dark:#666666;--s-light:#999999;">:</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;"> &quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">Builder.io Conf</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">,</span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418;">  date</span><span style="--s-dark:#666666;--s-light:#999999;">:</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> new</span><span style="--s-dark:#80A665;--s-light:#59873A;"> Date</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#4C9A91;--s-light:#2F798A;">123</span><span style="--s-dark:#666666;--s-light:#999999;">),</span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418;">  attendees</span><span style="--s-dark:#666666;--s-light:#999999;">:</span><span style="--s-dark:#666666;--s-light:#999999;"> [</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">Steve</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">]</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> clonedEvent</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#80A665;--s-light:#59873A;"> cloneDeep</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">calendarEvent</span><span style="--s-dark:#666666;--s-light:#999999;">)</span></span></code></pre><p>ä½†æ˜¯è¿™ä¼šæœ‰ä¸€ä¸ªè­¦å‘Šã€‚æ ¹æ® IDE é‡Œçš„ <a href="https://marketplace.visualstudio.com/items?itemName=wix.vscode-import-cost" target="_blank" rel="noopener">Import Cost</a> æ’ä»¶æ‰“å°çš„å¯¼å…¥å ç”¨å¤§å°ï¼Œè¿™ä¸€ä¸ªå‡½æ•°å‹ç¼©åçš„å¤§å°ä¸º 17.4kb ï¼ˆå‹ç¼©åä¸º 5.3kb ï¼‰ï¼š</p><p><a data-fancybox="doc-gallery" href="https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2Faa5ab14fd21741bf8e327dd6e6fb68b1?format=webp&amp;width=1600" target="_blank" rel="noopener noreferrer"><img src="https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2Faa5ab14fd21741bf8e327dd6e6fb68b1?format=webp&amp;width=1600" alt=""></a></p><p>å‡è®¾ä½ åªæ˜¯éœ€è¦å¯¼å…¥è¿™ä¸ªå‡½æ•°ï¼Œå¦‚æœä½ ä½¿ç”¨äº†æ›´åŠ å¸¸è§çš„å¯¼å…¥æ–¹å¼ï¼Œé‚£ä¹ˆä½ ä¸ä¼šæ„è¯†åˆ° Tree-Shaking å¹¶ä¸æ€»æ˜¯æŒ‰ä½ çš„æœŸæœ›å·¥ä½œï¼Œä½ å¯èƒ½ä¼šåœ¨ä¸ç»æ„é—´ä¸ºè¿™ä¸ªå‡½æ•°å¯¼å…¥å¤šè¾¾ <a href="https://bundlephobia.com/package/lodash@4.17.21" target="_blank" rel="noopener">25kb</a> çš„å†…å®¹ã€‚</p><p><a data-fancybox="doc-gallery" href="https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F5dbbee190753414bb31b720059a501db?format=webp&amp;width=2000" target="_blank" rel="noopener noreferrer"><img src="https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F5dbbee190753414bb31b720059a501db?format=webp&amp;width=2000" alt=""></a></p><p>è™½ç„¶å¯¹ä»»ä½•äººæ¥è¯´è¿™éƒ½ä¸ç®—â€œä¸–ç•Œæœ«æ—¥â€ï¼Œä½†æ˜¯åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­æ ¹æœ¬æ²¡æœ‰å¿…è¦ï¼Œå› ä¸ºæµè§ˆå™¨æ—©å·²å†…ç½®äº† <code>structuredClone</code> äº†ã€‚</p><h2 id="structuredclone-ä¸èƒ½å…‹éš†ä»€ä¹ˆï¼Ÿ" tabindex="-1"><code>structuredClone</code> ä¸èƒ½å…‹éš†ä»€ä¹ˆï¼Ÿ <a class="header-anchor" href="#structuredclone-ä¸èƒ½å…‹éš†ä»€ä¹ˆï¼Ÿ">ğŸ”—</a></h2><h3 id="å‡½æ•°æ— æ³•è¢«å…‹éš†" tabindex="-1">å‡½æ•°æ— æ³•è¢«å…‹éš† <a class="header-anchor" href="#å‡½æ•°æ— æ³•è¢«å…‹éš†">ğŸ”—</a></h3><p>å°è¯•å…‹éš†å‡½æ•°åˆ™ä¼šæŠ›å‡ºä¸€ä¸ª <code>DataCloneError</code> å¼‚å¸¸ï¼š</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff;" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">// ğŸš© é”™è¯¯ï¼</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A;">structuredClone</span><span style="--s-dark:#666666;--s-light:#999999;">({</span><span style="--s-dark:#80A665;--s-light:#59873A;"> fn</span><span style="--s-dark:#666666;--s-light:#999999;">:</span><span style="--s-dark:#666666;--s-light:#999999;"> ()</span><span style="--s-dark:#666666;--s-light:#999999;"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span><span style="--s-dark:#666666;--s-light:#999999;"> }</span><span style="--s-dark:#666666;--s-light:#999999;"> })</span></span></code></pre><h3 id="dom-èŠ‚ç‚¹æ— æ³•è¢«å…‹éš†" tabindex="-1">DOM èŠ‚ç‚¹æ— æ³•è¢«å…‹éš† <a class="header-anchor" href="#dom-èŠ‚ç‚¹æ— æ³•è¢«å…‹éš†">ğŸ”—</a></h3><p>å°è¯•å…‹éš† DOM èŠ‚ç‚¹ä¹Ÿä¼šæŠ›å‡ºä¸€ä¸ª <code>DataCloneError</code> å¼‚å¸¸ï¼š</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff;" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">// ğŸš© é”™è¯¯ï¼</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A;">structuredClone</span><span style="--s-dark:#666666;--s-light:#999999;">({</span><span style="--s-dark:#B8A965;--s-light:#998418;"> el</span><span style="--s-dark:#666666;--s-light:#999999;">:</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> document</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">body</span><span style="--s-dark:#666666;--s-light:#999999;"> })</span></span></code></pre><h3 id="å±æ€§æè¿°ç¬¦ï¼Œ-setter-å’Œ-getter" tabindex="-1">å±æ€§æè¿°ç¬¦ï¼Œ setter å’Œ getter <a class="header-anchor" href="#å±æ€§æè¿°ç¬¦ï¼Œ-setter-å’Œ-getter">ğŸ”—</a></h3><p>ç±»ä¼¼å…ƒæ•°æ®ä¹‹ç±»çš„ç‰¹æ€§éƒ½æ— æ³•è¢«å…‹éš†ã€‚</p><p>æ¯”å¦‚ï¼Œå¯¹äºä¸€ä¸ª getter ï¼Œå…‹éš†çš„æ˜¯å®ƒçš„è¿”å›å€¼ï¼Œè€Œä¸æ˜¯ getter å‡½æ•°è‡ªèº«ï¼ˆæˆ–è€…ä»»ä½•å…¶ä»–çš„å±æ€§å…ƒæ•°æ®ï¼‰ï¼š</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff;" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#80A665;--s-light:#59873A;">structuredClone</span><span style="--s-dark:#666666;--s-light:#999999;">({</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> get</span><span style="--s-dark:#80A665;--s-light:#59873A;"> foo</span><span style="--s-dark:#666666;--s-light:#999999;">()</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span><span style="--s-dark:#4D9375;--s-light:#1E754F;"> return</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;"> &#39;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">bar</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&#39;</span><span style="--s-dark:#666666;--s-light:#999999;"> }</span><span style="--s-dark:#666666;--s-light:#999999;"> })</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">// Becomes: { foo: &#39;bar&#39; }</span></span></code></pre><h3 id="å¯¹è±¡åŸå‹" tabindex="-1">å¯¹è±¡åŸå‹ <a class="header-anchor" href="#å¯¹è±¡åŸå‹">ğŸ”—</a></h3><p>åŸå‹é“¾ä¸ä¼šè¢«éå†æˆ–è€…æ˜¯å¤åˆ¶ã€‚æ‰€ä»¥å¦‚æœä½ å…‹éš†ä¸€ä¸ª <code>MyClass</code> çš„å®ä¾‹ï¼Œå…‹éš†åçš„å¯¹è±¡ä¸å†æ˜¯ <code>MyClass</code> çš„ä¸€ä¸ªå®ä¾‹ï¼ˆä½†è¯¥ç±»æ‰€æœ‰åˆæ³•çš„å±æ€§éƒ½ä¼šè¢«å…‹éš†ï¼‰ï¼š</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff;" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">class</span><span style="--s-dark:#5DA994;--s-light:#2E8F82;"> MyClass</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;"> </span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">  foo</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;"> &#39;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">bar</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&#39;</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;"> </span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A;">  myMethod</span><span style="--s-dark:#666666;--s-light:#999999;">()</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0;"> /* ... */</span><span style="--s-dark:#666666;--s-light:#999999;"> }</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">}</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> myClass</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> new</span><span style="--s-dark:#80A665;--s-light:#59873A;"> MyClass</span><span style="--s-dark:#666666;--s-light:#999999;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> cloned</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#80A665;--s-light:#59873A;"> structuredClone</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">myClass</span><span style="--s-dark:#666666;--s-light:#999999;">)</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">// Becomes: { foo: &#39;bar&#39; }</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">cloned</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> instanceof</span><span style="--s-dark:#5DA994;--s-light:#2E8F82;"> myClass</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0;"> // false</span></span></code></pre><h3 id="æ‰€æœ‰æ”¯æŒå…‹éš†çš„ç±»å‹" tabindex="-1">æ‰€æœ‰æ”¯æŒå…‹éš†çš„ç±»å‹ <a class="header-anchor" href="#æ‰€æœ‰æ”¯æŒå…‹éš†çš„ç±»å‹">ğŸ”—</a></h3><p>ç®€å•åœ°è®²ï¼Œä»»ä½•æœªåœ¨ä¸‹é¢åˆ—è¡¨çš„ç±»å‹éƒ½æ— æ³•è¢«å…‹éš†ï¼š</p><h4 id="js-å†…å»ºç±»å‹" tabindex="-1"><a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Structured_clone_algorithm#javascript_types" target="_blank" rel="noopener">JS å†…å»ºç±»å‹</a> <a class="header-anchor" href="#js-å†…å»ºç±»å‹">ğŸ”—</a></h4><p><code>Array</code> ï¼Œ <code>ArrayBuffer</code> ï¼Œ <code>Boolean</code> ï¼Œ <code>DataView</code> ï¼Œ <code>Date</code> ï¼Œ <code>Error</code> ç±»å‹ (ä¸‹æ–‡æœ‰è¯¦ç»†çš„åˆ—è¡¨)ï¼Œ <code>Map</code> ï¼Œ <code>Object</code> ç±»å‹çš„ç®€å•å¯¹è±¡ (æ¯”å¦‚ï¼Œå­—é¢å¯¹è±¡) ï¼Œ <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Data_structures#primitive_values" target="_blank" rel="noopener">åŸºæœ¬ç±»å‹</a>ï¼Œä½†è¦é™¤å» <code>symbol</code> (ä¹Ÿå°±æ˜¯åŒ…æ‹¬ <code>number</code> ï¼Œ <code>string</code> ï¼Œ <code>null</code> ï¼Œ <code>undefined</code> ï¼Œ <code>boolean</code> ï¼Œ <code>BigInt</code>)ï¼Œ <code>RegExp</code> ï¼Œ <code>Set</code> ï¼Œ <code>TypedArray</code> ã€‚</p><h4 id="é”™è¯¯ç±»å‹" tabindex="-1">é”™è¯¯ç±»å‹ <a class="header-anchor" href="#é”™è¯¯ç±»å‹">ğŸ”—</a></h4><p><code>Error</code> ï¼Œ <code>EvalError</code> ï¼Œ <code>RangeError</code> ï¼Œ <code>ReferenceError</code> ï¼Œ <code>SyntaxError</code> ï¼Œ <code>TypeError</code> ï¼Œ <code>URIError</code> ã€‚</p><h4 id="web-api-ç±»å‹" tabindex="-1"><a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Structured_clone_algorithm#webapi_types" target="_blank" rel="noopener">Web/API ç±»å‹</a> <a class="header-anchor" href="#web-api-ç±»å‹">ğŸ”—</a></h4><p><code>AudioData</code> ï¼Œ <code>Blob</code> ï¼Œ <code>CryptoKey</code> ï¼Œ <code>DOMException</code> ï¼Œ <code>DOMMatrix</code> ï¼Œ <code>DOMMatrixReadOnly</code> ï¼Œ <code>DOMPoint</code> ï¼Œ <code>DomQuad</code> ï¼Œ <code>DomRect</code> ï¼Œ <code>File</code> ï¼Œ <code>FileList</code> ï¼Œ <code>FileSystemDirectoryHandle</code> ï¼Œ <code>mFileHandle</code> ï¼Œ <code>FileSystemHandle</code> ï¼Œ <code>ImageBitmap</code> ï¼Œ <code>ImageData</code> ï¼Œ <code>RTCCertificate</code> ï¼Œ <code>VideoFrame</code> ã€‚</p><h3 id="æµè§ˆå™¨å’Œè¿è¡Œæ—¶çš„æ”¯æŒæƒ…å†µ" tabindex="-1">æµè§ˆå™¨å’Œè¿è¡Œæ—¶çš„æ”¯æŒæƒ…å†µ <a class="header-anchor" href="#æµè§ˆå™¨å’Œè¿è¡Œæ—¶çš„æ”¯æŒæƒ…å†µ">ğŸ”—</a></h3><p>è¿™ä¸€èŠ‚å°±æ˜¯å¤§å®¶æœ€å…³å¿ƒçš„éƒ¨åˆ†äº†ï¼Œä¸»æµçš„æµè§ˆå™¨ï¼Œä»¥åŠ Node å’Œ Deno ï¼Œéƒ½æ”¯æŒ <code>structuredClone</code> ã€‚</p><p>ä¸è¿‡è¦ç•™æ„ Web Workers ä¸­æ”¯æŒæƒ…å†µï¼š</p><p><a data-fancybox="doc-gallery" href="https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F1fdbc5b0826240e487a4980dfee69661?format=webp&amp;width=2000" target="_blank" rel="noopener noreferrer"><img src="https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F1fdbc5b0826240e487a4980dfee69661?format=webp&amp;width=2000" alt=""></a></p><p>æ¥æºï¼š<a href="https://developer.mozilla.org/en-US/docs/Web/API/structuredClone" target="_blank" rel="noopener">MDN</a> ã€‚</p><h2 id="ç»“è®º" tabindex="-1">ç»“è®º <a class="header-anchor" href="#ç»“è®º">ğŸ”—</a></h2><p>è™½ç„¶å·²ç»è¿‡å»äº†å¾ˆé•¿çš„æ—¶é—´äº†ï¼Œä½†æˆ‘ä»¬æœ€ç»ˆæœ‰äº† <code>structuredClone</code> ï¼Œå¯ä»¥åœ¨ JavaScript ä¸­è½»æ¾åœ°å…‹éš†å¯¹è±¡ã€‚</p><h2 id="å…³äºæˆ‘" tabindex="-1">å…³äºæˆ‘ <a class="header-anchor" href="#å…³äºæˆ‘">ğŸ”—</a></h2><p>æˆ‘æ˜¯ <a href="https://twitter.com/Steve8708?ref_src=twsrc%5Egoogle%7Ctwcamp%5Eserp%7Ctwgr%5Eauthor" target="_blank" rel="noopener">Steve</a> ï¼Œ <a href="https://www.builder.io/" target="_blank" rel="noopener">Builder.io</a> çš„ CEO ã€‚</p><p>æˆ‘ä»¬æä¾›äº†ä¸€ç§æ‹–æ‹½ç»„ä»¶çš„æ–¹å¼ï¼Œé€šè¿‡è¿™ç§æ–¹å¼æ¥åœ¨ä½ çš„ç«™ç‚¹æˆ–è€… APP ä¸Šåˆ›å»ºé¡µé¢å’Œå…¶ä»– CMS å†…å®¹ã€‚</p><p>ä½ å¯ä»¥<a href="https://www.builder.io/blog/headless-cms-workflow" target="_blank" rel="noopener">ç‚¹å‡»æ­¤å¤„</a>è¯¦ç»†äº†è§£å¦‚ä½•æ”¹è¿›ä½ çš„å·¥ä½œæµã€‚</p><p>ä½ ä¼šè§‰å¾—æœ‰è¶£æˆ–è€…æœ‰ç”¨çš„ã€‚</p><h1 id="åè®°" tabindex="-1">åè®° <a class="header-anchor" href="#åè®°">ğŸ”—</a></h1><p>æ·±æ‹·è´çš„è¯ï¼Œæˆ‘ä¸€èˆ¬éƒ½ç”¨ <code>JSON.parse(JSON.stringify(obj))</code> ï¼Œå¾ˆå¤šæ—¶å€™å¯¹è±¡çš„ç»“æ„åŸºæœ¬éƒ½æ˜¯å­—é¢å¯¹è±¡ï¼Œè¿™ç§æ–¹å¼åŸºæœ¬ä¸Šç¬¦åˆè¦æ±‚äº†ï¼Œè€Œä¸”å…¼å®¹æ€§å¥½ï¼Œä¸ç”¨å¼•å…¥å¤–éƒ¨çš„åŒ…</p><p><code>structuredClone</code> ä¸€ç›´æ²¡ç”¨è¿‡ï¼Œå› ä¸ºæˆ‘éƒ½ä¸çŸ¥é“æœ‰è¿™ä¸ª API ï¼Œä»¥åå¯ä»¥åœ¨ä»£ç é‡Œç”¨ä¸€ç”¨äº†~</p>`,85)])))}};export{S as categories,x as date,q as default,w as key,_ as meta,v as tags,m as title,E as updated,F as wordCount};
