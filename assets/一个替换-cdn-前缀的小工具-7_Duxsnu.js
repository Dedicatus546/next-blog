import{k as n,a as t,o as l,l as p}from"./app-I7hi7fN_.js";const e={class:"kan-doc"},k="ä¸€ä¸ªæ›¿æ¢ cdn å‰ç¼€çš„å°å·¥å…·",y=1658734852,A="2022-07-25T15:40:52.000Z",D="2023-02-13T18:28:44.000Z",c=["Node","JavaScript"],B=["ç¼–ç¨‹"],o=5252,C=[{property:"og:title",content:"ä¸€ä¸ªæ›¿æ¢ cdn å‰ç¼€çš„å°å·¥å…·"},{name:"twitter:title",content:"ä¸€ä¸ªæ›¿æ¢ cdn å‰ç¼€çš„å°å·¥å…·"}],f={__name:"ä¸€ä¸ªæ›¿æ¢-cdn-å‰ç¼€çš„å°å·¥å…·",setup(i,{expose:a}){return a({frontmatter:{title:"ä¸€ä¸ªæ›¿æ¢ cdn å‰ç¼€çš„å°å·¥å…·",key:1658734852,date:"2022-07-25T15:40:52.000Z",updated:"2023-02-13T18:28:44.000Z",tags:["Node","JavaScript"],categories:["ç¼–ç¨‹"],wordCount:5252,meta:[{property:"og:title",content:"ä¸€ä¸ªæ›¿æ¢ cdn å‰ç¼€çš„å°å·¥å…·"},{name:"twitter:title",content:"ä¸€ä¸ªæ›¿æ¢ cdn å‰ç¼€çš„å°å·¥å…·"}]}}),n({title:"ä¸€ä¸ªæ›¿æ¢ cdn å‰ç¼€çš„å°å·¥å…·",meta:[{property:"og:title",content:"ä¸€ä¸ªæ›¿æ¢ cdn å‰ç¼€çš„å°å·¥å…·"},{name:"twitter:title",content:"ä¸€ä¸ªæ›¿æ¢ cdn å‰ç¼€çš„å°å·¥å…·"}]}),(g,s)=>(l(),t("div",e,s[0]||(s[0]=[p(`<h1 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€">ğŸ”—</a></h1><p>ä¸€ä¸ªæ›¿æ¢ <code>cdn</code> å‰ç¼€çš„å°å·¥å…·</p><p>ä¼—æ‰€å‘¨çŸ¥ï¼Œäººä¸ä¼šé—²ç€è›‹ç–¼ç»™è‡ªå·±æ‰¾äº‹å¹²</p><p>æ‰€ä»¥ï¼Œåšè¿™ä¸ªå°å·¥å…·æ˜¯æœ‰åŸå› çš„ï¼ŒåŸå› å¦‚ä¸‹</p><p>ç›®å‰åšå®¢çš„å›¾åºŠæ˜¯ä¸¢åœ¨ <code>github</code> ä»“åº“ä¸Šçš„ï¼Œç„¶åé€šè¿‡ <code>jsdelivr</code> æ¥è¿›è¡Œ <code>cdn</code> ä»£ç†çš„</p><p>è¿™ä¸ªè¯´å®è¯éå¸¸çš„ä¸é”™ï¼Œæœ€å¼€å§‹å›¾åºŠç”¨çš„ <code>sm.ms</code> ï¼Œä½†æ˜¯å›¾ç‰‡ä¸åœ¨è‡ªå·±æ‰‹é‡Œä¸æ˜¯å¾ˆæ”¾å¿ƒï¼Œåé¢å°±ä½¿ç”¨ <code>github</code> å›¾åºŠ</p><p>ä½†æ˜¯æœ€è¿‘ <code>jsdelivr</code> çš„ <code>cdn</code> å¾ˆå®¹æ˜“å‡ºç°è¿æ¥ä¸ä¸Šçš„æƒ…å†µï¼Œå¯ä»¥è¯´éå¸¸çš„æ“è›‹ï¼Œä¸€ä¸‹å­æ•´ä¸ªç«™ç‚¹çš„å›¾ç‰‡å…¨æŒ‚äº†</p><p><code>issue</code> åœ°å€ï¼š<a href="https://github.com/jsdelivr/jsdelivr/issues/18397" target="_blank" rel="noopener">Jsdelivr have been DNS pollution and SNI block again in China. They are pointed to google, twitter and facebook IPs</a></p><p>é—®é¢˜å¾ˆæ˜æ˜¾ï¼š<code>cdn.jsdelivr.net</code> è¢« <code>DNS</code> æ±¡æŸ“äº†ï¼Œæ‰€ä»¥æ— æ³•è®¿é—®äº†ï¼Œä½†æ˜¯å¦ä¸€ä¸ªåœ°å€ <code>fastly.jsdelivr.net</code> æ˜¯æ²¡æœ‰é—®é¢˜çš„</p><p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦æŠŠå…¨éƒ¨çš„ <code>md</code> æ–‡æ¡£é‡Œé¢çš„å›¾ç‰‡çš„ <code>cdn.jsdelivr.net</code> é“¾æ¥æ›¿æ¢æˆ <code>fastly.jsdelivr.net</code></p><p>è™½ç„¶å¯ä»¥ç›´æ¥ <code>ide</code> æœç´¢å¤åˆ¶çš„ï¼Œä½†æ˜¯ä½œä¸ºä¸€ä¸ªæœ‰æ¢¦æƒ³çš„å’¸é±¼ï¼Œé¢ï¼Œä¸å¯¹ï¼Œæœ‰æ¢¦æƒ³çš„ç¨‹åºå‘˜ï¼Œå€ŸåŠ© <code>node</code> æ¥æ›¿æˆ‘ä»¬å®Œæˆè¿™é¡¹å·¥ä½œ</p><h1 id="æ­£æ–‡" tabindex="-1">æ­£æ–‡ <a class="header-anchor" href="#æ­£æ–‡">ğŸ”—</a></h1><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦æ‹†è§£ä¸‹å¤„ç†çš„æ­¥éª¤</p><ul><li>è¯»å‡ºæ–‡ä»¶çš„å†…å®¹</li><li>æ›¿æ¢ç›¸å…³å†…å®¹</li><li>å†™å…¥æ–‡ä»¶çš„å†…å®¹</li></ul><p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å†™å‡ºä¸‹é¢çš„ç®€å•æ¡†æ¶</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff;" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> fs</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#80A665;--s-light:#59873A;"> require</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&#39;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">fs</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&#39;</span><span style="--s-dark:#666666;--s-light:#999999;">);</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> path</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#80A665;--s-light:#59873A;"> require</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&#39;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">path</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&#39;</span><span style="--s-dark:#666666;--s-light:#999999;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> POST_LIST_DIR</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;"> &#39;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">./source/_posts</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&#39;</span><span style="--s-dark:#666666;--s-light:#999999;">;</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> SOURCE_CDN</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;"> &#39;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">fastly.jsdelivr.net</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&#39;</span><span style="--s-dark:#666666;--s-light:#999999;">;</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> TARGET_CDN</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;"> &#39;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">cdn.jsdelivr.net</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&#39;</span><span style="--s-dark:#666666;--s-light:#999999;">;</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> REGEXP</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> new</span><span style="--s-dark:#80A665;--s-light:#59873A;"> RegExp</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">\`</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">!</span><span style="--s-dark:#C99076;--s-light:#A65E2B;">\\\\</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">[.*</span><span style="--s-dark:#C99076;--s-light:#A65E2B;">\\\\</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">]</span><span style="--s-dark:#C99076;--s-light:#A65E2B;">\\\\</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">(https?:</span><span style="--s-dark:#C99076;--s-light:#A65E2B;">\\\\</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">/</span><span style="--s-dark:#C99076;--s-light:#A65E2B;">\\\\</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">/</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">\${</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">SOURCE_CDN</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">replaceAll</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">.</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">,</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;"> &quot;</span><span style="--s-dark:#C99076;--s-light:#A65E2B;">\\\\</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">.</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">)</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">}</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">.*</span><span style="--s-dark:#C99076;--s-light:#A65E2B;">\\\\</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">)</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">\`</span><span style="--s-dark:#666666;--s-light:#999999;">,</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;"> &#39;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">img</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&#39;</span><span style="--s-dark:#666666;--s-light:#999999;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">/**</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;"> * </span><span style="--s-dark:#666666;--s-light:#999999;">@</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">returns</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span><span style="--s-dark:#5DA994;--s-light:#2E8F82;">Promise&lt;Array&lt;{ filepath: string; fileContent: string }&gt;&gt;</span><span style="--s-dark:#666666;--s-light:#999999;">}</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;"> */</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">const</span><span style="--s-dark:#80A665;--s-light:#59873A;"> getPostList</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> async</span><span style="--s-dark:#666666;--s-light:#999999;"> ()</span><span style="--s-dark:#666666;--s-light:#999999;"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">  // TODO</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">/**</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;"> * </span><span style="--s-dark:#666666;--s-light:#999999;">@</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">param</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> postList</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0;"> {Array&lt;{ filepath: string; fileContent: string }&gt;}</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;"> * </span><span style="--s-dark:#666666;--s-light:#999999;">@</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">returns</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span><span style="--s-dark:#5DA994;--s-light:#2E8F82;">Array&lt;{ filepath: string; fileContent: string }&gt;</span><span style="--s-dark:#666666;--s-light:#999999;">}</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;"> */</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">const</span><span style="--s-dark:#80A665;--s-light:#59873A;"> replaceCdn</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#666666;--s-light:#999999;"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">postList</span><span style="--s-dark:#666666;--s-light:#999999;">)</span><span style="--s-dark:#666666;--s-light:#999999;"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">  // TODO </span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">/**</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;"> * </span><span style="--s-dark:#666666;--s-light:#999999;">@</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">param</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> postList</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0;"> {Array&lt;{ filepath: string; fileContent: string }&gt;}</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;"> * </span><span style="--s-dark:#666666;--s-light:#999999;">@</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">returns</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span><span style="--s-dark:#5DA994;--s-light:#2E8F82;">Promise&lt;void&gt;</span><span style="--s-dark:#666666;--s-light:#999999;">}</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;"> */</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">const</span><span style="--s-dark:#80A665;--s-light:#59873A;"> writePostList</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> async</span><span style="--s-dark:#666666;--s-light:#999999;"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">postList</span><span style="--s-dark:#666666;--s-light:#999999;">)</span><span style="--s-dark:#666666;--s-light:#999999;"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">  // TODO</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">const</span><span style="--s-dark:#80A665;--s-light:#59873A;"> main</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> async</span><span style="--s-dark:#666666;--s-light:#999999;"> ()</span><span style="--s-dark:#666666;--s-light:#999999;"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">  const</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> postList</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#4D9375;--s-light:#1E754F;"> await</span><span style="--s-dark:#80A665;--s-light:#59873A;"> getPostList</span><span style="--s-dark:#666666;--s-light:#999999;">();</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">  const</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> newPostList</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#80A665;--s-light:#59873A;"> replaceCdn</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">postList</span><span style="--s-dark:#666666;--s-light:#999999;">);</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F;">  await</span><span style="--s-dark:#80A665;--s-light:#59873A;"> writePostList</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">newPostList</span><span style="--s-dark:#666666;--s-light:#999999;">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A;">main</span><span style="--s-dark:#666666;--s-light:#999999;">();</span></span></code></pre><p>å¯ä»¥çœ‹åˆ°è¿™é‡Œé¢æˆ‘ä»¬ä½¿ç”¨äº† <code>{ filepath: string; fileContent: string }</code> æ¥ä½œä¸ºä¸­é—´çš„æ•°æ®ç»“æ„</p><p>ä¸»è¦æ˜¯ä¸ºäº†è®©å†…å®¹å’Œæ–‡ä»¶å¯¹åº”ï¼Œè¿™æ ·å­å¤„ç†å®Œæˆä¹‹åï¼Œæˆ‘ä»¬èƒ½å¤Ÿé‡æ–°çš„å†™å›å»</p><p>åœ¨æ›¿æ¢éƒ¨åˆ†æˆ‘ä»¬ä½¿ç”¨äº†æ­£åˆ™</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff;" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> REGEXP</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> new</span><span style="--s-dark:#80A665;--s-light:#59873A;"> RegExp</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">\`</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">!</span><span style="--s-dark:#C99076;--s-light:#A65E2B;">\\\\</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">[.*</span><span style="--s-dark:#C99076;--s-light:#A65E2B;">\\\\</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">]</span><span style="--s-dark:#C99076;--s-light:#A65E2B;">\\\\</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">(https?:</span><span style="--s-dark:#C99076;--s-light:#A65E2B;">\\\\</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">/</span><span style="--s-dark:#C99076;--s-light:#A65E2B;">\\\\</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">/</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">\${</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">SOURCE_CDN</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">replaceAll</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">.</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">,</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;"> &quot;</span><span style="--s-dark:#C99076;--s-light:#A65E2B;">\\\\</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">.</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">)</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">}</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">.*</span><span style="--s-dark:#C99076;--s-light:#A65E2B;">\\\\</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">)</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">\`</span><span style="--s-dark:#666666;--s-light:#999999;">,</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;"> &#39;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">img</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&#39;</span><span style="--s-dark:#666666;--s-light:#999999;">);</span></span></code></pre><p>åœ¨ <code>md</code> ä¸­ï¼Œå›¾ç‰‡çš„è¯­æ³•æ˜¯ <code>![å›¾ç‰‡çš„ç®€ä»‹](å›¾ç‰‡åœ°å€)</code></p><p>åœ¨ä¸å¤„ç†åœ°å€çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>/!\\[.*\\]\\(.*\\)/mg</code> å³å¯åŒ¹é…åˆ°å¯¹åº”çš„é¡¹</p><p><img src="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/07/25/202207251608716.avif" alt=""></p><p>åŠ ä¸Šåœ°å€çš„è¯åªè¦åœ¨åœ†æ‹¬å·åˆ¤æ–­å³å¯ <code>/!\\[.*\\]\\(https?:\\/\\/fastly\\.jsdelivr\\.net.*\\)/img</code></p><p>è¿™é‡ŒåŠ ä¸Šåœ°å€åˆ¤æ–­çš„åŸå› æ˜¯ä¹‹å‰è¿˜æœ‰ä¸€äº›å›¾ç‰‡ä½¿ç”¨çš„ <code>sm.ms</code> çš„å›¾åºŠï¼Œæ’é™¤æ‰å®ƒä»¬</p><p>æ¥ä¸‹æ¥å°±å¯ä»¥å®ç°æ¯ä¸ªå‡½æ•°äº†</p><h2 id="getpostlist-å®ç°" tabindex="-1">getPostList å®ç° <a class="header-anchor" href="#getpostlist-å®ç°">ğŸ”—</a></h2><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff;" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">const</span><span style="--s-dark:#80A665;--s-light:#59873A;"> getPostList</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> async</span><span style="--s-dark:#666666;--s-light:#999999;"> ()</span><span style="--s-dark:#666666;--s-light:#999999;"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F;">  return</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> new</span><span style="--s-dark:#B8A965;--s-light:#998418;"> Promise</span><span style="--s-dark:#666666;--s-light:#999999;">((</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">resolve</span><span style="--s-dark:#666666;--s-light:#999999;">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> reject</span><span style="--s-dark:#666666;--s-light:#999999;">)</span><span style="--s-dark:#666666;--s-light:#999999;"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">    // è¯»ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œä¼šè¿”å›æ–‡ä»¶å¤¹å†…çš„æ–‡ä»¶åˆ—è¡¨åå­—</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">    fs</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">readdir</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">POST_LIST_DIR</span><span style="--s-dark:#666666;--s-light:#999999;">,</span><span style="--s-dark:#666666;--s-light:#999999;"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">err</span><span style="--s-dark:#666666;--s-light:#999999;">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> result</span><span style="--s-dark:#666666;--s-light:#999999;">)</span><span style="--s-dark:#666666;--s-light:#999999;"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F;">      if</span><span style="--s-dark:#666666;--s-light:#999999;"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">err</span><span style="--s-dark:#666666;--s-light:#999999;">)</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">        console</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">error</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">err</span><span style="--s-dark:#666666;--s-light:#999999;">);</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A;">        reject</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">err</span><span style="--s-dark:#666666;--s-light:#999999;">);</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F;">        return</span><span style="--s-dark:#666666;--s-light:#999999;">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">      }</span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418;">      Promise</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">all</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">result</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">map</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">filename</span><span style="--s-dark:#666666;--s-light:#999999;"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F;">        return</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> new</span><span style="--s-dark:#B8A965;--s-light:#998418;"> Promise</span><span style="--s-dark:#666666;--s-light:#999999;">((</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">resolve</span><span style="--s-dark:#666666;--s-light:#999999;">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> reject</span><span style="--s-dark:#666666;--s-light:#999999;">)</span><span style="--s-dark:#666666;--s-light:#999999;"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">          // æ„é€ æ–‡ä»¶çš„ç»å¯¹è·¯å¾„</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">          const</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> filepath</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> path</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">resolve</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">POST_LIST_DIR</span><span style="--s-dark:#666666;--s-light:#999999;">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> filename</span><span style="--s-dark:#666666;--s-light:#999999;">)</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">          // è¯»å–è¿™ä¸ªæ–‡ä»¶</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">          fs</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">readFile</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">filepath</span><span style="--s-dark:#666666;--s-light:#999999;">,</span><span style="--s-dark:#666666;--s-light:#999999;"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">err</span><span style="--s-dark:#666666;--s-light:#999999;">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> result</span><span style="--s-dark:#666666;--s-light:#999999;">)</span><span style="--s-dark:#666666;--s-light:#999999;"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F;">            if</span><span style="--s-dark:#666666;--s-light:#999999;"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">err</span><span style="--s-dark:#666666;--s-light:#999999;">)</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A;">              reject</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">err</span><span style="--s-dark:#666666;--s-light:#999999;">);</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F;">              return</span><span style="--s-dark:#666666;--s-light:#999999;">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">            }</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">            // æŠŠç»“æœ resolve å‡ºå»</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A;">            resolve</span><span style="--s-dark:#666666;--s-light:#999999;">({</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">              filepath</span><span style="--s-dark:#666666;--s-light:#999999;">,</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;"> </span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418;">              fileContent</span><span style="--s-dark:#666666;--s-light:#999999;">:</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> result</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">toString</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&#39;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">utf-8</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&#39;</span><span style="--s-dark:#666666;--s-light:#999999;">)</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">            });</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">          })</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">        })</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">      })).</span><span style="--s-dark:#80A665;--s-light:#59873A;">then</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">resolve</span><span style="--s-dark:#666666;--s-light:#999999;">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> reject</span><span style="--s-dark:#666666;--s-light:#999999;">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">    });</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">  })</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">}</span></span></code></pre><h2 id="replacecdn-å®ç°" tabindex="-1">replaceCdn å®ç° <a class="header-anchor" href="#replacecdn-å®ç°">ğŸ”—</a></h2><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff;" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">/**</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;"> * </span><span style="--s-dark:#666666;--s-light:#999999;">@</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">param</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> postList</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0;"> {Array&lt;{ filepath: string; fileContent: string }&gt;}</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;"> * </span><span style="--s-dark:#666666;--s-light:#999999;">@</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">returns</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span><span style="--s-dark:#5DA994;--s-light:#2E8F82;">Array&lt;{ filepath: string; fileContent: string }&gt;</span><span style="--s-dark:#666666;--s-light:#999999;">}</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;"> */</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">const</span><span style="--s-dark:#80A665;--s-light:#59873A;"> replaceCdn</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#666666;--s-light:#999999;"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">postList</span><span style="--s-dark:#666666;--s-light:#999999;">)</span><span style="--s-dark:#666666;--s-light:#999999;"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F;">  return</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> postList</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">map</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">post</span><span style="--s-dark:#666666;--s-light:#999999;"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">    const</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> filepath</span><span style="--s-dark:#666666;--s-light:#999999;">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> fileContent</span><span style="--s-dark:#666666;--s-light:#999999;"> }</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> post</span><span style="--s-dark:#666666;--s-light:#999999;">;</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">    // å¯¹æ¯ä¸ªæ–‡ä»¶å†…å®¹è¿›è¡Œæ­£åˆ™æ›¿æ¢</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F;">    return</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">      filepath</span><span style="--s-dark:#666666;--s-light:#999999;">,</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;"> </span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418;">      fileContent</span><span style="--s-dark:#666666;--s-light:#999999;">:</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> fileContent</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">replace</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">REGEXP</span><span style="--s-dark:#666666;--s-light:#999999;">,</span><span style="--s-dark:#666666;--s-light:#999999;"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">match</span><span style="--s-dark:#666666;--s-light:#999999;">)</span><span style="--s-dark:#666666;--s-light:#999999;"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F;">        return</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> match</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">replace</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">SOURCE_CDN</span><span style="--s-dark:#666666;--s-light:#999999;">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> TARGET_CDN</span><span style="--s-dark:#666666;--s-light:#999999;">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">      })</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">    };</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">  });</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">}</span></span></code></pre><p>è¿™é‡Œ <code>replace</code> ä½¿ç”¨äº†å‡½æ•°å‚æ•°æ¥æ›¿æ¢å¯¹åº”å†…å®¹ï¼Œæ¯åŒ¹é…åˆ°ä¸€ä¸ªç»“æœï¼Œå°±ä¼šå›è°ƒä¸€æ¬¡è¿™ä¸ªå‡½æ•°ï¼Œå°†å…¶è¿”å›ç»“æœä½œä¸ºæ–°çš„å­—ç¬¦ä¸²</p><p>æ¯”å¦‚è¿™é‡Œçš„ <code>fileContent</code> ä¸º <code>![](https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/07/25/202207251608716.avif)</code></p><p>é‚£ä¹ˆå‡½æ•°é‡Œçš„ <code>match</code> å‚æ•°å°±ä¼šæ˜¯ <code>![](https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/07/25/202207251608716.avif)</code></p><p>ç„¶åæˆ‘ä»¬å†ç®€å•åœ° <code>replace</code> åœ°å€å³å¯</p><h2 id="writepostlist-å®ç°" tabindex="-1">writePostList å®ç° <a class="header-anchor" href="#writepostlist-å®ç°">ğŸ”—</a></h2><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff;" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">const</span><span style="--s-dark:#80A665;--s-light:#59873A;"> writePostList</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> async</span><span style="--s-dark:#666666;--s-light:#999999;"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">postList</span><span style="--s-dark:#666666;--s-light:#999999;">)</span><span style="--s-dark:#666666;--s-light:#999999;"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F;">  return</span><span style="--s-dark:#B8A965;--s-light:#998418;"> Promise</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">all</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">postList</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">map</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">post</span><span style="--s-dark:#666666;--s-light:#999999;"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">    const</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> filepath</span><span style="--s-dark:#666666;--s-light:#999999;">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> fileContent</span><span style="--s-dark:#666666;--s-light:#999999;"> }</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> post</span><span style="--s-dark:#666666;--s-light:#999999;">;</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F;">    return</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> new</span><span style="--s-dark:#B8A965;--s-light:#998418;"> Promise</span><span style="--s-dark:#666666;--s-light:#999999;">((</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">resolve</span><span style="--s-dark:#666666;--s-light:#999999;">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> reject</span><span style="--s-dark:#666666;--s-light:#999999;">)</span><span style="--s-dark:#666666;--s-light:#999999;"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">      // å†™å…¥æ–‡ä»¶</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">      fs</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">writeFile</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">filepath</span><span style="--s-dark:#666666;--s-light:#999999;">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> fileContent</span><span style="--s-dark:#666666;--s-light:#999999;">,</span><span style="--s-dark:#666666;--s-light:#999999;"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">err</span><span style="--s-dark:#666666;--s-light:#999999;">)</span><span style="--s-dark:#666666;--s-light:#999999;"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F;">        if</span><span style="--s-dark:#666666;--s-light:#999999;"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">err</span><span style="--s-dark:#666666;--s-light:#999999;">)</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A;">          reject</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">err</span><span style="--s-dark:#666666;--s-light:#999999;">);</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F;">          return</span><span style="--s-dark:#666666;--s-light:#999999;">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">        }</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A;">        resolve</span><span style="--s-dark:#666666;--s-light:#999999;">();</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">      });</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">    });</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">  }));</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">}</span></span></code></pre><p>å®Œæˆä¹‹åæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ª <code>test.md</code> æ¥æµ‹è¯•æ•ˆæœ</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff;" tabindex="0"><code class="language-markdown"><span class="line"><span style="--s-dark:#666666;--s-light:#999999;">![](</span><span style="--s-dark:#DEDCD590;--s-dark-text-decoration:underline;--s-light:#393A3490;--s-light-text-decoration:underline;">https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/07/25/202207251608716.avif</span><span style="--s-dark:#666666;--s-light:#999999;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">aa</span><span style="--s-dark:#666666;--s-light:#999999;">![](</span><span style="--s-dark:#DEDCD590;--s-dark-text-decoration:underline;--s-light:#393A3490;--s-light-text-decoration:underline;">https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/07/25/202207251608716.avif</span><span style="--s-dark:#666666;--s-light:#999999;">)</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">bb</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">![](</span><span style="--s-dark:#DEDCD590;--s-dark-text-decoration:underline;--s-light:#393A3490;--s-light-text-decoration:underline;">https://sm.ms/xx.avif</span><span style="--s-dark:#666666;--s-light:#999999;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/202207251608716.avif</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/202207251608716.avif</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">aaahttps://fastly.jsdelivr.net/gh/Dedicatus546/image@main/202207251608716.avif</span></span></code></pre><p>ç„¶åæˆ‘ä»¬æ‰§è¡Œ <code>node ./replacePicCdn.js</code></p><p><img src="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/07/25/202207251623316.avif" alt=""></p><p>ç„¶åæˆ‘ä»¬å°±å¯ä»¥çœ‹è§æ–‡ä»¶å‘ç”Ÿæ”¹å˜äº†</p><p><img src="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/07/25/202207251624556.avif" alt=""></p><h1 id="åè®°" tabindex="-1">åè®° <a class="header-anchor" href="#åè®°">ğŸ”—</a></h1><p>è™½ç„¶æ˜¯ä¸€ä¸ªç®€å•çš„å°å·¥å…·ä¸è¿‡è¿˜æ˜¯ç›¸å½“æœ‰è¶£çš„</p><p>ä¸»è¦æ˜¯åœ¨æ­£åˆ™è¿™ä¸€å—ï¼Œé€šè¿‡ <code>new RegExp</code>çš„æ­£åˆ™ï¼Œ<code>\\</code> è¿™ä¸ªä¹Ÿéœ€è¦è½¬ä¹‰</p><p>æ¯”å¦‚å­—é¢é‡æƒ…å†µä¸‹ <code>/!\\[.*\\]\\(.*\\)/mg</code> è¿™æ ·å†™å³å¯</p><p>ä½†æ˜¯ <code>new</code> çš„è¯å°±è¦ <code>new RegExp(&quot;!\\\\[.*\\\\]&quot;, &quot;mg&quot;)</code> ï¼Œåœ¨è¿™é‡Œå¡äº†å¥½ä¸€ä¼šäº†</p><p><img src="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/07/25/202207251631748.avif" alt=""></p>`,48)])))}};export{B as categories,A as date,f as default,y as key,C as meta,c as tags,k as title,D as updated,o as wordCount};
