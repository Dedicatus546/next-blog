import{_ as L,a as b,b as P,u as y}from"./app-CS_wWiiK.js";import{defineComponent as h,computed as C,createElementBlock as p,openBlock as l,createElementVNode as n,Fragment as k,renderList as j,unref as c,normalizeClass as z,toDisplayString as f,resolveComponent as M,createBlock as R,withCtx as v,createVNode as d,createTextVNode as A,useTemplateRef as T,onMounted as I}from"vue";import{_ as K}from"./MujikaAuthorAvatar-QpKYZUKf.js";import{useRouter as B}from"vue-router";import{storeToRefs as D}from"pinia";import{useEventListener as E}from"@vueuse/core";import"nprogress";import"pinia-plugin-persistedstate";import"vue-router-better-scroller";import"@vueuse/components";import"@vueuse/router";import"octokit";import"date-fns";const N={flex:"","gap-2":"","justify-center":"","lg:gap-4":"",class:"mujika-pagination"},V=["disabled"],H=["onClick"],F={key:1},U=["disabled"],m=5,q=h({__name:"MujikaPagination",props:{page:{default:1},pageSize:{default:10},total:{default:0}},emits:["pageChange","update:page"],setup(r,{emit:a}){const u=a,e=C(()=>r.pageSize===0?0:Math.max(1,Math.ceil(r.total/r.pageSize))),_=C(()=>{let o;if(e.value>=m){o=[];const t=Math.ceil((m-2)/2)+1,s=m-t;if(r.page<=t){for(let i=1;i<=m-1;i++)o.push(i);o.push(-1,e.value)}else if(r.page>=e.value-s){o.push(1,-1);for(let i=e.value-m+2;i<=e.value;i++)o.push(i)}else{o.push(1,-1);for(let i=r.page-t+2;i<=r.page+s-1;i++)o.push(i);o.push(-1,e.value)}}else o=Array.from({length:e.value}).map((t,s)=>s+1);return o}),g=o=>{o<1||o>e.value||(u("pageChange",o),u("update:page",o))};return(o,t)=>(l(),p("div",N,[n("button",{disabled:o.page<=1,class:"mujika-pagination-button",onClick:t[0]||(t[0]=s=>g(o.page-1))},t[2]||(t[2]=[n("i",{class:"i-mi:caret-left"},null,-1)]),8,V),(l(!0),p(k,null,j(c(_),s=>(l(),p(k,{key:s},[s>0?(l(),p("button",{key:0,class:z(["mujika-pagination-button",{active:o.page===s}]),onClick:i=>g(s)},f(s),11,H)):(l(),p("div",F,"..."))],64))),128)),n("button",{disabled:o.page>=c(e),class:"mujika-pagination-button",onClick:t[1]||(t[1]=s=>g(o.page+1))},t[3]||(t[3]=[n("i",{class:"i-mi:caret-right"},null,-1)]),8,U)]))}}),G=L(q,[["__scopeId","data-v-fa744100"]]),J={flex:"~ col","gap-4":""},O={text:"30px center"},Q=["innerHTML"],W=h({__name:"MujikaPostListItem",props:{post:{}},setup(r){return(a,u)=>{const e=M("RouterLink");return l(),R(b,{"padding-level":2},{default:v(()=>[n("div",J,[n("h1",O,[d(e,{to:a.post.path,"break-all":"",relative:"","before:mx-auto":"","before:h-2px":"","before:w-0":"","before:content-empty":"","before:transition":"","before:inset-x-0":"","before:bottom--5px":"","before:absolute":"","before:hover:w-full":"","before:hover:bg":"[var(--mygo-c-text-1)]"},{default:v(()=>[A(f(a.post.title),1)]),_:1},8,["to"])]),d(P,{page:a.post},null,8,["page"]),n("div",{class:"kan-doc",innerHTML:a.post.excerpt},null,8,Q)])]),_:1})}}}),X={flex:"","gap-4":"","items-center":""},Y={flex:"~ col","gap-1":"","items-center":""},Z={flex:"~ col","gap-1":"","items-center":""},tt={flex:"~ col","gap-1":"","items-center":""},et=h({__name:"MujikaAuthorStatistic",setup(r){const a=y();return(u,e)=>(l(),p("div",X,[n("div",Y,[e[0]||(e[0]=n("div",null,"文章",-1)),n("div",null,f(c(a).state.list.length),1)]),n("div",Z,[e[1]||(e[1]=n("div",null,"分类",-1)),n("div",null,f(c(a).categoryList.length),1)]),n("div",tt,[e[2]||(e[2]=n("div",null,"标签",-1)),n("div",null,f(c(a).tagList.length),1)])]))}}),ot={},nt={class:"mujika-aside",w:"280px","flex-shrink-0":"","top-2":"",sticky:"","max-h":"[calc(100vh-var(--spacing)*4)]"},it={flex:"~ col","gap-4":"","items-center":""},at={flex:"~ col","gap-2":"","items-center":""};function st(r,a){const u=K,e=M("RouterLink"),_=et,g=b;return l(),p("aside",nt,[d(g,{"has-padding":!1,"px-4":"","py-8":""},{default:v(()=>[n("div",it,[d(u,{"w-120px":""}),n("div",at,[d(e,{to:"/about"},{default:v(()=>a[0]||(a[0]=[n("div",null,"Deidactus545",-1)])),_:1}),a[1]||(a[1]=n("div",{"text-center":"","break-all":"",text:"[var(--mygo-c-text-2)]"}," Index-Librorum-Prohibitorum ",-1))]),d(_)])]),_:1})])}const rt=L(ot,[["render",st]]),lt={flex:"","gap-2":"","items-start":""},ut={flex:"~ col grow","gap-2":""},Ct=h({__name:"index",setup(r){const a=B(),u=y(),{state:e}=u,{renderList:_}=D(u),g=T("postListContainerRef"),o=t=>{a.push("/pages/"+t)};return I(()=>{E(g,"click",t=>{const i=t.target.closest("a");if(!t.defaultPrevented&&i&&t.button===0&&i.target!=="_blank"&&i.rel!=="external"&&!i.download&&!t.metaKey&&!t.ctrlKey&&!t.shiftKey&&!t.altKey){if(new URL(i.href).origin!==window.location.origin)return;t.preventDefault()}})}),(t,s)=>{const i=rt,x=W,w=G,S=b;return l(),p("div",lt,[d(i,{"un-hidden":"","lg:block":""}),n("div",ut,[n("div",{flex:"~ col","gap-2":"",ref_key:"postListContainerRef",ref:g},[(l(!0),p(k,null,j(c(_),$=>(l(),R(x,{post:$,key:$.hash},null,8,["post"]))),128))],512),d(S,null,{default:v(()=>[d(w,{page:c(e).pagination.page,"page-size":c(e).pagination.pageSize,total:c(e).pagination.total,onPageChange:o},null,8,["page","page-size","total"])]),_:1})])])}}});export{Ct as default};
