import{_ as b,a as x,b as P,u as j}from"./app-JKHGxrHx.js";import{defineComponent as h,computed as L,createElementBlock as p,openBlock as r,createElementVNode as o,Fragment as k,renderList as y,unref as c,normalizeClass as z,toDisplayString as f,resolveComponent as M,createBlock as R,withCtx as v,createVNode as d,useTemplateRef as A,onMounted as I}from"vue";import{_ as K}from"./MujikaAuthorAvatar-BEsvBmbg.js";import{useRouter as T}from"vue-router";import{storeToRefs as B}from"pinia";import{useEventListener as D}from"@vueuse/core";import"nprogress";import"pinia-plugin-persistedstate";import"vue-router-better-scroller";import"@vueuse/components";import"@vueuse/router";import"octokit";import"date-fns";const E={flex:"","gap-2":"","justify-center":"","lg:gap-4":"",class:"mujika-pagination"},H=["disabled"],N=["onClick"],V={key:1},F=["disabled"],m=5,U=h({__name:"MujikaPagination",props:{page:{default:1},pageSize:{default:10},total:{default:0}},emits:["pageChange","update:page"],setup(l,{emit:s}){const u=s,e=L(()=>l.pageSize===0?0:Math.max(1,Math.ceil(l.total/l.pageSize))),g=L(()=>{let n;if(e.value>=m){n=[];const t=Math.ceil((m-2)/2)+1,a=m-t;if(l.page<=t){for(let i=1;i<=m-1;i++)n.push(i);n.push(-1,e.value)}else if(l.page>=e.value-a){n.push(1,-1);for(let i=e.value-m+2;i<=e.value;i++)n.push(i)}else{n.push(1,-1);for(let i=l.page-t+2;i<=l.page+a-1;i++)n.push(i);n.push(-1,e.value)}}else n=Array.from({length:e.value}).map((t,a)=>a+1);return n}),_=n=>{n<1||n>e.value||(u("pageChange",n),u("update:page",n))};return(n,t)=>(r(),p("div",E,[o("button",{disabled:n.page<=1,class:"mujika-pagination-button",onClick:t[0]||(t[0]=a=>_(n.page-1))},t[2]||(t[2]=[o("i",{class:"i-mi:caret-left"},null,-1)]),8,H),(r(!0),p(k,null,y(c(g),a=>(r(),p(k,{key:a},[a>0?(r(),p("button",{key:0,class:z(["mujika-pagination-button",{active:n.page===a}]),onClick:i=>_(a)},f(a),11,N)):(r(),p("div",V,"..."))],64))),128)),o("button",{disabled:n.page>=c(e),class:"mujika-pagination-button",onClick:t[1]||(t[1]=a=>_(n.page+1))},t[3]||(t[3]=[o("i",{class:"i-mi:caret-right"},null,-1)]),8,F)]))}}),q=b(U,[["__scopeId","data-v-fa744100"]]),G={flex:"~ col","gap-4":""},J={"break-all":"",text:"34px center"},O=["innerHTML"],Q=h({__name:"MujikaPostListItem",props:{post:{}},setup(l){return(s,u)=>{const e=M("RouterLink");return r(),R(x,{"padding-level":2},{default:v(()=>[o("div",G,[d(e,{to:s.post.path},{default:v(()=>[o("h2",J,f(s.post.title),1)]),_:1},8,["to"]),d(P,{page:s.post},null,8,["page"]),o("div",{class:"kan-doc",innerHTML:s.post.excerpt},null,8,O)])]),_:1})}}}),W={flex:"","gap-4":"","items-center":""},X={flex:"~ col","gap-1":"","items-center":""},Y={flex:"~ col","gap-1":"","items-center":""},Z={flex:"~ col","gap-1":"","items-center":""},tt=h({__name:"MujikaAuthorStatistic",setup(l){const s=j();return(u,e)=>(r(),p("div",W,[o("div",X,[e[0]||(e[0]=o("div",null,"文章",-1)),o("div",null,f(c(s).state.list.length),1)]),o("div",Y,[e[1]||(e[1]=o("div",null,"分类",-1)),o("div",null,f(c(s).categoryList.length),1)]),o("div",Z,[e[2]||(e[2]=o("div",null,"标签",-1)),o("div",null,f(c(s).tagList.length),1)])]))}}),et={},nt={class:"mujika-aside",w:"280px","flex-shrink-0":"","top-2":"",sticky:"","max-h":"[calc(100vh-var(--spacing)*4)]"},ot={flex:"~ col","gap-4":"","items-center":""},it={flex:"~ col","gap-2":"","items-center":""};function st(l,s){const u=K,e=M("RouterLink"),g=tt,_=x;return r(),p("aside",nt,[d(_,{"has-padding":!1,"px-4":"","py-8":""},{default:v(()=>[o("div",ot,[d(u,{"w-120px":""}),o("div",it,[d(e,{to:"/about"},{default:v(()=>s[0]||(s[0]=[o("div",null,"Deidactus545",-1)])),_:1}),s[1]||(s[1]=o("div",{"text-center":"","break-all":"",text:"[var(--mygo-c-text-2)]"}," Index-Librorum-Prohibitorum ",-1))]),d(g)])]),_:1})])}const at=b(et,[["render",st]]),lt={flex:"","gap-2":"","items-start":""},rt={flex:"~ col grow","gap-2":""},Ct=h({__name:"index",setup(l){const s=T(),u=j(),{state:e}=u,{renderList:g}=B(u),_=A("postListContainerRef"),n=t=>{s.push("/pages/"+t)};return I(()=>{D(_,"click",t=>{const i=t.target.closest("a");if(!t.defaultPrevented&&i&&t.button===0&&i.target!=="_blank"&&i.rel!=="external"&&!i.download&&!t.metaKey&&!t.ctrlKey&&!t.shiftKey&&!t.altKey){if(new URL(i.href).origin!==window.location.origin)return;t.preventDefault()}})}),(t,a)=>{const i=at,$=Q,S=q,w=x;return r(),p("div",lt,[d(i,{"un-hidden":"","lg:block":""}),o("div",rt,[o("div",{flex:"~ col","gap-2":"",ref_key:"postListContainerRef",ref:_},[(r(!0),p(k,null,y(c(g),C=>(r(),R($,{post:C,key:C.hash},null,8,["post"]))),128))],512),d(w,null,{default:v(()=>[d(S,{page:c(e).pagination.page,"page-size":c(e).pagination.pageSize,total:c(e).pagination.total,onPageChange:n},null,8,["page","page-size","total"])]),_:1})])])}}});export{Ct as default};
