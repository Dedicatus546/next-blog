{"version":3,"file":"index-BMFGwWox.js","sources":["../../src/components/MujikaPagination.vue","../../src/components/MujikaAuthorStatistic.vue","../../src/components/MujikaAuthorAvatar.vue","../../src/components/MujikaAuthorAside.vue","../../src/pages/index.vue"],"sourcesContent":["<script setup lang=\"ts\">\nconst {\n  total = 0,\n  page = 1,\n  pageSize = 10,\n} = defineProps<{\n  page?: number;\n  pageSize?: number;\n  total?: number;\n}>();\nconst maxPageCount = 5;\n\nconst emits = defineEmits<{\n  (e: \"pageChange\", page: number): void;\n  (e: \"update:page\", page: number): void;\n}>();\n\nconst pageCount = computed(() => {\n  return pageSize === 0 ? 0 : Math.max(1, Math.ceil(total / pageSize));\n});\n\nconst pageCountRenderList = computed(() => {\n  let res: Array<number> | undefined = undefined;\n  if (pageCount.value >= maxPageCount) {\n    res = [];\n    // left 5\n    // right 4\n    const left = Math.ceil((maxPageCount - 2) / 2) + 1;\n    const right = maxPageCount - left;\n    if (page <= left) {\n      for (let i = 1; i <= maxPageCount - 1; i++) {\n        res.push(i);\n      }\n      res.push(-1, pageCount.value);\n    } else if (page >= pageCount.value - right) {\n      res.push(1, -1);\n      for (\n        let i = pageCount.value - maxPageCount + 2;\n        i <= pageCount.value;\n        i++\n      ) {\n        res.push(i);\n      }\n    } else {\n      res.push(1, -1);\n      for (let i = page - left + 2; i <= page + right - 1; i++) {\n        res.push(i);\n      }\n      res.push(-1, pageCount.value);\n    }\n  } else {\n    res = Array.from({ length: pageCount.value }).map((_, index) => index + 1);\n  }\n  return res;\n});\n\nconst pageChange = (page: number) => {\n  if (page < 1 || page > pageCount.value) {\n    return;\n  }\n  emits(\"pageChange\", page);\n  emits(\"update:page\", page);\n};\n</script>\n\n<template>\n  <div flex gap-2 justify-center lg:gap-4 class=\"mujika-pagination\">\n    <button\n      :disabled=\"page <= 1\"\n      class=\"mujika-pagination-button\"\n      @click=\"pageChange(page - 1)\"\n    >\n      <i class=\"i-mi:caret-left\"></i>\n    </button>\n    <template v-for=\"item of pageCountRenderList\" :key=\"item\">\n      <button\n        v-if=\"item > 0\"\n        class=\"mujika-pagination-button\"\n        :class=\"{ active: page === item }\"\n        @click=\"pageChange(item)\"\n      >\n        {{ item }}\n      </button>\n      <div v-else>...</div>\n    </template>\n    <button\n      :disabled=\"page >= pageCount\"\n      class=\"mujika-pagination-button\"\n      @click=\"pageChange(page + 1)\"\n    >\n      <i class=\"i-mi:caret-right\"></i>\n    </button>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.mujika-pagination {\n  .mujika-pagination-button {\n    --uno: \"px-2 lg:px-3 lg:py-1\";\n    border-radius: var(--mygo-border-radius-base);\n    cursor: pointer;\n    transition: background-color 0.3s ease;\n\n    &:disabled {\n      cursor: not-allowed;\n      color: var(--mygo-c-text-2);\n    }\n\n    &:not([disabled]):hover,\n    &.active {\n      background-color: var(--mygo-c-bg-alt);\n    }\n\n    &.active {\n      border: 1px solid var(--mygo-c-border);\n    }\n  }\n}\n</style>\n","<script setup lang=\"ts\">\nimport { useRootStore } from \"@/stores/useRootStore\";\n\nconst rootStore = useRootStore();\n</script>\n\n<template>\n  <div flex gap-4 items-center>\n    <div flex=\"~ col\" gap-1 items-center>\n      <div>文章</div>\n      <div>{{ rootStore.state.list.length }}</div>\n    </div>\n    <div flex=\"~ col\" gap-1 items-center>\n      <div>分类</div>\n      <div>{{ rootStore.categoryList.length }}</div>\n    </div>\n    <div flex=\"~ col\" gap-1 items-center>\n      <div>标签</div>\n      <div>{{ rootStore.tagList.length }}</div>\n    </div>\n  </div>\n</template>\n\n<style scoped lang=\"scss\"></style>\n","<script setup lang=\"ts\"></script>\n\n<template>\n  <div class=\"mujika-author-avatar\">\n    <img\n      aspect-ratio-square\n      block\n      src=\"https://avatars.githubusercontent.com/u/48575405?v=4\"\n      alt=\"Dedicatus545的头像\"\n    />\n  </div>\n</template>\n\n<style scoped lang=\"scss\">\n.mujika-author-avatar {\n  & > img {\n    width: 120px;\n  }\n}\n</style>\n","<script setup lang=\"ts\"></script>\n\n<template>\n  <aside\n    class=\"mujika-aside\"\n    w=\"280px\"\n    top-2\n    sticky\n    max-h=\"[calc(100vh-var(--spacing)*4)]\"\n  >\n    <MujikaCard :has-padding=\"false\" px-4 py-8>\n      <div flex=\"~ col\" gap-4 items-center>\n        <MujikaAuthorAvatar />\n        <div flex=\"~ col\" gap-2 items-center>\n          <div>Deidactus545</div>\n          <div text=\"[var(--mygo-c-text-2)]\">Index-Librorum-Prohibitorum</div>\n        </div>\n        <MujikaAuthorStatistic />\n      </div>\n    </MujikaCard>\n  </aside>\n</template>\n\n<style lang=\"sass\" scoped></style>\n","<script setup lang=\"ts\">\nimport { useRootStore } from \"@/stores/useRootStore\";\n\nconst store = useRootStore();\n\nconst { onPageChange, state } = store;\nconst { renderList } = storeToRefs(store);\n</script>\n\n<template>\n  <div flex gap-2 items-start>\n    <MujikaAuthorAside un-hidden lg:block />\n    <div flex=\"~ col grow\" gap-2>\n      <MujikaPostListItem\n        :post=\"item\"\n        v-for=\"item of renderList\"\n        :key=\"item.hash\"\n      />\n      <MujikaCard>\n        <MujikaPagination\n          :page=\"state.pagination.page\"\n          :page-size=\"state.pagination.pageSize\"\n          :total=\"state.pagination.total\"\n          @page-change=\"onPageChange\"\n        />\n      </MujikaCard>\n    </div>\n    <!-- <MujikaIndexAside /> -->\n  </div>\n</template>\n\n<style scoped lang=\"scss\"></style>\n"],"names":["maxPageCount","emits","__emit","pageCount","computed","__props","pageCountRenderList","res","left","right","_","index","pageChange","page","rootStore","useRootStore","_sfc_render","_ctx","_cache","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createVNode","_component_MujikaCard","_withCtx","store","onPageChange","state","renderList","storeToRefs"],"mappings":"4sBAUMA,EAAe,uJAErB,MAAMC,EAAQC,EAKRC,EAAYC,EAAS,IAClBC,EAAA,WAAa,EAAI,EAAI,KAAK,IAAI,EAAG,KAAK,KAAKA,EAAA,MAAQA,EAAQ,QAAA,CAAC,CACpE,EAEKC,EAAsBF,EAAS,IAAM,CACzC,IAAIG,EACA,GAAAJ,EAAU,OAASH,EAAc,CACnCO,EAAM,CAAC,EAGP,MAAMC,EAAO,KAAK,MAAMR,EAAe,GAAK,CAAC,EAAI,EAC3CS,EAAQT,EAAeQ,EACzB,GAAAH,EAAA,MAAQG,EAAM,CAChB,QAAS,EAAI,EAAG,GAAKR,EAAe,EAAG,IACrCO,EAAI,KAAK,CAAC,EAERA,EAAA,KAAK,GAAIJ,EAAU,KAAK,CACnB,SAAAE,EAAA,MAAQF,EAAU,MAAQM,EAAO,CACtCF,EAAA,KAAK,EAAG,EAAE,EAER,QAAA,EAAIJ,EAAU,MAAQH,EAAe,EACzC,GAAKG,EAAU,MACf,IAEAI,EAAI,KAAK,CAAC,CACZ,KACK,CACDA,EAAA,KAAK,EAAG,EAAE,EACL,QAAA,EAAIF,EAAI,KAAGG,EAAO,EAAG,GAAKH,EAAI,KAAGI,EAAQ,EAAG,IACnDF,EAAI,KAAK,CAAC,EAERA,EAAA,KAAK,GAAIJ,EAAU,KAAK,CAAA,CAC9B,MAEAI,EAAM,MAAM,KAAK,CAAE,OAAQJ,EAAU,MAAO,EAAE,IAAI,CAACO,EAAGC,IAAUA,EAAQ,CAAC,EAEpE,OAAAJ,CAAA,CACR,EAEKK,EAAcC,GAAiB,CAC/BA,EAAO,GAAKA,EAAOV,EAAU,QAGjCF,EAAM,aAAcY,CAAI,EACxBZ,EAAM,cAAeY,CAAI,EAC3B,wuCC3DA,MAAMC,EAAYC,EAAa,wVCA7B,SAAAC,EAAAC,EAAAC,EAAA,QAMIC,EAAA,EAAAC,EAAA,MAAAC,EAAAH,EAAA,CAAA,IAAAA,EAAA,CAAA,EAAA,CAJAI,EAAA,MAAmB,CACnB,sBAAK,GACL,MAA0D,GAC1D,IAAI,2JCJND,EAAoB,CACpB,MAAS,eACT,EAAA,QACA,QAAM,GACN,oDAGWE,GAAQ,CAAC,KAAA,QAAM,QAAA,gEAQbJ,EAAA,EAAAC,EAAA,QAAAC,EAAA,CATAG,EAAAC,EAAkB,CAAE,cAAI,GAAC,OAAA,YAV1C,EAAA,CAWM,QAAAC,EAAA,OACwB,MAAAH,GAAA,IAIhB,EAHDL,GAAK,IAAOA,EAAA,CAAA,EAAAI,EAAA,MAAA,CAAC,KAAA,QAAM,QAAA,oBACtB,EAAA,CACAA,EAAoE,MAA/D,KAAI,cAAC,wEAEa,EAAA,EAAA,UAjBjC,iJCGA,MAAMK,EAAQZ,EAAa,EAErB,CAAE,aAAAa,EAAc,MAAAC,CAAA,EAAUF,EAC1B,YAAEG,CAAA,EAAeC,EAAYJ,CAAK"}