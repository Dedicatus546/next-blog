import{_ as x,a as $,b as P,u as j}from"./app-C7bQa6bS.js";import{defineComponent as h,computed as L,createElementBlock as u,openBlock as l,createElementVNode as o,Fragment as k,renderList as y,unref as c,normalizeClass as w,toDisplayString as f,resolveComponent as z,createBlock as M,withCtx as v,createVNode as d,useTemplateRef as A,onMounted as I}from"vue";import{useRouter as D}from"vue-router";import{storeToRefs as K}from"pinia";import{useEventListener as T}from"@vueuse/core";import"nprogress";import"pinia-plugin-persistedstate";import"vue-router-better-scroller";import"@vueuse/components";import"@vueuse/router";import"octokit";import"date-fns";const B={flex:"","gap-2":"","justify-center":"","lg:gap-4":"",class:"mujika-pagination"},E=["disabled"],H=["onClick"],N={key:1},V=["disabled"],m=5,q=h({__name:"MujikaPagination",props:{page:{default:1},pageSize:{default:10},total:{default:0}},emits:["pageChange","update:page"],setup(r,{emit:s}){const p=s,e=L(()=>r.pageSize===0?0:Math.max(1,Math.ceil(r.total/r.pageSize))),g=L(()=>{let n;if(e.value>=m){n=[];const t=Math.ceil((m-2)/2)+1,i=m-t;if(r.page<=t){for(let a=1;a<=m-1;a++)n.push(a);n.push(-1,e.value)}else if(r.page>=e.value-i){n.push(1,-1);for(let a=e.value-m+2;a<=e.value;a++)n.push(a)}else{n.push(1,-1);for(let a=r.page-t+2;a<=r.page+i-1;a++)n.push(a);n.push(-1,e.value)}}else n=Array.from({length:e.value}).map((t,i)=>i+1);return n}),_=n=>{n<1||n>e.value||(p("pageChange",n),p("update:page",n))};return(n,t)=>(l(),u("div",B,[o("button",{disabled:n.page<=1,class:"mujika-pagination-button",onClick:t[0]||(t[0]=i=>_(n.page-1))},t[2]||(t[2]=[o("i",{class:"i-mi:caret-left"},null,-1)]),8,E),(l(!0),u(k,null,y(c(g),i=>(l(),u(k,{key:i},[i>0?(l(),u("button",{key:0,class:w(["mujika-pagination-button",{active:n.page===i}]),onClick:a=>_(i)},f(i),11,H)):(l(),u("div",N,"..."))],64))),128)),o("button",{disabled:n.page>=c(e),class:"mujika-pagination-button",onClick:t[1]||(t[1]=i=>_(n.page+1))},t[3]||(t[3]=[o("i",{class:"i-mi:caret-right"},null,-1)]),8,V)]))}}),F=x(q,[["__scopeId","data-v-fa744100"]]),U={flex:"~ col","gap-4":""},G={"break-all":"",text:"34px center"},J=["innerHTML"],O=h({__name:"MujikaPostListItem",props:{post:{}},setup(r){return(s,p)=>{const e=z("RouterLink");return l(),M($,{"padding-level":2},{default:v(()=>[o("div",U,[d(e,{to:s.post.path},{default:v(()=>[o("h2",G,f(s.post.title),1)]),_:1},8,["to"]),d(P,{page:s.post},null,8,["page"]),o("div",{class:"kan-doc",innerHTML:s.post.excerpt},null,8,J)])]),_:1})}}}),Q={flex:"","gap-4":"","items-center":""},W={flex:"~ col","gap-1":"","items-center":""},X={flex:"~ col","gap-1":"","items-center":""},Y={flex:"~ col","gap-1":"","items-center":""},Z=h({__name:"MujikaAuthorStatistic",setup(r){const s=j();return(p,e)=>(l(),u("div",Q,[o("div",W,[e[0]||(e[0]=o("div",null,"文章",-1)),o("div",null,f(c(s).state.list.length),1)]),o("div",X,[e[1]||(e[1]=o("div",null,"分类",-1)),o("div",null,f(c(s).categoryList.length),1)]),o("div",Y,[e[2]||(e[2]=o("div",null,"标签",-1)),o("div",null,f(c(s).tagList.length),1)])]))}}),tt={},et={class:"mujika-author-avatar"};function nt(r,s){return l(),u("div",et,s[0]||(s[0]=[o("img",{"aspect-ratio-square":"",block:"",src:"https://avatars.githubusercontent.com/u/48575405?v=4",alt:"Dedicatus545的头像"},null,-1)]))}const ot=x(tt,[["render",nt],["__scopeId","data-v-8be5a53d"]]),at={},st={class:"mujika-aside",w:"280px","flex-shrink-0":"","top-2":"",sticky:"","max-h":"[calc(100vh-var(--spacing)*4)]"},it={flex:"~ col","gap-4":"","items-center":""};function rt(r,s){const p=ot,e=Z,g=$;return l(),u("aside",st,[d(g,{"has-padding":!1,"px-4":"","py-8":""},{default:v(()=>[o("div",it,[d(p),s[0]||(s[0]=o("div",{flex:"~ col","gap-2":"","items-center":""},[o("div",null,"Deidactus545"),o("div",{"text-center":"","break-all":"",text:"[var(--mygo-c-text-2)]"}," Index-Librorum-Prohibitorum ")],-1)),d(e)])]),_:1})])}const lt=x(at,[["render",rt]]),ut={flex:"","gap-2":"","items-start":""},pt={flex:"~ col grow","gap-2":""},Ct=h({__name:"index",setup(r){const s=D(),p=j(),{state:e}=p,{renderList:g}=K(p),_=A("postListContainerRef"),n=t=>{s.push("/pages/"+t)};return I(()=>{T(_,"click",t=>{const a=t.target.closest("a");if(!t.defaultPrevented&&a&&t.button===0&&a.target!=="_blank"&&a.rel!=="external"&&!a.download&&!t.metaKey&&!t.ctrlKey&&!t.shiftKey&&!t.altKey){if(new URL(a.href).origin!==window.location.origin)return;t.preventDefault()}})}),(t,i)=>{const a=lt,b=O,R=F,S=$;return l(),u("div",ut,[d(a,{"un-hidden":"","lg:block":""}),o("div",pt,[o("div",{flex:"~ col","gap-2":"",ref_key:"postListContainerRef",ref:_},[(l(!0),u(k,null,y(c(g),C=>(l(),M(b,{post:C,key:C.hash},null,8,["post"]))),128))],512),d(S,null,{default:v(()=>[d(R,{page:c(e).pagination.page,"page-size":c(e).pagination.pageSize,total:c(e).pagination.total,onPageChange:n},null,8,["page","page-size","total"])]),_:1})])])}}});export{Ct as default};
