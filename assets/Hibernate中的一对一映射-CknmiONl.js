import{k as n,a as t,o as l,l as p}from"./app-I7hi7fN_.js";const e={class:"kan-doc"},k="Hibernate中的一对一映射",y=1591888402,D="2020-06-11T23:13:22.000Z",A="2023-02-13T18:28:44.000Z",B=["Java","Hibernate"],c=["编程"],o=6278,C=[{property:"og:title",content:"Hibernate中的一对一映射"},{name:"twitter:title",content:"Hibernate中的一对一映射"}],E={__name:"Hibernate中的一对一映射",setup(i,{expose:a}){return a({frontmatter:{title:"Hibernate中的一对一映射",key:1591888402,date:"2020-06-11T23:13:22.000Z",updated:"2023-02-13T18:28:44.000Z",tags:["Java","Hibernate"],categories:["编程"],wordCount:6278,meta:[{property:"og:title",content:"Hibernate中的一对一映射"},{name:"twitter:title",content:"Hibernate中的一对一映射"}]}}),n({title:"Hibernate中的一对一映射",meta:[{property:"og:title",content:"Hibernate中的一对一映射"},{name:"twitter:title",content:"Hibernate中的一对一映射"}]}),(g,s)=>(l(),t("div",e,s[0]||(s[0]=[p(`<h1 id="前言" tabindex="-1">前言 <a class="header-anchor" href="#前言">🔗</a></h1><p>上课很容易走神…<br> emmm…<br> 老师讲的注解的<br> 那我就讲讲XML配置吧<br> 可能讲的有错误<br> 希望大佬能指正！感激不尽</p><h1 id="准备" tabindex="-1">准备 <a class="header-anchor" href="#准备">🔗</a></h1><p>创建一个有Hibernate环境的Java项目 这个可以看之前的帖子 从0搭建一个基于Hibernate的Java项目</p><h1 id="两种一对一映射方式" tabindex="-1">两种一对一映射方式 <a class="header-anchor" href="#两种一对一映射方式">🔗</a></h1><p>一对一其实也可以不用拆表在一个表内进行操作 至于为什么要拆，我个人觉得可能是为了垂直分表？</p><h2 id="主键一对一" tabindex="-1">主键一对一 <a class="header-anchor" href="#主键一对一">🔗</a></h2><p>主键一对一，可以理解为一个表的主键同时也是外键，这个外键对应着另一个表的主键 这里我们用User和Address来做例子 一个User对应一个Address 一个Address对应一个User</p><p>User类</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff;" tabindex="0"><code class="language-java"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">public</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> class</span><span style="--s-dark:#5DA994;--s-light:#2E8F82;"> User</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">    private</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> int</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> id</span><span style="--s-dark:#666666;--s-light:#999999;">;</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">    private</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;"> String</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> name</span><span style="--s-dark:#666666;--s-light:#999999;">;</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">    // 对应的地址对象</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">    private</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;"> Address</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> address</span><span style="--s-dark:#666666;--s-light:#999999;">;</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">    // ...省略getter、setter和toString方法</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">}</span></span></code></pre><p>User类对应的User.hbm.xml</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff;" tabindex="0"><code class="language-xml"><span class="line"><span style="--s-dark:#666666;--s-light:#999999;">&lt;?</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">xml</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> version</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">1.0</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> encoding</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">UTF-8</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;"> ?&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">&lt;!</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">DOCTYPE</span><span style="--s-dark:#C99076;--s-light:#A65E2B;"> hibernate-mapping</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;"> PUBLIC</span></span>
<span class="line"><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">        &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;</span></span>
<span class="line"><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">        &quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">&lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">hibernate-mapping</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">    &lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">class</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> name</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">User</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">        &lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">id</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> name</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">id</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">            &lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">generator</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> class</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">native</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">/&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">        &lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">id</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">        &lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">property</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> name</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">name</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">/&gt;</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">        &lt;!-- 设置一对一的属性 --&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">        &lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">one-to-one</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> name</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">address</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">/&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">    &lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">class</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">&lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">hibernate-mapping</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span></code></pre><p>Address类</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff;" tabindex="0"><code class="language-java"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">public</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> class</span><span style="--s-dark:#5DA994;--s-light:#2E8F82;"> Address</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">    private</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> int</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> id</span><span style="--s-dark:#666666;--s-light:#999999;">;</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">    // 省</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">    private</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;"> String</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> province</span><span style="--s-dark:#666666;--s-light:#999999;">;</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">    // 市</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">    private</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;"> String</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> city</span><span style="--s-dark:#666666;--s-light:#999999;">;</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">    // 对应的用户对象</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">    private</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;"> User</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> user</span><span style="--s-dark:#666666;--s-light:#999999;">;</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">    // ...省略getter、setter和toString方法</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">}</span></span></code></pre><p>Address类的Address.hbm.xml</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff;" tabindex="0"><code class="language-xml"><span class="line"><span style="--s-dark:#666666;--s-light:#999999;">&lt;?</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">xml</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> version</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">1.0</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> encoding</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">UTF-8</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;"> ?&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">&lt;!</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">DOCTYPE</span><span style="--s-dark:#C99076;--s-light:#A65E2B;"> hibernate-mapping</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;"> PUBLIC</span></span>
<span class="line"><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">        &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;</span></span>
<span class="line"><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">        &quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">&lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">hibernate-mapping</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">    &lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">class</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> name</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">Address</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">        &lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">id</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> name</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">id</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">            &lt;!-- 设置通过外键生成主键 --&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">            &lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">generator</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> class</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">foreign</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">                &lt;!-- 设置通过user属性来获取关联表的主键来作为主键 --&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">                &lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">param</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> name</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">property</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">user</span><span style="--s-dark:#666666;--s-light:#999999;">&lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">param</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">            &lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">generator</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">        &lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">id</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">        &lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">property</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> name</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">province</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">/&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">        &lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">property</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> name</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">city</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">/&gt;</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">        &lt;!-- </span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">            @constrained：表示这个表的主键同时也是外键</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">         --&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">        &lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">one-to-one</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> name</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">user</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> constrained</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">true</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">/&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">    &lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">class</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">&lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">hibernate-mapping</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span></code></pre><p>然后我们写个测试类来测试</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff;" tabindex="0"><code class="language-java"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">public</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> class</span><span style="--s-dark:#5DA994;--s-light:#2E8F82;"> HibernateTest</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">    @</span><span style="--s-dark:#CB7676;--s-light:#AB5959;">Test</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">    public</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> void</span><span style="--s-dark:#80A665;--s-light:#59873A;"> test01</span><span style="--s-dark:#666666;--s-light:#999999;">()</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">        Session</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> session</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> SessionUtil</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">getSession</span><span style="--s-dark:#666666;--s-light:#999999;">();</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">        // 开启事务</span></span>
<span class="line"><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">        Transaction</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> transaction</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> session</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">beginTransaction</span><span style="--s-dark:#666666;--s-light:#999999;">();</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">        // new一个新用户</span></span>
<span class="line"><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">        User</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> user</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#4D9375;--s-light:#1E754F;"> new</span><span style="--s-dark:#80A665;--s-light:#59873A;"> User</span><span style="--s-dark:#666666;--s-light:#999999;">();</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">        user</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">setName</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">lwf</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">);</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">        // new一个新地址</span></span>
<span class="line"><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">        Address</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> address</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#4D9375;--s-light:#1E754F;"> new</span><span style="--s-dark:#80A665;--s-light:#59873A;"> Address</span><span style="--s-dark:#666666;--s-light:#999999;">();</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">        address</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">setProvince</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">广东</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">);</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">        address</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">setCity</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">广州</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">);</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">        // 设置用户的地址</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">        address</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">setUser</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">user</span><span style="--s-dark:#666666;--s-light:#999999;">);</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">        // 保存用户</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">        session</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">save</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">user</span><span style="--s-dark:#666666;--s-light:#999999;">);</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">        // 保存地址</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">        session</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">save</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">address</span><span style="--s-dark:#666666;--s-light:#999999;">);</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">        // 提交事务</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">        transaction</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">commit</span><span style="--s-dark:#666666;--s-light:#999999;">();</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">        // 关闭连接</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">        session</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">close</span><span style="--s-dark:#666666;--s-light:#999999;">();</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">        // 关闭连接工厂</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">        SessionUtil</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">close</span><span style="--s-dark:#666666;--s-light:#999999;">();</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">    }</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">}</span></span></code></pre><p>运行之后，就可以看到数据库新增的记录</p><p>user表</p><p><img src="https://i.loli.net/2019/11/05/Mt5IoXHyGn6xASh.png" alt=""></p><p>address表</p><p><img src="https://i.loli.net/2019/11/05/VszCFE9LtRmy5MI.png" alt=""></p><p>address表里面的外键</p><p><img src="https://i.loli.net/2019/11/05/odphIC4bXteuTO5.png" alt=""></p><p><strong>PS：</strong></p><ul><li>注意点1：</li></ul><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff;" tabindex="0"><code class="language-java"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">public</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> class</span><span style="--s-dark:#5DA994;--s-light:#2E8F82;"> HibernateTest</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">    @</span><span style="--s-dark:#CB7676;--s-light:#AB5959;">Test</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">    public</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> void</span><span style="--s-dark:#80A665;--s-light:#59873A;"> test01</span><span style="--s-dark:#666666;--s-light:#999999;">()</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">        // ... 省略部分代码</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">        address</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">setUser</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">user</span><span style="--s-dark:#666666;--s-light:#999999;">);</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">        // ... 省略部分代码</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">    }</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">}</span></span></code></pre><p>这里可能有人会问为什么是 <code>address.setUser(user)</code> 而不是 <code>user.setAddress(address)</code></p><p>其实我们是在address设置的外键指向user 当我们希望插入新的一个address对象的时候 肯定需要从user获取他的主键值来作为address的主键 如果是 <code>user.setAddress(address)</code> 的话 address对象其实是没有对user的引用的 插入的时候自然找不到user对象便报错</p><p>报错信息 <code>org.hibernate.id.IdentifierGenerationException: attempted to assign id from null one-to-one property [pojo.Address.user]</code> 翻译过来就是尝试从一个空属性(user对象)中获取id(主键)属性</p><h2 id="利用多对一实现一对一" tabindex="-1">利用多对一实现一对一 <a class="header-anchor" href="#利用多对一实现一对一">🔗</a></h2><p>上面是利用其他表的主键作为自己的主键 多对一实现的一对一就是将自己的主键映射到另一个表的普通字段</p><p>还是用上面User和Address来作例子 User类</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff;" tabindex="0"><code class="language-java"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">public</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> class</span><span style="--s-dark:#5DA994;--s-light:#2E8F82;"> User</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">    private</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> int</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> id</span><span style="--s-dark:#666666;--s-light:#999999;">;</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">    private</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;"> String</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> name</span><span style="--s-dark:#666666;--s-light:#999999;">;</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">    // 对应的地址对象</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">    private</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;"> Address</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> address</span><span style="--s-dark:#666666;--s-light:#999999;">;</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">    // ...省略getter、setter和toString方法</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">}</span></span></code></pre><p>User类对应的User.hbm.xml</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff;" tabindex="0"><code class="language-xml"><span class="line"><span style="--s-dark:#666666;--s-light:#999999;">&lt;?</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">xml</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> version</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">1.0</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> encoding</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">UTF-8</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;"> ?&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">&lt;!</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">DOCTYPE</span><span style="--s-dark:#C99076;--s-light:#A65E2B;"> hibernate-mapping</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;"> PUBLIC</span></span>
<span class="line"><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">        &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;</span></span>
<span class="line"><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">        &quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">&lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">hibernate-mapping</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">    &lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">class</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> name</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">User</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">        &lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">id</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> name</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">id</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">            &lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">generator</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> class</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">native</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">/&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">        &lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">id</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">        &lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">property</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> name</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">name</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">/&gt;</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">        &lt;!-- 设置多对一的属性 --&gt;</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">        &lt;!-- </span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">            @unique=true 表示我们这一端是唯一的</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">            @column=&quot;address_id&quot; 表示我们对应的表的外键字段。这个外键指向了address的主键</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">         --&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">        &lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">many-to-one</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> name</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">address</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> column</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">address_id</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> unique</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">true</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">/&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">    &lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">class</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">&lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">hibernate-mapping</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span></code></pre><p>Address类</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff;" tabindex="0"><code class="language-java"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">public</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> class</span><span style="--s-dark:#5DA994;--s-light:#2E8F82;"> Address</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">    private</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> int</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> id</span><span style="--s-dark:#666666;--s-light:#999999;">;</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">    // 省</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">    private</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;"> String</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> province</span><span style="--s-dark:#666666;--s-light:#999999;">;</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">    // 市</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">    private</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;"> String</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> city</span><span style="--s-dark:#666666;--s-light:#999999;">;</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">    // 对应的用户对象</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">    private</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;"> User</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> user</span><span style="--s-dark:#666666;--s-light:#999999;">;</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">    // ...省略getter、setter和toString方法</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">}</span></span></code></pre><p>Address类的Address.hbm.xml</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff;" tabindex="0"><code class="language-xml"><span class="line"><span style="--s-dark:#666666;--s-light:#999999;">&lt;?</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">xml</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> version</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">1.0</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> encoding</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">UTF-8</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;"> ?&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">&lt;!</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">DOCTYPE</span><span style="--s-dark:#C99076;--s-light:#A65E2B;"> hibernate-mapping</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;"> PUBLIC</span></span>
<span class="line"><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">        &quot;-//Hibernate/Hibernate Mapping DTD 3.0//EN&quot;</span></span>
<span class="line"><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">        &quot;http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">&lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">hibernate-mapping</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">    &lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">class</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> name</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">Address</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">        &lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">id</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> name</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">id</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">            &lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">generator</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> class</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">native</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">/&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">        &lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">id</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">        &lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">property</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> name</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">province</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">/&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">        &lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">property</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> name</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">city</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">/&gt;</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">        &lt;!-- </span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">            @name=&quot;user&quot; 表示另一方的属性名</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">            @property-ref=&quot;address&quot; 表示使用被关联的user实体的address字段作为关联字段</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">                                    默认情况下，关联了user会使用user的主键作为关联字段</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">                                    有了property-ref，就可以通过它指定被关联实体主键以外的字段作为关联字段。</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">         --&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">        &lt;</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">one-to-one</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> name</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">user</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> property-ref</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">=</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">address</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">/&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">    &lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">class</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">&lt;/</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">hibernate-mapping</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;</span></span></code></pre><p>老规矩写个测试类来测试</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff;" tabindex="0"><code class="language-java"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">public</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> class</span><span style="--s-dark:#5DA994;--s-light:#2E8F82;"> HibernateTest</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">    @</span><span style="--s-dark:#CB7676;--s-light:#AB5959;">Test</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">    public</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> void</span><span style="--s-dark:#80A665;--s-light:#59873A;"> test01</span><span style="--s-dark:#666666;--s-light:#999999;">()</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">        Session</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> session</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> SessionUtil</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">getSession</span><span style="--s-dark:#666666;--s-light:#999999;">();</span></span>
<span class="line"><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">        Transaction</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> transaction</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> session</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">beginTransaction</span><span style="--s-dark:#666666;--s-light:#999999;">();</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">        User</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> user</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#4D9375;--s-light:#1E754F;"> new</span><span style="--s-dark:#80A665;--s-light:#59873A;"> User</span><span style="--s-dark:#666666;--s-light:#999999;">();</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">        user</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">setName</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">lwf</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">        Address</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> address</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#4D9375;--s-light:#1E754F;"> new</span><span style="--s-dark:#80A665;--s-light:#59873A;"> Address</span><span style="--s-dark:#666666;--s-light:#999999;">();</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">        address</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">setProvince</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">广东省</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">);</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">        address</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">setCity</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">广州市</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">&quot;</span><span style="--s-dark:#666666;--s-light:#999999;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">        user</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">setAddress</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">address</span><span style="--s-dark:#666666;--s-light:#999999;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">        session</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">save</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">address</span><span style="--s-dark:#666666;--s-light:#999999;">);</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">        session</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">save</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">user</span><span style="--s-dark:#666666;--s-light:#999999;">);</span></span>
<span class="line"><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">        </span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">        transaction</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">commit</span><span style="--s-dark:#666666;--s-light:#999999;">();</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">        session</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">close</span><span style="--s-dark:#666666;--s-light:#999999;">();</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">        SessionUtil</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">close</span><span style="--s-dark:#666666;--s-light:#999999;">();</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">    }</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">}</span></span></code></pre><p>运行之后</p><p>user表</p><p><img src="https://i.loli.net/2019/11/06/5GBYXHUzJO4axTj.png" alt=""></p><p>address表</p><p><img src="https://i.loli.net/2019/11/06/qckPtWIsolNwaV7.png" alt=""></p><p>user表中的外键</p><p><img src="https://i.loli.net/2019/11/06/8xNZjYKSkJnP2T6.png" alt=""></p><p><strong>PS：</strong> 这里的 <code>user.setAddress(address)</code> 同样也不能换成 <code>address.setUser(user)</code> 插入user的时候 需要获取address的主键作为外键 没设置的话获取不到 外键又设置为非空的话 就会插入失败</p><h1 id="后记" tabindex="-1">后记 <a class="header-anchor" href="#后记">🔗</a></h1><p>感觉只写一对一就可以写很多东西 emmm 要学的还很多 希望能学会吧</p>`,53)])))}};export{c as categories,D as date,E as default,y as key,C as meta,B as tags,k as title,A as updated,o as wordCount};
