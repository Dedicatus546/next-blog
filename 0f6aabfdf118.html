<!DOCTYPE html><html lang="en"><head>
    <meta charset="utf-8">
    <link rel="icon" type="image/svg+xml" href="/logo.svg">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>ä»€ä¹ˆæ˜¯base64ç¼–ç </title>
    <script type="module" crossorigin="" src="/assets/app-I7hi7fN_.js"></script>
    <link rel="stylesheet" crossorigin="" href="/assets/app-wnGglYIs.css">
  <link rel="modulepreload" crossorigin="" href="/assets/ä»€ä¹ˆæ˜¯base64ç¼–ç -CwxopaRg.js"><meta property="og:title" content="ä»€ä¹ˆæ˜¯base64ç¼–ç "><meta name="twitter:title" content="ä»€ä¹ˆæ˜¯base64ç¼–ç "></head>
  <body>
    <div id="app" data-server-rendered="true"><div class="mujika" min-h="100vh" flex="~ col" bg="[--mygo-c-bg-alt]"><header class="mujika-header" flex="~ shrink-0" px-4="" h="70px" bg="[var(--mygo-c-bg)]" items-center="" justify-between="" data-v-c1947e25=""><a href="/" class="" flex="" gap-4="" items-center="" data-v-c1947e25=""><img w="40px" aspect-ratio-square="" src="/logo.svg" alt="æ‹ã®æ­Œçš„logo" data-v-c1947e25=""></a><div data-v-c1947e25=""><div p-1="" flex="" gap-1="" rounded="6px" bg="[var(--mygo-c-bg-alt)]" data-v-c1947e25=""><!--[--><div leading="[1]" px-2="" py-1="" cursor-pointer="" rounded="6px" class="bg-[var(--mygo-c-bg)]" title="è‡ªåŠ¨" data-v-c1947e25=""><!--[-->Auto<!--]--></div><div leading="[1]" px-2="" py-1="" cursor-pointer="" rounded="6px" class="" title="æ—¥é—´" data-v-c1947e25=""><!--[--><i class="i-ri:sun-line" data-v-c1947e25=""></i><!--]--></div><div leading="[1]" px-2="" py-1="" cursor-pointer="" rounded="6px" class="" title="å¤œé—´" data-v-c1947e25=""><!--[--><i class="i-ri:moon-line" data-v-c1947e25=""></i><!--]--></div><!--]--></div></div></header><main class="mujika-home" flex="grow" mx="auto" min-h="0" p-2="" w-full="" un-2xl:w="[calc(96rem-var(--spacing)*2)]"><div flex="" gap-2="" items-start=""><div flex="~ col grow" gap-2="" min-w-0=""><div class="mujika-card mujika-card--hover mujika-card--border" w-full="" overflow-auto="" data-v-7ac4adc5=""><div class="p-4 lg:p-8" data-v-7ac4adc5=""><!--[--><div flex="~ col" mb-4="" gap-4=""><h1 break-all="" text="34px center">ä»€ä¹ˆæ˜¯base64ç¼–ç </h1></div><div flex="~ col" gap-3="" text="[var(--mygo-c-text-2)]"><div flex="~ wrap" gap-3="" justify-center=""><!----><div flex="" gap-1="" items-center=""><i class="i-fa6-regular:calendar"></i><span un-hidden="" lg:inline="">å‘è¡¨äº</span><span pl-1="">2022-02-21 16:35</span></div><div flex="" gap-1="" items-center=""><i class="i-fa6-regular:calendar-check"></i><span un-hidden="" lg:inline="">æ›´æ–°äº</span><span pl-1="">2023-02-13 18:28</span></div><div flex="" gap-1="" items-center=""><i class="i-fa6-regular:folder"></i><span un-hidden="" lg:inline="">åˆ†ç±»äº</span><!--[--><a pl-1="" href="/category/ç¼–ç¨‹">ç¼–ç¨‹</a><!--]--></div></div><div flex="~ wrap" gap-3="" justify-center=""><div flex="" gap-1="" items-center=""><i class="i-fa6-regular:file-word"></i><span un-hidden="" lg:inline="">æ€»å­—æ•°</span><span pl-1="">1.4K</span></div><div flex="" gap-1="" items-center=""><i class="i-fa6-regular:clock"></i><span un-hidden="" lg:inline="">é˜…è¯»æ—¶é•¿ â‰ˆ</span><span pl-1="">5 åˆ†é’Ÿ</span></div></div></div><div class="mujika-doc-content"><!--[--><div class="kan-doc"><h1 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€">ğŸ”—</a></h1><p>åœ¨çœ‹ <code>vueuse/core</code> çš„æºç æ—¶ï¼Œçœ‹åˆ° <code>useBase64</code> å‡½æ•°æ—¶ï¼Œæœ‰æ„Ÿè€Œå‘</p><p>è™½ç„¶å¹³æ—¶éƒ½ä¼šå¾ˆç»å¸¸åœ°çœ‹è§ <code>base64</code> ç¼–ç ï¼Œæ¯”å¦‚æ‰“åŒ…çš„æ—¶å€™å¦‚æœå›¾ç‰‡å¤§å°å¾ˆå°çš„è¯ï¼Œä¼šç›´æ¥å†…è”æˆ <code>base64</code> æ¥å‡å°‘ç½‘ç»œè¯·æ±‚</p><p>é‚£ä¹ˆ <code>base64</code> ç©¶ç«Ÿæ˜¯å¦‚ä½•æ¥ç¼–ç çš„å‘¢ï¼Ÿ</p><h1 id="æ­£æ–‡" tabindex="-1">æ­£æ–‡ <a class="header-anchor" href="#æ­£æ–‡">ğŸ”—</a></h1><h2 id="base64-åŸç†" tabindex="-1">base64 åŸç† <a class="header-anchor" href="#base64-åŸç†">ğŸ”—</a></h2><p>è¿™é‡Œæ”¾ä¸Šç»´åŸºç™¾ç§‘å¯¹äº <code>base64</code> çš„å®šä¹‰</p><blockquote><p>Base64ï¼ˆåŸºåº•64ï¼‰æ˜¯ä¸€ç§åŸºäº64ä¸ªå¯æ‰“å°å­—ç¬¦æ¥è¡¨ç¤ºäºŒè¿›åˆ¶æ•°æ®çš„è¡¨ç¤ºæ–¹æ³•ã€‚æ¯6ä¸ªæ¯”ç‰¹ä¸ºä¸€ä¸ªå•å…ƒï¼Œå¯¹åº”æŸä¸ªå¯æ‰“å°å­—ç¬¦ã€‚3ä¸ªå­—èŠ‚ç›¸å½“äº24ä¸ªæ¯”ç‰¹ï¼Œå¯¹åº”äº4ä¸ªBase64å•å…ƒï¼Œå³3ä¸ªå­—èŠ‚å¯ç”±4ä¸ªå¯æ‰“å°å­—ç¬¦æ¥è¡¨ç¤ºã€‚åœ¨Base64ä¸­çš„å¯æ‰“å°å­—ç¬¦åŒ…æ‹¬å­—æ¯A-Zã€a-zã€æ•°å­—0-9ï¼Œè¿™æ ·å…±æœ‰62ä¸ªå­—ç¬¦ï¼Œæ­¤å¤–ä¸¤ä¸ªå¯æ‰“å°ç¬¦å·åœ¨ä¸åŒçš„ç³»ç»Ÿä¸­è€Œä¸åŒã€‚</p></blockquote><p>ä»è¿™ä¸ªå®šä¹‰ä¸­æˆ‘ä»¬å°±å¯ä»¥æ˜ç™½å‡ ä¸ªç‚¹</p><ul><li>ç¼–ç åçš„ç»“æœä¸º <code>64</code> ä¸ªå¯æ‰“å°å­—ç¬¦çš„ç»„åˆ</li><li>ä½¿ç”¨ <code>6</code> æ¯”ç‰¹æ¥è¡¨ç¤ºä¸€ä¸ªå¯æ‰“å°å­—ç¬¦</li><li>ç”±äºå•å…ƒé•¿åº¦ä¸º <code>6</code>ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨ <code>4</code> ä¸ªå¯æ‰“å°å­—ç¬¦æ¥è¡¨ç¤º <code>3</code> ä¸ªå­—èŠ‚ï¼ˆ <code>1</code> ä¸ªå­—èŠ‚ä¸º <code>8</code> æ¯”ç‰¹ï¼‰</li></ul><p>æ ¹æ®ç¬¬ä¸€ç‚¹ï¼Œå¯ä»¥çŸ¥é“åº”è¯¥å­˜åœ¨ä¸€ä¸ªå¯¹åº”è¡¨ï¼Œæ¯ä¸ªå­—ç¬¦å¯¹åº”ä¸€ä¸ªé•¿åº¦ä¸º <code>6</code> çš„æ¯”ç‰¹åºåˆ—</p><p><img src="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/02/22/202202221829722.avif" alt="æ¥è‡ªç»´åŸºç™¾ç§‘"></p><p>å¯ä»¥çœ‹åˆ°ç»è¿‡ <code>base64</code> ç¼–ç ä¹‹åï¼Œåªä¼šå­˜åœ¨ <code>A-Z</code> ï¼Œ <code>a-z</code> ï¼Œ <code>0-9</code> ï¼Œ <code>+/=</code> è¿™ <code>64</code> ä¸ªå­—ç¬¦</p><p>ä½¿ç”¨ <code>hello</code> æ¥ä½œä¸ºä¾‹å­æ¥è§£é‡Š <code>base64</code> æ˜¯å¦‚ä½•ç¼–ç çš„</p><p>å¯¹äº <code>hello</code> è¿™ä¸ªå­—ç¬¦ï¼Œå…¶ä¸­</p><ul><li><code>h</code> çš„ <code>10</code> è¿›åˆ¶ä¸º <code>104</code> ï¼Œ <code>2</code> è¿›åˆ¶ä¸º <code>01101000</code></li><li><code>e</code> çš„ <code>10</code> è¿›åˆ¶ä¸º <code>101</code> ï¼Œ <code>2</code> è¿›åˆ¶ä¸º <code>01100101</code></li><li><code>l</code> çš„ <code>10</code> è¿›åˆ¶ä¸º <code>108</code> ï¼Œ <code>2</code> è¿›åˆ¶ä¸º <code>01101100</code></li><li><code>o</code> çš„ <code>10</code> è¿›åˆ¶ä¸º <code>111</code> ï¼Œ <code>2</code> è¿›åˆ¶ä¸º <code>01101111</code></li></ul><p>è¿™æ—¶å€™æˆ‘ä»¬å°±å¾—åˆ°äº† <code>hello</code> çš„ <code>2</code> è¿›åˆ¶æ•°æ® <code>01101000 01100101 01101100 01101100 01101111</code></p><p>ç„¶åæˆ‘ä»¬æŒ‰ç…§ <code>6</code> ä½ä¸€ç»„è¿›è¡Œåˆ’åˆ†ï¼Œå¾—åˆ° <code>011010 000110 010101 101100 011011 000110 1111</code></p><p><img src="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/02/26/202202261719280.avif" alt=""></p><p>æ ¹æ®å¯¹ç…§è¡¨ï¼Œå‰é¢çš„å››ä½ <code>011010 000110 010101 101100 011011 000110</code> ç»è¿‡ç¼–ç ä¸º <code>aGVsbG</code></p><p>è¿™æ—¶å‘ç°åé¢çš„ <code>1111</code> å¹¶ä¸èƒ½å¤Ÿè¢«ç¼–ç </p><p>é™¤éå˜æˆ <code>1111xx</code></p><p>è¿™æ—¶å€™æˆ‘ä»¬è¦åœ¨åŸæ•°æ®æœ€åæ·»åŠ  <code>NUL</code> æ¥è¡¥å……ä½æ•°</p><p>è¿™é‡Œçš„ <code>NUL</code> ä¸ºç©ºå­—ç¬¦çš„æ„æ€ï¼Œå®ƒçš„ <code>2</code> è¿›åˆ¶ç¼–ç ä¸º <code>00000000</code></p><p>åœ¨æ·»åŠ ä¸€ä¸ª <code>NUL</code> ä¹‹åï¼ŒåŸæ•°æ®å˜ä¸º <code>01101000 01100101 01101100 01101100 01101111 00000000</code></p><p>è¿™æ—¶åˆ†ç»„ä¹‹åä¸º <code>011010 000110 010101 101100 011011 000110 111100 000000</code></p><p>ç°åœ¨ä¸å­˜åœ¨ä¸è¶³ <code>6</code> ä½çš„æƒ…å†µ</p><p>æ ¹æ®å¯¹ç…§è¡¨ï¼Œå¯ä»¥å¾—å‡ºç¼–ç åçš„å­—ç¬¦ <code>aGVsbG8A</code></p><p><img src="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/02/26/202202261724091.avif" alt=""></p><p>ä½†æ˜¯ç”±äºæˆ‘ä»¬æ·»åŠ äº† <code>1</code> ä¸ª <code>NUL</code> åœ¨åŸæ•°æ®çš„æœ«å°¾</p><p>æ‰€ä»¥ç¼–ç åçš„æ•°æ®ä¸­æœ€åä¸€ä¸ª <code>A</code> æ˜¯ä¸å­˜åœ¨ï¼Œè¿™ä¸ª <code>A</code> ç”¨ <code>=</code> æ¥ä»£æ›¿</p><p>å³ç¼–ç åçš„å­—ç¬¦ä¸²ä¸º <code>aGVsbG8=</code></p><p>å¦‚æœæ·»åŠ äº†ä¸¤ä¸ª <code>NUL</code> ï¼Œé‚£ä¹ˆå°±è¦æŠŠæœ«å°¾çš„ä¸¤ä¸ª <code>A</code> æ”¹ä¸º <code>=</code></p><p><code>=</code> çš„æ•°é‡å–å†³äºæˆ‘ä»¬æ·»åŠ äº†å¤šå°‘ä¸ª <code>NUL</code> ï¼Œå®ƒçš„ä¸ªæ•°çš„å€¼ä¸º <code>0</code> ï¼Œ <code>1</code> ï¼Œ<code>2</code></p><p>ä¸ºä»€ä¹ˆä¸ä¼šä¸º <code>3</code> ä¸ªå‘¢ï¼Œè¿™æ˜¯å› ä¸º <code>base64</code> ä¸º <code>4</code> ä¸ª <code>6</code> æ¯”ç‰¹æ•°æ®æ¥è¡¨ç¤º <code>3</code> ä¸ª <code>8</code> æ¯”ç‰¹æ•°æ®</p><p>å¦‚æœæ·»åŠ äº† <code>3</code> ä¸ª <code>NUL</code>ï¼Œé‚£ä¹ˆåœ¨æœ«å°¾å°±å˜ä¸º <code>4</code> ä¸ª <code>000000</code> è¡¨ç¤º <code>3</code> ä¸ª <code>00000000</code> ï¼Œå¾ˆæ˜æ˜¾è¿™æ˜¯æ²¡æœ‰æ„ä¹‰çš„</p><p>æ¢å¥è¯è¯´ï¼ŒåŸæ•°æ®çš„å­—èŠ‚ä¸ªæ•°å¿…é¡»ä¸º <code>3</code> çš„å€æ•°ï¼Œå¯¹ <code>3</code> å–ä½™å¯å¾—åˆ°çš„å€¼ä¸º <code>1</code> ï¼Œ <code>2</code> ï¼Œå³åˆ†åˆ«å¯¹åº”äº†æ·»åŠ  <code>2</code> ä¸ª <code>NUL</code>ï¼Œæ·»åŠ  <code>1</code> ä¸ª <code>NUL</code></p><h2 id="js-ä¸­çš„-base64" tabindex="-1">JS ä¸­çš„ base64 <a class="header-anchor" href="#js-ä¸­çš„-base64">ğŸ”—</a></h2><p>åœ¨ <code>js</code> ä¸­ï¼Œä¹Ÿæœ‰ä¸¤ä¸ª <code>api</code> å¯¹åº” <code>base64</code> çš„ç¼–ç å’Œè§£ç ï¼Œåˆ†åˆ«æ˜¯ <code>btoa</code>ï¼Œ<code>atob</code></p><p>ä½¿ç”¨ <code>btoa</code> å¯¹ <code>hello</code> è¿›è¡Œç¼–ç </p><p><img src="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/02/26/202202261754811.avif" alt=""></p><p>ä½¿ç”¨ <code>atob</code> å¯¹ <code>aGVsbG8=</code> è¿›è¡Œè§£ç </p><p><img src="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/02/26/202202261755734.avif" alt=""></p><h2 id="usebase64-å‡½æ•°" tabindex="-1">useBase64 å‡½æ•° <a class="header-anchor" href="#usebase64-å‡½æ•°">ğŸ”—</a></h2><p><code>vueuse/core</code> é‡Œé¢æä¾›äº† <code>useBase64</code> çš„å‡½æ•°</p><blockquote><p><a href="https://github.com/vueuse/vueuse/blob/main/packages/core/useBase64/index.ts" target="_blank" rel="noopener">vueuse/packages/core/useBase64/index.ts</a></p></blockquote><p>åœ¨æºç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° useBase64 çš„å‡½æ•°æœ‰è®¸å¤šä¸ªé‡è½½</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff;" tabindex="0"><code class="language-ts"><span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F;">export</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> function</span><span style="--s-dark:#80A665;--s-light:#59873A;"> useBase64</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">target</span><span style="--s-dark:#666666;--s-light:#999999;">: </span><span style="--s-dark:#5DA994;--s-light:#2E8F82;">MaybeRef</span><span style="--s-dark:#666666;--s-light:#999999;">&lt;</span><span style="--s-dark:#5DA994;--s-light:#2E8F82;">string</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;):</span><span style="--s-dark:#5DA994;--s-light:#2E8F82;"> UseBase64Return</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F;">export</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> function</span><span style="--s-dark:#80A665;--s-light:#59873A;"> useBase64</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">target</span><span style="--s-dark:#666666;--s-light:#999999;">: </span><span style="--s-dark:#5DA994;--s-light:#2E8F82;">MaybeRef</span><span style="--s-dark:#666666;--s-light:#999999;">&lt;</span><span style="--s-dark:#5DA994;--s-light:#2E8F82;">Blob</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;):</span><span style="--s-dark:#5DA994;--s-light:#2E8F82;"> UseBase64Return</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F;">export</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> function</span><span style="--s-dark:#80A665;--s-light:#59873A;"> useBase64</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">target</span><span style="--s-dark:#666666;--s-light:#999999;">: </span><span style="--s-dark:#5DA994;--s-light:#2E8F82;">MaybeRef</span><span style="--s-dark:#666666;--s-light:#999999;">&lt;</span><span style="--s-dark:#5DA994;--s-light:#2E8F82;">ArrayBuffer</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;):</span><span style="--s-dark:#5DA994;--s-light:#2E8F82;"> UseBase64Return</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F;">export</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> function</span><span style="--s-dark:#80A665;--s-light:#59873A;"> useBase64</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">target</span><span style="--s-dark:#666666;--s-light:#999999;">: </span><span style="--s-dark:#5DA994;--s-light:#2E8F82;">MaybeRef</span><span style="--s-dark:#666666;--s-light:#999999;">&lt;</span><span style="--s-dark:#5DA994;--s-light:#2E8F82;">HTMLCanvasElement</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;,</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> options</span><span style="--s-dark:#CB7676;--s-light:#AB5959;">?</span><span style="--s-dark:#666666;--s-light:#999999;">: </span><span style="--s-dark:#5DA994;--s-light:#2E8F82;">ToDataURLOptions</span><span style="--s-dark:#666666;--s-light:#999999;">):</span><span style="--s-dark:#5DA994;--s-light:#2E8F82;"> UseBase64Return</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F;">export</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> function</span><span style="--s-dark:#80A665;--s-light:#59873A;"> useBase64</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">target</span><span style="--s-dark:#666666;--s-light:#999999;">: </span><span style="--s-dark:#5DA994;--s-light:#2E8F82;">MaybeRef</span><span style="--s-dark:#666666;--s-light:#999999;">&lt;</span><span style="--s-dark:#5DA994;--s-light:#2E8F82;">HTMLImageElement</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;,</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> options</span><span style="--s-dark:#CB7676;--s-light:#AB5959;">?</span><span style="--s-dark:#666666;--s-light:#999999;">: </span><span style="--s-dark:#5DA994;--s-light:#2E8F82;">ToDataURLOptions</span><span style="--s-dark:#666666;--s-light:#999999;">):</span><span style="--s-dark:#5DA994;--s-light:#2E8F82;"> UseBase64Return</span></span></code></pre><p>ä¸»è¦çš„åŒºåˆ«æ˜¯æ”¯æŒä¸åŒçš„æºæ•°æ®ç±»å‹ï¼Œé™¤äº†å­—ç¬¦ä¸²ï¼Œè¿˜æ”¯æŒ <code>Blob</code> æ•°æ®ï¼Œ <code>ArrayBuffer</code> æ•°æ®ï¼Œ <code>canvas</code> å…ƒç´ ä»¥åŠ <code>image</code> å…ƒç´ </p><p>åœ¨æºç ä¸­ï¼Œä½¿ç”¨äº† <code>FileReader</code> è¿™ä¸ªç±»æ¥ä¼ å…¥ <code>Blob</code> ç±»å‹çš„æ•°æ®ï¼Œç„¶åé€šè¿‡ <code>readAsDataURL</code> æ¥è·å–ç¼–ç åçš„ <code>base64</code> æ•°æ®</p><p><img src="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/02/26/202202262103288.avif" alt=""></p><p>æ ¸å¿ƒçš„è½¬æ¢å‡½æ•°ä¸º <code>blobToBase64</code> ï¼Œæºç å¦‚ä¸‹</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff;" tabindex="0"><code class="language-ts"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">function</span><span style="--s-dark:#80A665;--s-light:#59873A;"> blobToBase64</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">blob</span><span style="--s-dark:#666666;--s-light:#999999;">: </span><span style="--s-dark:#5DA994;--s-light:#2E8F82;">Blob</span><span style="--s-dark:#666666;--s-light:#999999;">)</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F;">  return</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> new</span><span style="--s-dark:#B8A965;--s-light:#998418;"> Promise</span><span style="--s-dark:#666666;--s-light:#999999;">&lt;</span><span style="--s-dark:#5DA994;--s-light:#2E8F82;">string</span><span style="--s-dark:#666666;--s-light:#999999;">&gt;((</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">resolve</span><span style="--s-dark:#666666;--s-light:#999999;">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> reject</span><span style="--s-dark:#666666;--s-light:#999999;">)</span><span style="--s-dark:#666666;--s-light:#999999;"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">    const </span><span style="--s-dark:#BD976A;--s-light:#B07D48;">fr</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> new </span><span style="--s-dark:#80A665;--s-light:#59873A;">FileReader</span><span style="--s-dark:#666666;--s-light:#999999;">()</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">    fr</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">onload</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#666666;--s-light:#999999;"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">e</span><span style="--s-dark:#666666;--s-light:#999999;">)</span><span style="--s-dark:#666666;--s-light:#999999;"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A;">      resolve</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">e</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">target</span><span style="--s-dark:#CB7676;--s-light:#AB5959;">!</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">result</span><span style="--s-dark:#4D9375;--s-light:#1E754F;"> as</span><span style="--s-dark:#5DA994;--s-light:#2E8F82;"> string</span><span style="--s-dark:#666666;--s-light:#999999;">)</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">    }</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">    fr</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">onerror</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> reject</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">    fr</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">readAsDataURL</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">blob</span><span style="--s-dark:#666666;--s-light:#999999;">)</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">  })</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">}</span></span></code></pre><p>æ ¸å¿ƒéå¸¸ç®€å•ï¼Œå°±æ˜¯è¯» <code>blob</code> æ•°æ®æ‹¿åˆ° <code>base64</code> è€Œå·²ï¼ŒæŠŠç»“æœåŒ…è£…æˆä¸€ä¸ª <code>Promise</code></p><p>å¯¹äºä¸åŒçš„ç±»å‹ï¼Œå¯ä»¥åœ¨ <code>useBase64</code> çš„å®ç°ä¸­çœ‹åˆ°å®ƒçš„è½¬æ¢æ–¹æ³•</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff;" tabindex="0"><code class="language-ts"><span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F;">export</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> function</span><span style="--s-dark:#80A665;--s-light:#59873A;"> useBase64</span><span style="--s-dark:#666666;--s-light:#999999;">(</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">  target</span><span style="--s-dark:#666666;--s-light:#999999;">: </span><span style="--s-dark:#5DA994;--s-light:#2E8F82;">any</span><span style="--s-dark:#666666;--s-light:#999999;">,</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">  options</span><span style="--s-dark:#CB7676;--s-light:#AB5959;">?</span><span style="--s-dark:#666666;--s-light:#999999;">: </span><span style="--s-dark:#5DA994;--s-light:#2E8F82;">any</span><span style="--s-dark:#666666;--s-light:#999999;">,</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">)</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">  // ...</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">        const </span><span style="--s-dark:#BD976A;--s-light:#B07D48;">_target</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#80A665;--s-light:#59873A;"> unref</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">target</span><span style="--s-dark:#666666;--s-light:#999999;">)</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">        // undefined or null</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F;">        if</span><span style="--s-dark:#666666;--s-light:#999999;"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">_target</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> ===</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> undefined</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> ||</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> _target</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> ===</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> null</span><span style="--s-dark:#666666;--s-light:#999999;">)</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span><span style="--s-dark:#80A665;--s-light:#59873A;"> resolve</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">''</span><span style="--s-dark:#666666;--s-light:#999999;">)</span><span style="--s-dark:#666666;--s-light:#999999;"> }</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F;">        else</span><span style="--s-dark:#4D9375;--s-light:#1E754F;"> if</span><span style="--s-dark:#666666;--s-light:#999999;"> (</span><span style="--s-dark:#CB7676;--s-light:#AB5959;">typeof</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> _target</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> ===</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;"> '</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">string</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">'</span><span style="--s-dark:#666666;--s-light:#999999;">)</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span><span style="--s-dark:#80A665;--s-light:#59873A;"> resolve</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#80A665;--s-light:#59873A;">blobToBase64</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#CB7676;--s-light:#AB5959;">new</span><span style="--s-dark:#80A665;--s-light:#59873A;"> Blob</span><span style="--s-dark:#666666;--s-light:#999999;">([</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">_target</span><span style="--s-dark:#666666;--s-light:#999999;">],</span><span style="--s-dark:#666666;--s-light:#999999;"> { </span><span style="--s-dark:#B8A965;--s-light:#998418;">type</span><span style="--s-dark:#666666;--s-light:#999999;">: </span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">'</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">text/plain</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">'</span><span style="--s-dark:#666666;--s-light:#999999;"> })))</span><span style="--s-dark:#666666;--s-light:#999999;"> }</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F;">        else</span><span style="--s-dark:#4D9375;--s-light:#1E754F;"> if</span><span style="--s-dark:#666666;--s-light:#999999;"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">_target</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> instanceof</span><span style="--s-dark:#5DA994;--s-light:#2E8F82;"> Blob</span><span style="--s-dark:#666666;--s-light:#999999;">)</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span><span style="--s-dark:#80A665;--s-light:#59873A;"> resolve</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#80A665;--s-light:#59873A;">blobToBase64</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">_target</span><span style="--s-dark:#666666;--s-light:#999999;">))</span><span style="--s-dark:#666666;--s-light:#999999;"> }</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F;">        else</span><span style="--s-dark:#4D9375;--s-light:#1E754F;"> if</span><span style="--s-dark:#666666;--s-light:#999999;"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">_target</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> instanceof</span><span style="--s-dark:#5DA994;--s-light:#2E8F82;"> ArrayBuffer</span><span style="--s-dark:#666666;--s-light:#999999;">)</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span><span style="--s-dark:#80A665;--s-light:#59873A;"> resolve</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">window</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">btoa</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">String</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">fromCharCode</span><span style="--s-dark:#666666;--s-light:#999999;">(...</span><span style="--s-dark:#CB7676;--s-light:#AB5959;">new</span><span style="--s-dark:#80A665;--s-light:#59873A;"> Uint8Array</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">_target</span><span style="--s-dark:#666666;--s-light:#999999;">))))</span><span style="--s-dark:#666666;--s-light:#999999;"> }</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F;">        else</span><span style="--s-dark:#4D9375;--s-light:#1E754F;"> if</span><span style="--s-dark:#666666;--s-light:#999999;"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">_target</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> instanceof</span><span style="--s-dark:#5DA994;--s-light:#2E8F82;"> HTMLCanvasElement</span><span style="--s-dark:#666666;--s-light:#999999;">)</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span><span style="--s-dark:#80A665;--s-light:#59873A;"> resolve</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">_target</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">toDataURL</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">options</span><span style="--s-dark:#666666;--s-light:#999999;">?.</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">type</span><span style="--s-dark:#666666;--s-light:#999999;">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> options</span><span style="--s-dark:#666666;--s-light:#999999;">?.</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">quality</span><span style="--s-dark:#666666;--s-light:#999999;">))</span><span style="--s-dark:#666666;--s-light:#999999;"> }</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F;">        else</span><span style="--s-dark:#4D9375;--s-light:#1E754F;"> if</span><span style="--s-dark:#666666;--s-light:#999999;"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">_target</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> instanceof</span><span style="--s-dark:#5DA994;--s-light:#2E8F82;"> HTMLImageElement</span><span style="--s-dark:#666666;--s-light:#999999;">)</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">          const </span><span style="--s-dark:#BD976A;--s-light:#B07D48;">img</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> _target</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">cloneNode</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#4D9375;--s-light:#1E754F;">false</span><span style="--s-dark:#666666;--s-light:#999999;">)</span><span style="--s-dark:#4D9375;--s-light:#1E754F;"> as</span><span style="--s-dark:#5DA994;--s-light:#2E8F82;"> HTMLImageElement</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">          img</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">crossOrigin</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;"> '</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">Anonymous</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">'</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A;">          imgLoaded</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">img</span><span style="--s-dark:#666666;--s-light:#999999;">).</span><span style="--s-dark:#80A665;--s-light:#59873A;">then</span><span style="--s-dark:#666666;--s-light:#999999;">(()</span><span style="--s-dark:#666666;--s-light:#999999;"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">            const </span><span style="--s-dark:#BD976A;--s-light:#B07D48;">canvas</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> document</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">createElement</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">'</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">canvas</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">'</span><span style="--s-dark:#666666;--s-light:#999999;">)</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959;">            const </span><span style="--s-dark:#BD976A;--s-light:#B07D48;">ctx</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> canvas</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">getContext</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">'</span><span style="--s-dark:#C98A7D;--s-light:#B56959;">2d</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977;">'</span><span style="--s-dark:#666666;--s-light:#999999;">)</span><span style="--s-dark:#CB7676;--s-light:#AB5959;">!</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">            canvas</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">width</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> img</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">width</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">            canvas</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">height</span><span style="--s-dark:#666666;--s-light:#999999;"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> img</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">height</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48;">            ctx</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">drawImage</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">img</span><span style="--s-dark:#666666;--s-light:#999999;">,</span><span style="--s-dark:#4C9A91;--s-light:#2F798A;"> 0</span><span style="--s-dark:#666666;--s-light:#999999;">,</span><span style="--s-dark:#4C9A91;--s-light:#2F798A;"> 0</span><span style="--s-dark:#666666;--s-light:#999999;">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> canvas</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">width</span><span style="--s-dark:#666666;--s-light:#999999;">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> canvas</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">height</span><span style="--s-dark:#666666;--s-light:#999999;">)</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A;">            resolve</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">canvas</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">toDataURL</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">options</span><span style="--s-dark:#666666;--s-light:#999999;">?.</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">type</span><span style="--s-dark:#666666;--s-light:#999999;">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48;"> options</span><span style="--s-dark:#666666;--s-light:#999999;">?.</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">quality</span><span style="--s-dark:#666666;--s-light:#999999;">))</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">          }).</span><span style="--s-dark:#80A665;--s-light:#59873A;">catch</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">reject</span><span style="--s-dark:#666666;--s-light:#999999;">)</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">        }</span></span>
<span class="line"><span style="--s-dark:#DBD7CAEE;--s-light:#393A34;">  </span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">  // ...</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999;">}</span></span></code></pre><p>è¿™é‡Œå¯ä»¥çœ‹åˆ°ï¼Œå¯¹äºå­—ç¬¦ä¸²ï¼Œå¹¶ä¸æ˜¯ç›´æ¥ä½¿ç”¨ <code>btoa</code> è¿›è¡Œç¼–ç ï¼Œè€Œæ˜¯é€šè¿‡æ„é€  <code>blob</code> æ•°æ®ç„¶åé€šè¿‡ <code>FileReader</code> æ¥è¯»å–</p><p>åŸå› æ˜¯å¤šæ•°æµè§ˆå™¨ä¸‹ <code>btoa</code> å¯¹ <code>Unicode</code> å­—ç¬¦ä¸²è¿›è¡Œç¼–ç éƒ½ä¼šè§¦å‘ <code>InvalidCharacterError</code> å¼‚å¸¸</p><p>æ¯”å¦‚æˆ‘å¯¹æˆ‘çš„å§“è¿›è¡Œç¼–ç ï¼Œç›´æ¥æŠ¥é”™</p><p><img src="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/02/26/202202262137176.avif" alt=""></p><p>è¿™æ˜¯ç”±äº <code>UTF-8</code> æ˜¯å¯å˜é•¿åº¦çš„ï¼Œå¦‚æœç›´æ¥ä½¿ç”¨ <code>btoa</code> ï¼Œå°±å¯èƒ½æŠ¥é”™</p><p><img src="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/02/26/202202262136738.avif" alt=""></p><p>å¯ä»¥çœ‹åˆ° <code>mdn</code> ä¹Ÿç»™å‡ºäº†ç¼–ç  <code>Unicode</code> å­—ç¬¦ä¸²çš„ä¸€ç§æ–¹æ³•ï¼Œå°±æ˜¯</p><p>è½¬ç§»ä»»ä½•æ‰©å±•å­—ç¬¦ï¼Œè½¬æˆ <code>ASCII</code> ï¼Œè¿™æ ·å°±å¯ä»¥ä½¿ç”¨ <code>btoa</code> è¿›è¡Œç¼–ç äº†</p><p>è¿™é‡Œä½¿ç”¨çš„æ˜¯ <code>encodeURIComponent</code> å’Œ <code>decodeURIComponent</code></p><p>åœ¨æˆªå›¾çš„ç»“å°¾ï¼Œæ›´åŠ æ¨èä½¿ç”¨ç±»å‹åŒ–æ•°ç»„æ¥è¿›è¡Œè½¬æ¢</p><p>åœ¨æºç ä¸­ï¼Œå¯¹äº <code>ArrayBuffer</code> ç±»å‹å°±æ˜¯ä½¿ç”¨ <code>Unit8Array</code> æ¥è¿›è¡Œè½¬åŒ–ï¼Œç„¶åå†ä½¿ç”¨ <code>btoa</code></p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff;" tabindex="0"><code class="language-ts"><span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0;">// String.fromCharCode æ‹¿åˆ° ascii ç¼–ç åçš„å­—ç¬¦ä¸²</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F;">if</span><span style="--s-dark:#666666;--s-light:#999999;"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">_target</span><span style="--s-dark:#CB7676;--s-light:#AB5959;"> instanceof</span><span style="--s-dark:#5DA994;--s-light:#2E8F82;"> ArrayBuffer</span><span style="--s-dark:#666666;--s-light:#999999;">)</span><span style="--s-dark:#666666;--s-light:#999999;"> {</span><span style="--s-dark:#80A665;--s-light:#59873A;"> resolve</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">window</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">btoa</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">String</span><span style="--s-dark:#666666;--s-light:#999999;">.</span><span style="--s-dark:#80A665;--s-light:#59873A;">fromCharCode</span><span style="--s-dark:#666666;--s-light:#999999;">(...</span><span style="--s-dark:#CB7676;--s-light:#AB5959;">new</span><span style="--s-dark:#80A665;--s-light:#59873A;"> Uint8Array</span><span style="--s-dark:#666666;--s-light:#999999;">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48;">_target</span><span style="--s-dark:#666666;--s-light:#999999;">))))</span><span style="--s-dark:#666666;--s-light:#999999;"> }</span></span></code></pre><p>å¯¹äº <code>image</code> å’Œ <code>canvas</code> ï¼Œéƒ½æ˜¯é€šè¿‡ <code>canvas.toDataURL</code> æ¥ç›´æ¥è¯»å– <code>base64</code> ç¼–ç åçš„æ•°æ®</p><p>å…¶ä¸­ <code>image</code> éœ€è¦å…ˆ ç”» åˆ° <code>canvas</code> ä¸Šï¼Œç„¶åä½¿ç”¨ <code>canvas.toDataURL</code> å¤„ç†</p></div><!--]--></div><div flex="~ wrap" text="[var(--mygo-c-text-2)]" mt-8="" gap-4="" justify-center=""><!--[--><div>#Base64</div><div>#JavaScript</div><!--]--></div><!--]--></div></div><div class="mujika-card mujika-card--hover mujika-card--border" w-full="" overflow-auto="" data-v-7ac4adc5=""><div class="p-4 lg:p-8" data-v-7ac4adc5=""><!--[--><div flex=""><a href="/94f450fa1b14" class=""><i class="i-mi:chevron-left" mr-1=""></i><span>computed å¯èƒ½æˆä¸ºä¸€ä¸ªé”™è¯¯çš„å·¥å…·ï¼ˆè¯‘æ–‡ï¼‰</span></a><a href="/25af57118a82" class="" ml-auto=""><span>è§£å†³åµŒå¥—flexå¸ƒå±€å­å®¹å™¨å†…å®¹è¶…å‡ºçˆ¶å®¹å™¨</span><i class="i-mi:chevron-right" ml-1=""></i></a></div><!--]--></div></div><!--[--><div class="mujika-card mujika-card--hover mujika-card--border" w-full="" overflow-auto="" data-v-eedc551d="" data-v-7ac4adc5=""><div class="p-4 lg:p-8" data-v-7ac4adc5=""><!--[--><div flex="" gap-4="" items-start="" data-v-eedc551d=""><div flex="~ shrink-0" bg="[var(--mygo-c-bg-alt)]" rounded-6px="" w-60px="" aspect-ratio-square="" items-center="" justify-center="" data-v-eedc551d=""><i text-40px="" text="[#999]" class="i-fa6-regular:user" data-v-eedc551d=""></i></div><div flex="~ col grow" gap-4="" data-v-eedc551d=""><textarea disabled="" placeholder="ä¸‡æ°´åƒå±±æ€»æ˜¯æƒ…ï¼Œç•™ä¸‹è¯„è®ºè¡Œä¸è¡Œ" class="mujika-git-talk-textarea" un-disabled:cursor-not-allowed="" p-4="" outline-0="" data-v-eedc551d=""></textarea><div flex="" items-start="" justify-between="" data-v-eedc551d=""><a target="_blank" href="https://guides.github.com/features/mastering-markdown/" data-v-eedc551d=""> æ”¯æŒ Markdown è¯­æ³• </a><button class="mujika-git-talk-button" cursor-pointer="" data-v-eedc551d=""> ç‚¹å‡»ç™»å½• </button></div></div></div><!--]--></div></div><!----><!--]--></div><aside class="mujika-aside" w="280px" flex="~ col shrink-0" top-2="" sticky="" max-h="[calc(100vh-var(--spacing)*4)]" un-hidden="" lg:block=""><div class="mujika-card mujika-card--hover mujika-card--border" w-full="" overflow-auto="" flex="~ col" gap-4="" data-v-7ac4adc5=""><!--[--><div p="4 b-0" flex-shrink-0="">æ–‡ç« ç›®å½•</div><div p="4 t-0" flex-grow="" min-h-0="" overflow-y-auto=""><!----></div><!--]--></div></aside><!--teleport start--><!--teleport end--></div></main><footer class="mujika-footer" px-4="" py-6="" bg="[var(--mygo-c-bg)]" flex="~ col shrink-0" gap-2="" items-center="" data-v-d1d7a153=""><div flex="" items-center="" data-v-d1d7a153=""><span data-v-d1d7a153="">Power by&nbsp;</span><i class="i-logos:vue" data-v-d1d7a153=""></i><span data-v-d1d7a153="">&nbsp;+&nbsp;</span><i class="i-logos:vitejs" data-v-d1d7a153=""></i></div><div text-center="" data-v-d1d7a153=""><a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" data-v-d1d7a153=""> CC BY-NC-SA 4.0 </a> 2021 - PRESENT Â© Dedicatus545 </div><div text="[var(--mygo-c-text-2)]" text-center="" data-v-d1d7a153=""> å¦‚æœæˆ‘å’Œç‹—ä¸€æ ·æœ‰å°¾å·´çš„è¯ï¼Œä¸€å®šä¼šè—ä¸ä½è¿™ä»½å–œæ‚¦ï¼Œè€Œå°¾å·´ä¸€ç›´æ‘‡ä¸ªä¸åœå§ã€‚ </div></footer></div></div>
  

</body></html>