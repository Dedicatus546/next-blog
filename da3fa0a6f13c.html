<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><link rel="icon" type="image/svg+xml" href="/logo.svg"><meta name="viewport" content="width=device-width,initial-scale=1"><title>ä¸€ä¸ªæ›¿æ¢ cdn å‰ç¼€çš„å°å·¥å…·</title><script type="importmap">{"imports":{"vue":"https://esm.sh/vue","vue-router":"https://esm.sh/vue-router","pinia":"https://esm.sh/pinia","@vueuse/core":"https://esm.sh/@vueuse/core","@vueuse/components":"https://esm.sh/@vueuse/components","@vueuse/router":"https://esm.sh/@vueuse/router","date-fns":"https://esm.sh/date-fns","nprogress":"https://esm.sh/nprogress","octokit":"https://esm.sh/octokit","pinia-plugin-persistedstate":"https://esm.sh/pinia-plugin-persistedstate","vue-router-better-scroller":"https://esm.sh/vue-router-better-scroller"}}</script><script type="module" async="" crossorigin="" src="/assets/app-u6mH9xpQ.js"></script><link rel="stylesheet" crossorigin="" href="/assets/app-afYcuv6x.css"><link rel="modulepreload" crossorigin="" href="/assets/ä¸€ä¸ªæ›¿æ¢-cdn-å‰ç¼€çš„å°å·¥å…·-C9WkLZ1Q.js"><meta property="og:title" content="ä¸€ä¸ªæ›¿æ¢ cdn å‰ç¼€çš„å°å·¥å…·"><meta name="twitter:title" content="ä¸€ä¸ªæ›¿æ¢ cdn å‰ç¼€çš„å°å·¥å…·"></head><body><div id="app" data-server-rendered="true"><div class="mujika" min-h="100vh" flex="~ col" bg="[--mygo-c-bg-alt]"><header class="mujika-header" flex="~ shrink-0" px-4="" h="70px" bg="[var(--mygo-c-bg)]" items-center="" justify-between="" data-v-c1947e25=""><a href="/" class="" flex="" gap-4="" items-center="" data-v-c1947e25=""><img w="40px" aspect-ratio-square="" src="/logo.svg" alt="æ‹ã®æ­Œçš„logo" data-v-c1947e25=""></a><div data-v-c1947e25=""><div p-1="" flex="" gap-1="" rounded="6px" bg="[var(--mygo-c-bg-alt)]" data-v-c1947e25=""><!--[--><div leading="[1]" px-2="" py-1="" cursor-pointer="" rounded="6px" class="bg-[var(--mygo-c-bg)]" title="è‡ªåŠ¨" data-v-c1947e25=""><!--[-->Auto<!--]--></div><div leading="[1]" px-2="" py-1="" cursor-pointer="" rounded="6px" class="" title="æ—¥é—´" data-v-c1947e25=""><!--[--><i class="i-ri:sun-line" data-v-c1947e25=""></i><!--]--></div><div leading="[1]" px-2="" py-1="" cursor-pointer="" rounded="6px" class="" title="å¤œé—´" data-v-c1947e25=""><!--[--><i class="i-ri:moon-line" data-v-c1947e25=""></i><!--]--></div><!--]--></div></div></header><main class="mujika-home" flex="grow" mx="auto" min-h="0" p-2="" w-full="" un-2xl:w="[calc(96rem-var(--spacing)*2)]"><div flex="" gap-2="" items-start=""><div flex="~ col grow" gap-2="" min-w-0=""><div class="mujika-card mujika-card--hover mujika-card--border" w-full="" overflow-auto="" data-v-7ac4adc5=""><div class="p-4 lg:p-8" data-v-7ac4adc5=""><!--[--><div flex="~ col" mb-4="" gap-4=""><h1 break-all="" text="34px center">ä¸€ä¸ªæ›¿æ¢ cdn å‰ç¼€çš„å°å·¥å…·</h1></div><div flex="~ col" gap-3="" text="[var(--mygo-c-text-2)]"><div flex="~ wrap" gap-3="" justify-center=""><!----><div flex="" gap-1="" items-center=""><i class="i-fa6-regular:calendar"></i><span un-hidden="" lg:inline="">å‘è¡¨äº</span><span pl-1="">2022-07-25 15:40</span></div><div flex="" gap-1="" items-center=""><i class="i-fa6-regular:calendar-check"></i><span un-hidden="" lg:inline="">æ›´æ–°äº</span><span pl-1="">2023-02-13 18:28</span></div><div flex="" gap-1="" items-center=""><i class="i-fa6-regular:folder"></i><span un-hidden="" lg:inline="">åˆ†ç±»äº</span><!--[--><a pl-1="" href="/category/ç¼–ç¨‹">ç¼–ç¨‹</a><!--]--></div></div><div flex="~ wrap" gap-3="" justify-center=""><div flex="" gap-1="" items-center=""><i class="i-fa6-regular:file-word"></i><span un-hidden="" lg:inline="">æ€»å­—æ•°</span><span pl-1="">1.0K</span></div><div flex="" gap-1="" items-center=""><i class="i-fa6-regular:clock"></i><span un-hidden="" lg:inline="">é˜…è¯»æ—¶é•¿ â‰ˆ</span><span pl-1="">4 åˆ†é’Ÿ</span></div></div></div><div class="mujika-doc-content"><!--[--><div class="kan-doc"><h1 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€">ğŸ”—</a></h1><p>ä¸€ä¸ªæ›¿æ¢ <code>cdn</code> å‰ç¼€çš„å°å·¥å…·</p><p>ä¼—æ‰€å‘¨çŸ¥ï¼Œäººä¸ä¼šé—²ç€è›‹ç–¼ç»™è‡ªå·±æ‰¾äº‹å¹²</p><p>æ‰€ä»¥ï¼Œåšè¿™ä¸ªå°å·¥å…·æ˜¯æœ‰åŸå› çš„ï¼ŒåŸå› å¦‚ä¸‹</p><p>ç›®å‰åšå®¢çš„å›¾åºŠæ˜¯ä¸¢åœ¨ <code>github</code> ä»“åº“ä¸Šçš„ï¼Œç„¶åé€šè¿‡ <code>jsdelivr</code> æ¥è¿›è¡Œ <code>cdn</code> ä»£ç†çš„</p><p>è¿™ä¸ªè¯´å®è¯éå¸¸çš„ä¸é”™ï¼Œæœ€å¼€å§‹å›¾åºŠç”¨çš„ <code>sm.ms</code> ï¼Œä½†æ˜¯å›¾ç‰‡ä¸åœ¨è‡ªå·±æ‰‹é‡Œä¸æ˜¯å¾ˆæ”¾å¿ƒï¼Œåé¢å°±ä½¿ç”¨ <code>github</code> å›¾åºŠ</p><p>ä½†æ˜¯æœ€è¿‘ <code>jsdelivr</code> çš„ <code>cdn</code> å¾ˆå®¹æ˜“å‡ºç°è¿æ¥ä¸ä¸Šçš„æƒ…å†µï¼Œå¯ä»¥è¯´éå¸¸çš„æ“è›‹ï¼Œä¸€ä¸‹å­æ•´ä¸ªç«™ç‚¹çš„å›¾ç‰‡å…¨æŒ‚äº†</p><p><code>issue</code> åœ°å€ï¼š<a href="https://github.com/jsdelivr/jsdelivr/issues/18397" target="_blank" rel="noopener">Jsdelivr have been DNS pollution and SNI block again in China. They are pointed to google, twitter and facebook IPs</a></p><p>é—®é¢˜å¾ˆæ˜æ˜¾ï¼š<code>cdn.jsdelivr.net</code> è¢« <code>DNS</code> æ±¡æŸ“äº†ï¼Œæ‰€ä»¥æ— æ³•è®¿é—®äº†ï¼Œä½†æ˜¯å¦ä¸€ä¸ªåœ°å€ <code>fastly.jsdelivr.net</code> æ˜¯æ²¡æœ‰é—®é¢˜çš„</p><p>æ‰€ä»¥æˆ‘ä»¬éœ€è¦æŠŠå…¨éƒ¨çš„ <code>md</code> æ–‡æ¡£é‡Œé¢çš„å›¾ç‰‡çš„ <code>cdn.jsdelivr.net</code> é“¾æ¥æ›¿æ¢æˆ <code>fastly.jsdelivr.net</code></p><p>è™½ç„¶å¯ä»¥ç›´æ¥ <code>ide</code> æœç´¢å¤åˆ¶çš„ï¼Œä½†æ˜¯ä½œä¸ºä¸€ä¸ªæœ‰æ¢¦æƒ³çš„å’¸é±¼ï¼Œé¢ï¼Œä¸å¯¹ï¼Œæœ‰æ¢¦æƒ³çš„ç¨‹åºå‘˜ï¼Œå€ŸåŠ© <code>node</code> æ¥æ›¿æˆ‘ä»¬å®Œæˆè¿™é¡¹å·¥ä½œ</p><h1 id="æ­£æ–‡" tabindex="-1">æ­£æ–‡ <a class="header-anchor" href="#æ­£æ–‡">ğŸ”—</a></h1><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦æ‹†è§£ä¸‹å¤„ç†çš„æ­¥éª¤</p><ul><li>è¯»å‡ºæ–‡ä»¶çš„å†…å®¹</li><li>æ›¿æ¢ç›¸å…³å†…å®¹</li><li>å†™å…¥æ–‡ä»¶çš„å†…å®¹</li></ul><p>æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å†™å‡ºä¸‹é¢çš„ç®€å•æ¡†æ¶</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> fs</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#80A665;--s-light:#59873A"> require</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#C98A7D;--s-light:#B56959">fs</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> path</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#80A665;--s-light:#59873A"> require</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#C98A7D;--s-light:#B56959">path</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> POST_LIST_DIR</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> '</span><span style="--s-dark:#C98A7D;--s-light:#B56959">./source/_posts</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> SOURCE_CDN</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> '</span><span style="--s-dark:#C98A7D;--s-light:#B56959">fastly.jsdelivr.net</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> TARGET_CDN</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> '</span><span style="--s-dark:#C98A7D;--s-light:#B56959">cdn.jsdelivr.net</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> REGEXP</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> new</span><span style="--s-dark:#80A665;--s-light:#59873A"> RegExp</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">`</span><span style="--s-dark:#C98A7D;--s-light:#B56959">!</span><span style="--s-dark:#C99076;--s-light:#A65E2B">\\</span><span style="--s-dark:#C98A7D;--s-light:#B56959">[.*</span><span style="--s-dark:#C99076;--s-light:#A65E2B">\\</span><span style="--s-dark:#C98A7D;--s-light:#B56959">]</span><span style="--s-dark:#C99076;--s-light:#A65E2B">\\</span><span style="--s-dark:#C98A7D;--s-light:#B56959">(https?:</span><span style="--s-dark:#C99076;--s-light:#A65E2B">\\</span><span style="--s-dark:#C98A7D;--s-light:#B56959">/</span><span style="--s-dark:#C99076;--s-light:#A65E2B">\\</span><span style="--s-dark:#C98A7D;--s-light:#B56959">/</span><span style="--s-dark:#4D9375;--s-light:#1E754F">${</span><span style="--s-dark:#C98A7D;--s-light:#B56959">SOURCE_CDN</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">replaceAll</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">.</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C99076;--s-light:#A65E2B">\\</span><span style="--s-dark:#C98A7D;--s-light:#B56959">.</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#4D9375;--s-light:#1E754F">}</span><span style="--s-dark:#C98A7D;--s-light:#B56959">.*</span><span style="--s-dark:#C99076;--s-light:#A65E2B">\\</span><span style="--s-dark:#C98A7D;--s-light:#B56959">)</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">`</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> '</span><span style="--s-dark:#C98A7D;--s-light:#B56959">img</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">/**</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0"> * </span><span style="--s-dark:#666666;--s-light:#999999">@</span><span style="--s-dark:#4D9375;--s-light:#1E754F">returns</span><span style="--s-dark:#666666;--s-light:#999999"> {</span><span style="--s-dark:#5DA994;--s-light:#2E8F82">Promise&lt;Array&lt;{ filepath: string; fileContent: string }&gt;&gt;</span><span style="--s-dark:#666666;--s-light:#999999">}</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0"> */</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">const</span><span style="--s-dark:#80A665;--s-light:#59873A"> getPostList</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> async</span><span style="--s-dark:#666666;--s-light:#999999"> ()</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  // TODO</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">/**</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0"> * </span><span style="--s-dark:#666666;--s-light:#999999">@</span><span style="--s-dark:#4D9375;--s-light:#1E754F">param</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> postList</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0"> {Array&lt;{ filepath: string; fileContent: string }&gt;}</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0"> * </span><span style="--s-dark:#666666;--s-light:#999999">@</span><span style="--s-dark:#4D9375;--s-light:#1E754F">returns</span><span style="--s-dark:#666666;--s-light:#999999"> {</span><span style="--s-dark:#5DA994;--s-light:#2E8F82">Array&lt;{ filepath: string; fileContent: string }&gt;</span><span style="--s-dark:#666666;--s-light:#999999">}</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0"> */</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">const</span><span style="--s-dark:#80A665;--s-light:#59873A"> replaceCdn</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">postList</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  // TODO </span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">/**</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0"> * </span><span style="--s-dark:#666666;--s-light:#999999">@</span><span style="--s-dark:#4D9375;--s-light:#1E754F">param</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> postList</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0"> {Array&lt;{ filepath: string; fileContent: string }&gt;}</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0"> * </span><span style="--s-dark:#666666;--s-light:#999999">@</span><span style="--s-dark:#4D9375;--s-light:#1E754F">returns</span><span style="--s-dark:#666666;--s-light:#999999"> {</span><span style="--s-dark:#5DA994;--s-light:#2E8F82">Promise&lt;void&gt;</span><span style="--s-dark:#666666;--s-light:#999999">}</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0"> */</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">const</span><span style="--s-dark:#80A665;--s-light:#59873A"> writePostList</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> async</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">postList</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  // TODO</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">const</span><span style="--s-dark:#80A665;--s-light:#59873A"> main</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> async</span><span style="--s-dark:#666666;--s-light:#999999"> ()</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">  const</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> postList</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> await</span><span style="--s-dark:#80A665;--s-light:#59873A"> getPostList</span><span style="--s-dark:#666666;--s-light:#999999">();</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">  const</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> newPostList</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#80A665;--s-light:#59873A"> replaceCdn</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">postList</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  await</span><span style="--s-dark:#80A665;--s-light:#59873A"> writePostList</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">newPostList</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">main</span><span style="--s-dark:#666666;--s-light:#999999">();</span></span></code></pre><p>å¯ä»¥çœ‹åˆ°è¿™é‡Œé¢æˆ‘ä»¬ä½¿ç”¨äº† <code>{ filepath: string; fileContent: string }</code> æ¥ä½œä¸ºä¸­é—´çš„æ•°æ®ç»“æ„</p><p>ä¸»è¦æ˜¯ä¸ºäº†è®©å†…å®¹å’Œæ–‡ä»¶å¯¹åº”ï¼Œè¿™æ ·å­å¤„ç†å®Œæˆä¹‹åï¼Œæˆ‘ä»¬èƒ½å¤Ÿé‡æ–°çš„å†™å›å»</p><p>åœ¨æ›¿æ¢éƒ¨åˆ†æˆ‘ä»¬ä½¿ç”¨äº†æ­£åˆ™</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">const</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> REGEXP</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> new</span><span style="--s-dark:#80A665;--s-light:#59873A"> RegExp</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">`</span><span style="--s-dark:#C98A7D;--s-light:#B56959">!</span><span style="--s-dark:#C99076;--s-light:#A65E2B">\\</span><span style="--s-dark:#C98A7D;--s-light:#B56959">[.*</span><span style="--s-dark:#C99076;--s-light:#A65E2B">\\</span><span style="--s-dark:#C98A7D;--s-light:#B56959">]</span><span style="--s-dark:#C99076;--s-light:#A65E2B">\\</span><span style="--s-dark:#C98A7D;--s-light:#B56959">(https?:</span><span style="--s-dark:#C99076;--s-light:#A65E2B">\\</span><span style="--s-dark:#C98A7D;--s-light:#B56959">/</span><span style="--s-dark:#C99076;--s-light:#A65E2B">\\</span><span style="--s-dark:#C98A7D;--s-light:#B56959">/</span><span style="--s-dark:#4D9375;--s-light:#1E754F">${</span><span style="--s-dark:#C98A7D;--s-light:#B56959">SOURCE_CDN</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">replaceAll</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">.</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C99076;--s-light:#A65E2B">\\</span><span style="--s-dark:#C98A7D;--s-light:#B56959">.</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#4D9375;--s-light:#1E754F">}</span><span style="--s-dark:#C98A7D;--s-light:#B56959">.*</span><span style="--s-dark:#C99076;--s-light:#A65E2B">\\</span><span style="--s-dark:#C98A7D;--s-light:#B56959">)</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">`</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> '</span><span style="--s-dark:#C98A7D;--s-light:#B56959">img</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span></code></pre><p>åœ¨ <code>md</code> ä¸­ï¼Œå›¾ç‰‡çš„è¯­æ³•æ˜¯ <code>![å›¾ç‰‡çš„ç®€ä»‹](å›¾ç‰‡åœ°å€)</code></p><p>åœ¨ä¸å¤„ç†åœ°å€çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>/!\[.*\]\(.*\)/mg</code> å³å¯åŒ¹é…åˆ°å¯¹åº”çš„é¡¹</p><p><a data-fancybox="doc-gallery" href="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/07/25/202207251608716.avif" target="_blank" rel="noopener noreferrer"><img src="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/07/25/202207251608716.avif" alt=""></a></p><p>åŠ ä¸Šåœ°å€çš„è¯åªè¦åœ¨åœ†æ‹¬å·åˆ¤æ–­å³å¯ <code>/!\[.*\]\(https?:\/\/fastly\.jsdelivr\.net.*\)/img</code></p><p>è¿™é‡ŒåŠ ä¸Šåœ°å€åˆ¤æ–­çš„åŸå› æ˜¯ä¹‹å‰è¿˜æœ‰ä¸€äº›å›¾ç‰‡ä½¿ç”¨çš„ <code>sm.ms</code> çš„å›¾åºŠï¼Œæ’é™¤æ‰å®ƒä»¬</p><p>æ¥ä¸‹æ¥å°±å¯ä»¥å®ç°æ¯ä¸ªå‡½æ•°äº†</p><h2 id="getpostlist-å®ç°" tabindex="-1">getPostList å®ç° <a class="header-anchor" href="#getpostlist-å®ç°">ğŸ”—</a></h2><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">const</span><span style="--s-dark:#80A665;--s-light:#59873A"> getPostList</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> async</span><span style="--s-dark:#666666;--s-light:#999999"> ()</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  return</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> new</span><span style="--s-dark:#B8A965;--s-light:#998418"> Promise</span><span style="--s-dark:#666666;--s-light:#999999">((</span><span style="--s-dark:#BD976A;--s-light:#B07D48">resolve</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> reject</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">    // è¯»ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œä¼šè¿”å›æ–‡ä»¶å¤¹å†…çš„æ–‡ä»¶åˆ—è¡¨åå­—</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">    fs</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">readdir</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">POST_LIST_DIR</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">err</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> result</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">      if</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">err</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">        console</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">error</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">err</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">        reject</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">err</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">        return</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">      }</span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418">      Promise</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">all</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">result</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">map</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">filename</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">        return</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> new</span><span style="--s-dark:#B8A965;--s-light:#998418"> Promise</span><span style="--s-dark:#666666;--s-light:#999999">((</span><span style="--s-dark:#BD976A;--s-light:#B07D48">resolve</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> reject</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">          // æ„é€ æ–‡ä»¶çš„ç»å¯¹è·¯å¾„</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">          const</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> filepath</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> path</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">resolve</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">POST_LIST_DIR</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> filename</span><span style="--s-dark:#666666;--s-light:#999999">)</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">          // è¯»å–è¿™ä¸ªæ–‡ä»¶</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">          fs</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">readFile</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">filepath</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">err</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> result</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">            if</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">err</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">              reject</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">err</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">              return</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">            }</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">            // æŠŠç»“æœ resolve å‡ºå»</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">            resolve</span><span style="--s-dark:#666666;--s-light:#999999">({</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">              filepath</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34"> </span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418">              fileContent</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> result</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">toString</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#C98A7D;--s-light:#B56959">utf-8</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">'</span><span style="--s-dark:#666666;--s-light:#999999">)</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">            });</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">          })</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">        })</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">      })).</span><span style="--s-dark:#80A665;--s-light:#59873A">then</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">resolve</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> reject</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">    });</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  })</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span></code></pre><h2 id="replacecdn-å®ç°" tabindex="-1">replaceCdn å®ç° <a class="header-anchor" href="#replacecdn-å®ç°">ğŸ”—</a></h2><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">/**</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0"> * </span><span style="--s-dark:#666666;--s-light:#999999">@</span><span style="--s-dark:#4D9375;--s-light:#1E754F">param</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> postList</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0"> {Array&lt;{ filepath: string; fileContent: string }&gt;}</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0"> * </span><span style="--s-dark:#666666;--s-light:#999999">@</span><span style="--s-dark:#4D9375;--s-light:#1E754F">returns</span><span style="--s-dark:#666666;--s-light:#999999"> {</span><span style="--s-dark:#5DA994;--s-light:#2E8F82">Array&lt;{ filepath: string; fileContent: string }&gt;</span><span style="--s-dark:#666666;--s-light:#999999">}</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0"> */</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">const</span><span style="--s-dark:#80A665;--s-light:#59873A"> replaceCdn</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">postList</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  return</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> postList</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">map</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">post</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">    const</span><span style="--s-dark:#666666;--s-light:#999999"> {</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> filepath</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> fileContent</span><span style="--s-dark:#666666;--s-light:#999999"> }</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> post</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">    // å¯¹æ¯ä¸ªæ–‡ä»¶å†…å®¹è¿›è¡Œæ­£åˆ™æ›¿æ¢</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">    return</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">      filepath</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34"> </span></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418">      fileContent</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> fileContent</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">replace</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">REGEXP</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">match</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">        return</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> match</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">replace</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">SOURCE_CDN</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> TARGET_CDN</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">      })</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">    };</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  });</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span></code></pre><p>è¿™é‡Œ <code>replace</code> ä½¿ç”¨äº†å‡½æ•°å‚æ•°æ¥æ›¿æ¢å¯¹åº”å†…å®¹ï¼Œæ¯åŒ¹é…åˆ°ä¸€ä¸ªç»“æœï¼Œå°±ä¼šå›è°ƒä¸€æ¬¡è¿™ä¸ªå‡½æ•°ï¼Œå°†å…¶è¿”å›ç»“æœä½œä¸ºæ–°çš„å­—ç¬¦ä¸²</p><p>æ¯”å¦‚è¿™é‡Œçš„ <code>fileContent</code> ä¸º <code>![](https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/07/25/202207251608716.avif)</code></p><p>é‚£ä¹ˆå‡½æ•°é‡Œçš„ <code>match</code> å‚æ•°å°±ä¼šæ˜¯ <code>![](https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/07/25/202207251608716.avif)</code></p><p>ç„¶åæˆ‘ä»¬å†ç®€å•åœ° <code>replace</code> åœ°å€å³å¯</p><h2 id="writepostlist-å®ç°" tabindex="-1">writePostList å®ç° <a class="header-anchor" href="#writepostlist-å®ç°">ğŸ”—</a></h2><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">const</span><span style="--s-dark:#80A665;--s-light:#59873A"> writePostList</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> async</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">postList</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  return</span><span style="--s-dark:#B8A965;--s-light:#998418"> Promise</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">all</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">postList</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">map</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">post</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">    const</span><span style="--s-dark:#666666;--s-light:#999999"> {</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> filepath</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> fileContent</span><span style="--s-dark:#666666;--s-light:#999999"> }</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> post</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">    return</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> new</span><span style="--s-dark:#B8A965;--s-light:#998418"> Promise</span><span style="--s-dark:#666666;--s-light:#999999">((</span><span style="--s-dark:#BD976A;--s-light:#B07D48">resolve</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> reject</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">      // å†™å…¥æ–‡ä»¶</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">      fs</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">writeFile</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">filepath</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> fileContent</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">err</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">        if</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">err</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">          reject</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">err</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">          return</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">        }</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">        resolve</span><span style="--s-dark:#666666;--s-light:#999999">();</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">      });</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">    });</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  }));</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span></code></pre><p>å®Œæˆä¹‹åæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ª <code>test.md</code> æ¥æµ‹è¯•æ•ˆæœ</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-markdown"><span class="line"><span style="--s-dark:#666666;--s-light:#999999">![](</span><span style="--s-dark:#DEDCD590;--s-dark-text-decoration:underline;--s-light:#393A3490;--s-light-text-decoration:underline">https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/07/25/202207251608716.avif</span><span style="--s-dark:#666666;--s-light:#999999">)</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#DBD7CAEE;--s-light:#393A34">aa</span><span style="--s-dark:#666666;--s-light:#999999">![](</span><span style="--s-dark:#DEDCD590;--s-dark-text-decoration:underline;--s-light:#393A3490;--s-light-text-decoration:underline">https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/07/25/202207251608716.avif</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#DBD7CAEE;--s-light:#393A34">bb</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">![](</span><span style="--s-dark:#DEDCD590;--s-dark-text-decoration:underline;--s-light:#393A3490;--s-light-text-decoration:underline">https://sm.ms/xx.avif</span><span style="--s-dark:#666666;--s-light:#999999">)</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#DBD7CAEE;--s-light:#393A34">https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/202207251608716.avif</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#DBD7CAEE;--s-light:#393A34">https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/202207251608716.avif</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#DBD7CAEE;--s-light:#393A34">aaahttps://fastly.jsdelivr.net/gh/Dedicatus546/image@main/202207251608716.avif</span></span></code></pre><p>ç„¶åæˆ‘ä»¬æ‰§è¡Œ <code>node ./replacePicCdn.js</code></p><p><a data-fancybox="doc-gallery" href="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/07/25/202207251623316.avif" target="_blank" rel="noopener noreferrer"><img src="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/07/25/202207251623316.avif" alt=""></a></p><p>ç„¶åæˆ‘ä»¬å°±å¯ä»¥çœ‹è§æ–‡ä»¶å‘ç”Ÿæ”¹å˜äº†</p><p><a data-fancybox="doc-gallery" href="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/07/25/202207251624556.avif" target="_blank" rel="noopener noreferrer"><img src="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/07/25/202207251624556.avif" alt=""></a></p><h1 id="åè®°" tabindex="-1">åè®° <a class="header-anchor" href="#åè®°">ğŸ”—</a></h1><p>è™½ç„¶æ˜¯ä¸€ä¸ªç®€å•çš„å°å·¥å…·ä¸è¿‡è¿˜æ˜¯ç›¸å½“æœ‰è¶£çš„</p><p>ä¸»è¦æ˜¯åœ¨æ­£åˆ™è¿™ä¸€å—ï¼Œé€šè¿‡ <code>new RegExp</code>çš„æ­£åˆ™ï¼Œ<code>\</code> è¿™ä¸ªä¹Ÿéœ€è¦è½¬ä¹‰</p><p>æ¯”å¦‚å­—é¢é‡æƒ…å†µä¸‹ <code>/!\[.*\]\(.*\)/mg</code> è¿™æ ·å†™å³å¯</p><p>ä½†æ˜¯ <code>new</code> çš„è¯å°±è¦ <code>new RegExp("!\\[.*\\]", "mg")</code> ï¼Œåœ¨è¿™é‡Œå¡äº†å¥½ä¸€ä¼šäº†</p><p><a data-fancybox="doc-gallery" href="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/07/25/202207251631748.avif" target="_blank" rel="noopener noreferrer"><img src="https://fastly.jsdelivr.net/gh/Dedicatus546/image@main/2022/07/25/202207251631748.avif" alt=""></a></p></div><!--]--></div><div flex="~ wrap" text="[var(--mygo-c-text-2)]" mt-8="" gap-4="" justify-center=""><!--[--><div>#Node</div><div>#JavaScript</div><!--]--></div><!--]--></div></div><div class="mujika-card mujika-card--hover mujika-card--border" w-full="" overflow-auto="" data-v-7ac4adc5=""><div class="p-4 lg:p-8" data-v-7ac4adc5=""><!--[--><div flex="~ wrap" gap-4=""><a href="/587751cd41b2" class="" truncate="" title="ä½¿ç”¨ husky æ¥ä¸ºå¸–å­å¢åŠ æ›´æ–°æ—¶é—´"><i class="i-mi:chevron-left" mr-1=""></i><span>ä½¿ç”¨ husky æ¥ä¸ºå¸–å­å¢åŠ æ›´æ–°æ—¶é—´</span></a><a href="/b422e873674f" class="" ml-auto="" truncate="" title="VSCode è¿œç¨‹è°ƒè¯• Node ç¨‹åº Rg è¿›ç¨‹ CPU å ç”¨è¿‡é«˜é—®é¢˜"><span>VSCode è¿œç¨‹è°ƒè¯• Node ç¨‹åº Rg è¿›ç¨‹ CPU å ç”¨è¿‡é«˜é—®é¢˜</span><i class="i-mi:chevron-right" ml-1=""></i></a></div><!--]--></div></div><!--[--><div class="mujika-card mujika-card--hover mujika-card--border" w-full="" overflow-auto="" data-v-93b0ae89="" data-v-7ac4adc5=""><div class="p-4 lg:p-8" data-v-7ac4adc5=""><!--[--><div flex="" gap-4="" items-start="" data-v-93b0ae89=""><div flex="~ shrink-0" bg="[var(--mygo-c-bg-alt)]" rounded-6px="" w-60px="" aspect-ratio-square="" items-center="" justify-center="" data-v-93b0ae89=""><i text-40px="" text="[#999]" class="i-fa6-regular:user" data-v-93b0ae89=""></i></div><div flex="~ col grow" gap-4="" data-v-93b0ae89=""><textarea disabled="" placeholder="ä¸‡æ°´åƒå±±æ€»æ˜¯æƒ…ï¼Œç•™ä¸‹è¯„è®ºè¡Œä¸è¡Œ" class="mujika-git-talk-textarea" un-disabled:cursor-not-allowed="" p-2="" outline-0="" lg:p-4="" data-v-93b0ae89=""></textarea><div flex="" items-start="" justify-between="" data-v-93b0ae89=""><a target="_blank" href="https://guides.github.com/features/mastering-markdown/" data-v-93b0ae89="">æ”¯æŒ Markdown è¯­æ³• </a><button class="mujika-git-talk-button" cursor-pointer="" data-v-93b0ae89="">ç‚¹å‡»ç™»å½•</button></div></div></div><!--]--></div></div><!----><!--]--></div><aside class="mujika-aside" w="280px" flex="~ col shrink-0" top-2="" sticky="" max-h="[calc(100vh-var(--spacing)*4)]" un-hidden="" lg:block=""><div class="mujika-card mujika-card--hover mujika-card--border" w-full="" overflow-auto="" flex="~ col" gap-4="" data-v-7ac4adc5=""><!--[--><div p="4 b-0" flex-shrink-0="">æ–‡ç« ç›®å½•</div><div p="4 t-0" flex-grow="" min-h-0="" overflow-y-auto=""><!----></div><!--]--></div></aside><!--teleport start--><!--teleport end--></div></main><footer class="mujika-footer" px-4="" py-6="" bg="[var(--mygo-c-bg)]" flex="~ col shrink-0" gap-2="" items-center="" data-v-d1d7a153=""><div flex="" items-center="" data-v-d1d7a153=""><span data-v-d1d7a153="">Power by&nbsp;</span><i class="i-logos:vue" data-v-d1d7a153=""></i><span data-v-d1d7a153="">&nbsp;+&nbsp;</span><i class="i-logos:vitejs" data-v-d1d7a153=""></i></div><div text-center="" data-v-d1d7a153=""><a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" data-v-d1d7a153="">CC BY-NC-SA 4.0 </a>2021 - PRESENT Â© Dedicatus545</div><div text="[var(--mygo-c-text-2)]" text-center="" data-v-d1d7a153="">å¦‚æœæˆ‘å’Œç‹—ä¸€æ ·æœ‰å°¾å·´çš„è¯ï¼Œä¸€å®šä¼šè—ä¸ä½è¿™ä»½å–œæ‚¦ï¼Œè€Œå°¾å·´ä¸€ç›´æ‘‡ä¸ªä¸åœå§ã€‚</div></footer></div></div></body></html>