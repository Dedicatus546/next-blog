<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><link rel="icon" type="image/svg+xml" href="/logo.svg"><meta name="viewport" content="width=device-width,initial-scale=1"><title>JavaScriptä¸­çš„Promise</title><script type="importmap">{"imports":{"vue":"https://esm.sh/vue","vue-router":"https://esm.sh/vue-router","pinia":"https://esm.sh/pinia","@vueuse/core":"https://esm.sh/@vueuse/core","@vueuse/components":"https://esm.sh/@vueuse/components","@vueuse/router":"https://esm.sh/@vueuse/router","date-fns":"https://esm.sh/date-fns","nprogress":"https://esm.sh/nprogress","octokit":"https://esm.sh/octokit","pinia-plugin-persistedstate":"https://esm.sh/pinia-plugin-persistedstate","vue-router-better-scroller":"https://esm.sh/vue-router-better-scroller"}}</script><script type="module" async="" crossorigin="" src="/assets/app-2Hgo7EZs.js"></script><link rel="stylesheet" crossorigin="" href="/assets/app-BmBo8YJO.css"><link rel="modulepreload" crossorigin="" href="/assets/JavaScriptä¸­çš„Promise-C0b9hc6B.js"><meta property="og:title" content="JavaScriptä¸­çš„Promise"><meta name="twitter:title" content="JavaScriptä¸­çš„Promise"></head><body><div id="app" data-server-rendered="true"><div class="mujika" min-h="100vh" flex="~ col" bg="[--mygo-c-bg-alt]"><header class="mujika-header" flex="~ shrink-0" px-4="" h="70px" bg="[var(--mygo-c-bg)]" items-center="" justify-between="" data-v-c1947e25=""><a href="/" class="" flex="" gap-4="" items-center="" data-v-c1947e25=""><img w="40px" aspect-ratio-square="" src="/logo.svg" alt="æ‹ã®æ­Œçš„logo" data-v-c1947e25=""></a><div data-v-c1947e25=""><div p-1="" flex="" gap-1="" rounded="6px" bg="[var(--mygo-c-bg-alt)]" data-v-c1947e25=""><!--[--><div leading="[1]" px-2="" py-1="" cursor-pointer="" rounded="6px" class="bg-[var(--mygo-c-bg)]" title="è‡ªåŠ¨" data-v-c1947e25=""><!--[-->Auto<!--]--></div><div leading="[1]" px-2="" py-1="" cursor-pointer="" rounded="6px" class="" title="æ—¥é—´" data-v-c1947e25=""><!--[--><i class="i-ri:sun-line" data-v-c1947e25=""></i><!--]--></div><div leading="[1]" px-2="" py-1="" cursor-pointer="" rounded="6px" class="" title="å¤œé—´" data-v-c1947e25=""><!--[--><i class="i-ri:moon-line" data-v-c1947e25=""></i><!--]--></div><!--]--></div></div></header><main class="mujika-home" flex="grow" mx="auto" min-h="0" p-2="" w-full="" un-2xl:w="[calc(96rem-var(--spacing)*2)]"><div flex="" gap-2="" items-start=""><div flex="~ col grow" gap-2="" min-w-0=""><div class="mujika-card mujika-card--hover mujika-card--border" w-full="" overflow-auto="" data-v-7ac4adc5=""><div class="p-4 lg:p-8" data-v-7ac4adc5=""><!--[--><div flex="~ col" mb-4="" gap-4=""><h1 break-all="" text="34px center">JavaScriptä¸­çš„Promise</h1></div><div flex="~ col" gap-3="" text="[var(--mygo-c-text-2)]"><div flex="~ wrap" gap-3="" justify-center=""><!----><div flex="" gap-1="" items-center=""><i class="i-fa6-regular:calendar"></i><span un-hidden="" lg:inline="">å‘è¡¨äº</span><span pl-1="">2020-06-11 23:33</span></div><div flex="" gap-1="" items-center=""><i class="i-fa6-regular:calendar-check"></i><span un-hidden="" lg:inline="">æ›´æ–°äº</span><span pl-1="">2023-02-13 18:28</span></div><div flex="" gap-1="" items-center=""><i class="i-fa6-regular:folder"></i><span un-hidden="" lg:inline="">åˆ†ç±»äº</span><!--[--><a pl-1="" href="/category/ç¼–ç¨‹">ç¼–ç¨‹</a><!--]--></div></div><div flex="~ wrap" gap-3="" justify-center=""><div flex="" gap-1="" items-center=""><i class="i-fa6-regular:file-word"></i><span un-hidden="" lg:inline="">æ€»å­—æ•°</span><span pl-1="">1.9K</span></div><div flex="" gap-1="" items-center=""><i class="i-fa6-regular:clock"></i><span un-hidden="" lg:inline="">é˜…è¯»æ—¶é•¿ â‰ˆ</span><span pl-1="">7 åˆ†é’Ÿ</span></div></div></div><div class="mujika-doc-content"><!--[--><div class="kan-doc"><p><code>JavaScript</code>ä¸­çš„<code>Promise</code></p><h1 id="promise" tabindex="-1"><code>Promise</code> <a class="header-anchor" href="#promise">ğŸ”—</a></h1><p>è¯­æ³•ï¼š<code>new Promise(function(resolve, reject){/*é€»è¾‘è¯­å¥*/})</code></p><p>æ‰€è°“<code>Promise</code>ï¼Œåœ¨è‹±æ–‡ä¸­å°±æ˜¯æ‰¿è¯ºçš„æ„æ€ã€‚</p><p><code>Promise</code>æ¥å—ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼š</p><ul><li>ç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆä¸€èˆ¬åä¸º<code>resolve</code>ï¼‰ï¼šå¦‚æœå‡½æ•°ä½“å†…çš„æ“ä½œæˆåŠŸï¼Œåˆ™åº”è¯¥è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œå¹¶ä¼ å…¥æˆåŠŸçš„ä¿¡æ¯ï¼›</li><li>ç¬¬äºŒä¸ªå‚æ•°ï¼ˆä¸€èˆ¬åä¸º<code>reject</code>ï¼‰ï¼šå¦‚æœå‡½æ•°ä½“å†…çš„æ“ä½œå¤±è´¥æˆ–è€…å‡ºé”™ï¼Œåˆ™åº”è¯¥è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œå¹¶ä¼ å…¥å¤±è´¥çš„ä¿¡æ¯ã€‚</li></ul><p>è¿™ä¸ªå‡½æ•°ä½“å†…å¯ä»¥æ˜¯åŒæ­¥æˆ–è€…å¼‚æ­¥æ“ä½œã€‚</p><p>æ¯ä¸ª<code>Promise</code>å¯¹è±¡å¯ä»¥é€šè¿‡<code>.then</code>æˆ–è€…<code>.catch</code>çš„æ–¹å¼æ¥å®šä¹‰æˆåŠŸæˆ–è€…é”™è¯¯çš„å›è°ƒå‡½æ•°ã€‚</p><p>å¯ä»¥é€šè¿‡ <code>.finally</code>æ–¹æ³•æ¥å®šä¹‰å›è°ƒçš„æœ€åä¸€å®šä¼šæ‰§è¡Œçš„å‡½æ•°ã€‚</p><ul><li><code>then(onFulfilled, onRejected)</code>ï¼š<code>then</code>æ–¹æ³•ä¼ å…¥ä¸¤ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼›<ul><li><code>onFulfilled</code>å‡½æ•°æœ‰ä¸€ä¸ªå‚æ•°ï¼Œè¡¨ç¤º<code>Promise</code>å¯¹è±¡æˆåŠŸæ‰€ä¼ å…¥çš„å€¼ï¼›</li><li><code>onRejected</code>å‡½æ•°æœ‰ä¸€ä¸ªå‚æ•°ï¼Œè¡¨ç¤º<code>Promise</code>å¯¹è±¡å¤±è´¥æˆ–è€…å‡ºé”™æ‰€ä¼ å…¥çš„å€¼ï¼›</li></ul></li><li><code>catch(onRejected)</code>ï¼›<ul><li><code>onRejected</code>å‡½æ•°æœ‰ä¸€ä¸ªå‚æ•°ï¼Œè¡¨ç¤º<code>Promise</code>å¯¹è±¡å¤±è´¥æˆ–è€…å‡ºé”™æ‰€ä¼ å…¥çš„å€¼ï¼›</li></ul></li><li><code>finally(onFinally)</code>ï¼›<ul><li><code>onFinally</code>å‡½æ•°æœ‰ä¸€ä¸ªå‚æ•°ï¼Œæ— è®º<code>Promise</code>çš„çŠ¶æ€æ˜¯å¤±è´¥è¿˜æ˜¯æˆåŠŸï¼Œæœ€åéƒ½ä¼šæ‰§è¡Œè¿™ä¸ªå‡½æ•°ã€‚</li></ul></li></ul><p>PSï¼š<code>Promise</code>å¯¹è±¡çš„çŠ¶æ€ä¸€æ—¦ç¡®å®šï¼Œå°±ä¸ä¼šå†æ”¹å˜äº†ã€‚</p><p>å¦‚æœä¸€ä¸ª<code>Promise</code>å¯¹è±¡æˆåŠŸäº†ä¹‹åï¼Œå®ƒå°±ä¸ä¼šå†å˜æˆå¤±è´¥çš„çŠ¶æ€äº†ã€‚</p><p>åŒç†ï¼Œå¦‚æœä¸€ä¸ª<code>Promise</code>å¯¹è±¡å¤±è´¥äº†ä¹‹åï¼Œå®ƒä¹Ÿå°±ä¸ä¼šå†å˜æˆæˆåŠŸçš„çŠ¶æ€äº†ã€‚</p><p>æ¯”å¦‚ç°åœ¨æˆ‘ä»¬å¸Œæœ›åœ¨<code>3</code>s ä¹‹åå‘æ§åˆ¶å°æ‰“å°æ•°å­—<code>100</code>ã€‚</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">var</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> promise</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> new</span><span style="--s-dark:#B8A965;--s-light:#998418"> Promise</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#CB7676;--s-light:#AB5959">function</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">resolve</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> reject</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">  setTimeout</span><span style="--s-dark:#666666;--s-light:#999999">(()</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">    resolve</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#4C9A91;--s-light:#2F798A">100</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  },</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 3000</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">});</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">promise</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">then</span><span style="--s-dark:#666666;--s-light:#999999">((</span><span style="--s-dark:#BD976A;--s-light:#B07D48">val</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  console</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">log</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">val</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">});</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">// ä¸ºäº†ç¡®å®šä¸Šé¢çš„logæ˜¯å¼‚æ­¥çš„</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">console</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">log</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">ä¸çŸ¥é“æ‰“å°ä»€ä¹ˆä¸œè¥¿</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span></code></pre><p>ç„¶åç²˜è´´åˆ°æ§åˆ¶å°çœ‹çœ‹ï¼š</p><p><a data-fancybox="doc-gallery" href="https://i.loli.net/2019/11/17/Z59LNCWTg4erlP6.png" target="_blank" rel="noopener noreferrer"><img src="https://i.loli.net/2019/11/17/Z59LNCWTg4erlP6.png" alt=""></a></p><p>å…ˆæ‰“å°äº†ä¸‹é¢çš„ä¸€å¥<code>log</code>å†æ‰“å°äº†å‡½æ•°ä½“é‡Œé¢çš„<code>log</code>ã€‚</p><p>å¯ä»¥è¯æ˜è¿™ä¸ª<code>log</code>ç¡®å®ä¸æ˜¯åŒæ­¥æ‰§è¡Œçš„ã€‚</p><p>è€Œä¸”å¯ä»¥å‘ç°ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰æ‰§è¡Œä¼ å…¥<code>Promise</code>çš„å‡½æ•°ï¼Œä½†æ˜¯<code>setTimeout</code>ç¡®å®æ˜¯æ‰§è¡Œäº†ã€‚</p><p>ä¹Ÿå°±æ˜¯è¯´å½“æˆ‘ä»¬æŠŠè¿™ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ä¼ å…¥æ—¶ï¼Œè¿™ä¸ªå‡½æ•°å°±ä¼šå¼€å§‹æ‰§è¡Œäº†ã€‚</p><p>å¹¶ä¸”è¿™ä¸ªå‡½æ•°åªæ‰§è¡Œä¸€æ¬¡ã€‚</p><p>æˆ‘ä»¬å¯ä»¥è¯•è¯•å¤±è´¥çš„æ‰“å°ï¼š</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">var</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> promise</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> new</span><span style="--s-dark:#B8A965;--s-light:#998418"> Promise</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#CB7676;--s-light:#AB5959">function</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">resolve</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> reject</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">  setTimeout</span><span style="--s-dark:#666666;--s-light:#999999">(()</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">    reject</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">å‘ç”Ÿé”™è¯¯å•¦ï¼ï¼</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  },</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 3000</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">});</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">promise</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">then</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#CB7676;--s-light:#AB5959">null</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">err</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  console</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">log</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">æˆ‘æ˜¯thenæ–¹æ³•æ•è·çš„é”™è¯¯</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> +</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> err</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">});</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">promise</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">catch</span><span style="--s-dark:#666666;--s-light:#999999">((</span><span style="--s-dark:#BD976A;--s-light:#B07D48">err</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  console</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">log</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">æˆ‘æ˜¯catchæ–¹æ³•æ•è·çš„é”™è¯¯</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> +</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> err</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">});</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">// ä¸ºäº†ç¡®å®šä¸Šé¢çš„logæ˜¯å¼‚æ­¥çš„</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">console</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">log</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">ä¸çŸ¥é“æ‰“å°ä»€ä¹ˆä¸œè¥¿</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span></code></pre><p>è¿è¡Œä»£ç ï¼Œå‘ç°å¯ä»¥æ•æ‰åˆ°é”™è¯¯ï¼š</p><p><a data-fancybox="doc-gallery" href="https://i.loli.net/2019/11/18/bgTlIGN31aWkCKu.png" target="_blank" rel="noopener noreferrer"><img src="https://i.loli.net/2019/11/18/bgTlIGN31aWkCKu.png" alt=""></a></p><p>ç°åœ¨å¦‚æœå¸Œæœ›ä¸ç®¡<code>Promise</code>æˆåŠŸè¿˜æ˜¯å¤±è´¥éƒ½æ‰§è¡Œä¸€æ®µé€»è¾‘ã€‚</p><p>å¾ˆåƒä»æ•°æ®åº“è¯»å–æ•°æ®çš„æ“ä½œï¼Œä¸ç®¡è¯»å–æ•°æ®çš„æˆåŠŸè¿˜æ˜¯å¤±è´¥ï¼Œæœ€åéƒ½è¦å…³æ‰ä¸€äº›èµ„æºã€‚</p><p>ç”±äº<code>Promise</code>çš„å‡½æ•°å‚æ•°ä¼ å…¥æ—¶å°±ä¼šå¼€å§‹æ‰§è¡Œã€‚</p><p>å¯ä»¥é€šè¿‡ä¸€ä¸ªå‡½æ•°æ¯æ¬¡è¿”å›ä¸€ä¸ªæ–°çš„<code>Promise</code>å¯¹è±¡æ¥æŸ¥çœ‹ä¸åŒçš„çŠ¶æ€ä¸‹çš„æƒ…å†µã€‚</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">var</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> flag</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> true</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">function</span><span style="--s-dark:#80A665;--s-light:#59873A"> testPromise</span><span style="--s-dark:#666666;--s-light:#999999">()</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  return</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> new</span><span style="--s-dark:#B8A965;--s-light:#998418"> Promise</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#CB7676;--s-light:#AB5959">function</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">resolve</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> reject</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">    setTimeout</span><span style="--s-dark:#666666;--s-light:#999999">(()</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">      if</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">flag</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">        resolve</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">è¿è¡ŒæˆåŠŸæ–¹æ³•å•¦!</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">      }</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> else</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">        reject</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">è¿è¡Œå¤±è´¥æ–¹æ³•å•¦ï¼</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">      }</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">      flag</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> !</span><span style="--s-dark:#BD976A;--s-light:#B07D48">flag</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">    },</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 3000</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  });</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">testPromise</span><span style="--s-dark:#666666;--s-light:#999999">()</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  .</span><span style="--s-dark:#80A665;--s-light:#59873A">then</span><span style="--s-dark:#666666;--s-light:#999999">(</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">    (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">res</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">      console</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">log</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">res</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">    },</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">    (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">err</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">      console</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">log</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">err</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">    }</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  )</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  .</span><span style="--s-dark:#80A665;--s-light:#59873A">finally</span><span style="--s-dark:#666666;--s-light:#999999">(()</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">    console</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">log</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">æˆ‘æ˜¯æœ€åè¦è¿è¡Œçš„é€»è¾‘å•¦!</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  });</span></span></code></pre><p>è¿è¡Œä»£ç ï¼š</p><p><a data-fancybox="doc-gallery" href="https://i.loli.net/2019/11/18/6zTZv4Ne5ERypJa.png" target="_blank" rel="noopener noreferrer"><img src="https://i.loli.net/2019/11/18/6zTZv4Ne5ERypJa.png" alt=""></a></p><p>å¯ä»¥çœ‹åˆ°ä¸ç®¡æ˜¯æˆåŠŸæˆ–è€…æ˜¯å¤±è´¥çš„çŠ¶æ€ä¸‹<code>finally</code>æ–¹æ³•éƒ½ä¼šæ‰§è¡Œã€‚</p><p>æœ‰æ—¶éœ€è¦åœ¨å‡ ä¸ªå¼‚æ­¥æ“ä½œéƒ½å®Œæˆä¹‹åå†æ‰§è¡Œä¸€äº›æ“ä½œã€‚</p><p>è¿™æ—¶å°±å¯ä»¥ä½¿ç”¨<code>Promise</code>ä¸Šçš„é™æ€<code>all</code>æ–¹æ³•ã€‚</p><p><code>all</code>æ–¹æ³•ä¼ å…¥ä¸€ä¸ªå¯ä»¥è¿­ä»£çš„å¯¹è±¡ï¼Œæ¯”å¦‚æ•°ç»„ã€‚</p><p>PSï¼šè¿™ä¸ªæ•°ç»„é‡Œé¢å¯ä»¥æ˜¯<code>Promise</code>å¯¹è±¡ä¹Ÿå¯ä»¥ä¸æ˜¯<code>Promise</code>å¯¹è±¡ï¼Œå› ä¸º<code>Promise</code>éƒ½ä¼šå¯¹å®ƒè¿›è¡ŒåŒ…è£…ã€‚</p><p>ç„¶åè¿”å›ä¸€ä¸ªæ–°çš„<code>Promise</code>å¯¹è±¡ã€‚</p><p>åªæœ‰è¿­ä»£å¯¹è±¡å†…çš„<code>Promise</code>éƒ½æˆåŠŸï¼ˆ<code>resolve</code>ï¼‰æ‰ä¼šè°ƒç”¨æˆåŠŸçš„æ–¹æ³•ã€‚</p><p>å‚æ•°ä¸ºæŒ‰ç…§è¿­ä»£å¯¹è±¡å†…<code>Promise</code>æˆåŠŸçš„å€¼æ‰€ç»„æˆçš„æ•°ç»„ã€‚</p><p>å¦‚æœè¿­ä»£å¯¹è±¡å†…æŸä¸ª<code>Promise</code>å¤±è´¥äº†è¯ï¼Œå°±ä¼šè°ƒç”¨å¤±è´¥çš„æ–¹æ³•ã€‚</p><p>å‚æ•°ä¸ºæŸä¸ª<code>Promise</code>å¤±è´¥çš„åŸå› ã€‚</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">function</span><span style="--s-dark:#80A665;--s-light:#59873A"> testPromise</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">num</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> time</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  return</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> new</span><span style="--s-dark:#B8A965;--s-light:#998418"> Promise</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#CB7676;--s-light:#AB5959">function</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">resolve</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> reject</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">    setTimeout</span><span style="--s-dark:#666666;--s-light:#999999">(()</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">      if</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">num</span><span style="--s-dark:#666666;--s-light:#999999"> &lt;</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 10</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">        resolve</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">num</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">      }</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> else</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">        reject</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">æ•°å­—å¤§äº10ï¼Œå‘ç”Ÿé”™è¯¯å•¦ï¼</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">      }</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">    },</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> time</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  });</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">var</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> promiseArray</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#666666;--s-light:#999999"> [</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">  testPromise</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#4C9A91;--s-light:#2F798A">5</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 2000</span><span style="--s-dark:#666666;--s-light:#999999">),</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">  testPromise</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#4C9A91;--s-light:#2F798A">4</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 1000</span><span style="--s-dark:#666666;--s-light:#999999">),</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">  testPromise</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#4C9A91;--s-light:#2F798A">9</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 500</span><span style="--s-dark:#666666;--s-light:#999999">),</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">];</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418">Promise</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">all</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">promiseArray</span><span style="--s-dark:#666666;--s-light:#999999">).</span><span style="--s-dark:#80A665;--s-light:#59873A">then</span><span style="--s-dark:#666666;--s-light:#999999">((</span><span style="--s-dark:#BD976A;--s-light:#B07D48">res</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  console</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">log</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">res</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">});</span></span></code></pre><p>è¿è¡Œä»£ç ï¼š</p><p><a data-fancybox="doc-gallery" href="https://i.loli.net/2019/11/18/HfUsWQdknZwOzRy.png" target="_blank" rel="noopener noreferrer"><img src="https://i.loli.net/2019/11/18/HfUsWQdknZwOzRy.png" alt=""></a></p><p>å› ä¸ºè¿™å››ä¸ªæ•°éƒ½æ˜¯å°äº<code>10</code>çš„ï¼Œæ‰€ä»¥éƒ½ä¼šæˆåŠŸã€‚</p><p>è€Œä¸”æˆåŠŸçš„æ‰§è¡Œå‡½æ•°çš„å‚æ•°ä¹Ÿæ˜¯ä¼ å…¥<code>all</code>æ–¹æ³•ä¸­æ¯ä¸ª<code>Promise</code>å¯¹è±¡æˆåŠŸçš„å€¼ç»„æˆçš„é›†åˆã€‚</p><p>å¹¶ä¸”<strong>ä¿æŒç€é¡ºåº</strong>ã€‚</p><p>å¦‚æœæ•°ç»„ä¸­æœ‰ä¸€ä¸ªæ•°å¤§äº<code>10</code>ï¼Œé‚£ä¹ˆæ•´ä¸ª<code>Promise</code>å¯¹è±¡å°±ä¼šå¤±è´¥ã€‚</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">function</span><span style="--s-dark:#80A665;--s-light:#59873A"> testPromise</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">num</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> time</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  return</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> new</span><span style="--s-dark:#B8A965;--s-light:#998418"> Promise</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#CB7676;--s-light:#AB5959">function</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">resolve</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> reject</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">    setTimeout</span><span style="--s-dark:#666666;--s-light:#999999">(()</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">      if</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">num</span><span style="--s-dark:#666666;--s-light:#999999"> &lt;</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 10</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">        resolve</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">num</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">      }</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> else</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">        reject</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">æ•°å­—</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> +</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> num</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> +</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">å¤§äº10ï¼Œå‘ç”Ÿé”™è¯¯å•¦ï¼</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">      }</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">    },</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> time</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  });</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">var</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> promiseArray</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#666666;--s-light:#999999"> [</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">  testPromise</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#4C9A91;--s-light:#2F798A">5</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 2000</span><span style="--s-dark:#666666;--s-light:#999999">),</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  // ä¸€ä¸ªå¤§äº10çš„æ•°</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">  testPromise</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#4C9A91;--s-light:#2F798A">11</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 1000</span><span style="--s-dark:#666666;--s-light:#999999">),</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">  testPromise</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#4C9A91;--s-light:#2F798A">9</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 500</span><span style="--s-dark:#666666;--s-light:#999999">),</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">];</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418">Promise</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">all</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">promiseArray</span><span style="--s-dark:#666666;--s-light:#999999">).</span><span style="--s-dark:#80A665;--s-light:#59873A">then</span><span style="--s-dark:#666666;--s-light:#999999">(</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">res</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">    console</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">log</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">res</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  },</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">err</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">    console</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">log</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">err</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  }</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">);</span></span></code></pre><p>è¿è¡Œä»£ç ï¼š</p><p><a data-fancybox="doc-gallery" href="https://i.loli.net/2019/11/18/Ps9WSHkmUzOBh17.png" target="_blank" rel="noopener noreferrer"><img src="https://i.loli.net/2019/11/18/Ps9WSHkmUzOBh17.png" alt=""></a></p><p>æ•´ä¸ª<code>Promise</code>å¤±è´¥ï¼Œå¹¶ä¸”ä¼ å…¥äº†å¤±è´¥é‚£ä¸ª<code>Promise</code>çš„å¤±è´¥ä¿¡æ¯ã€‚</p><p>æœ‰æ—¶åˆå¹¶ä¸æƒ³å…¨éƒ¨çš„å¼‚æ­¥æ‰§è¡Œå®Œä¹‹åå†æ‰§è¡Œæ“ä½œã€‚</p><p>åªéœ€è¦åœ¨ä¸€ç»„å¼‚æ­¥æ“ä½œä¸­çš„æŸä¸ªå¼‚æ­¥æ‰§è¡Œå®Œæˆä¹‹åå°±å¯ä»¥æ‰§è¡Œä¸€æ®µé€»è¾‘ã€‚</p><p>å°±å¯ä»¥ä½¿ç”¨<code>Promise.race</code>æ¥åŒ…è£…ä¸€ç»„<code>Promise</code>ã€‚</p><p><code>race</code>æ–¹æ³•å’Œ<code>all</code>æ–¹æ³•çš„å‚æ•°ä¸€æ ·ã€‚</p><p>å½“æ•°ç»„ä¸­æŸä¸€ä¸ª<code>Promise</code>æœ€å…ˆæ‰§è¡Œå®Œæˆå°±ä¼šæ‰§è¡Œæ•´ä¸ª<code>Promise</code>çš„å›è°ƒã€‚</p><p>æ•´ä¸ª<code>Promise</code>çš„çŠ¶æ€ç”±æ•°ç»„ä¸­æœ€å…ˆæ‰§è¡Œå®Œæˆ<code>Promise</code>çš„çŠ¶æ€ç›¸ç­‰ã€‚</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">function</span><span style="--s-dark:#80A665;--s-light:#59873A"> testPromise</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">num</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> time</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  return</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> new</span><span style="--s-dark:#B8A965;--s-light:#998418"> Promise</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#CB7676;--s-light:#AB5959">function</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">resolve</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> reject</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">    setTimeout</span><span style="--s-dark:#666666;--s-light:#999999">(()</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">      if</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">num</span><span style="--s-dark:#666666;--s-light:#999999"> &lt;</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 10</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">        resolve</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">num</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">      }</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> else</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">        reject</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">æ•°å­—</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> +</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> num</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> +</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">å¤§äº10ï¼Œå‘ç”Ÿé”™è¯¯å•¦ï¼</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">      }</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">    },</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> time</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  });</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">var</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> promiseArray</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#666666;--s-light:#999999"> [</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">  testPromise</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#4C9A91;--s-light:#2F798A">5</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 2000</span><span style="--s-dark:#666666;--s-light:#999999">),</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">  testPromise</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#4C9A91;--s-light:#2F798A">4</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 1000</span><span style="--s-dark:#666666;--s-light:#999999">),</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">  testPromise</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#4C9A91;--s-light:#2F798A">9</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 500</span><span style="--s-dark:#666666;--s-light:#999999">),</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">];</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418">Promise</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">race</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">promiseArray</span><span style="--s-dark:#666666;--s-light:#999999">).</span><span style="--s-dark:#80A665;--s-light:#59873A">then</span><span style="--s-dark:#666666;--s-light:#999999">((</span><span style="--s-dark:#BD976A;--s-light:#B07D48">res</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  console</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">log</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">res</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">});</span></span></code></pre><p>è¿è¡Œä»£ç ï¼š</p><p><a data-fancybox="doc-gallery" href="https://i.loli.net/2019/11/18/ZxifMpIARVG6lsy.png" target="_blank" rel="noopener noreferrer"><img src="https://i.loli.net/2019/11/18/ZxifMpIARVG6lsy.png" alt=""></a></p><p><code>500</code>ms çš„æœ€å…ˆæ‰§è¡Œï¼Œæ‰€ä»¥æ•´ä¸ª<code>Promise</code>çš„çŠ¶æ€å°±å’Œç¬¬ä¸‰ä¸ª<code>Promise</code>çš„çŠ¶æ€ç›¸ç­‰ã€‚</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">function</span><span style="--s-dark:#80A665;--s-light:#59873A"> testPromise</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">num</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> time</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  return</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> new</span><span style="--s-dark:#B8A965;--s-light:#998418"> Promise</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#CB7676;--s-light:#AB5959">function</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">resolve</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> reject</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">    setTimeout</span><span style="--s-dark:#666666;--s-light:#999999">(()</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">      if</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">num</span><span style="--s-dark:#666666;--s-light:#999999"> &lt;</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 10</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">        resolve</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">num</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">      }</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> else</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">        reject</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">æ•°å­—</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> +</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> num</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> +</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">å¤§äº10ï¼Œå‘ç”Ÿé”™è¯¯å•¦ï¼</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">      }</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">    },</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> time</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  });</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">var</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> promiseArray</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#666666;--s-light:#999999"> [</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">  testPromise</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#4C9A91;--s-light:#2F798A">5</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 2000</span><span style="--s-dark:#666666;--s-light:#999999">),</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">  testPromise</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#4C9A91;--s-light:#2F798A">11</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 400</span><span style="--s-dark:#666666;--s-light:#999999">),</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">  testPromise</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#4C9A91;--s-light:#2F798A">9</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 500</span><span style="--s-dark:#666666;--s-light:#999999">),</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">];</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#B8A965;--s-light:#998418">Promise</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">race</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">promiseArray</span><span style="--s-dark:#666666;--s-light:#999999">).</span><span style="--s-dark:#80A665;--s-light:#59873A">then</span><span style="--s-dark:#666666;--s-light:#999999">(</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">res</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">    console</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">log</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">res</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  },</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">err</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">    console</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">log</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">err</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  }</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">);</span></span></code></pre><p>è¿è¡Œä»£ç ï¼š</p><p><a data-fancybox="doc-gallery" href="https://i.loli.net/2019/11/21/yWoZuVlwzHg3J6X.png" target="_blank" rel="noopener noreferrer"><img src="https://i.loli.net/2019/11/21/yWoZuVlwzHg3J6X.png" alt=""></a></p><p><code>400</code>ms çš„<code>Promise</code>æœ€å…ˆæ‰§è¡Œï¼Œä½†æ˜¯ç”±äºæ•°å­—æ˜¯<code>11</code>å¤§äºäº†<code>10</code>ã€‚</p><p>æ‰€ä»¥è¿›å…¥äº†é”™è¯¯å¤„ç†çš„é€»è¾‘ï¼Œæ‰“å°äº†é”™è¯¯ã€‚</p><p><code>Promise</code>è§£å†³äº†å›è°ƒåœ°ç‹±çš„é—®é¢˜ã€‚</p><p>è¿™é‡Œå¯ä»¥æ‹¿<code>jquery</code>çš„<code>ajax</code>æ–¹æ³•æ¥åšä¾‹å­ã€‚</p><p>ä¹‹å‰è¦å‘èµ·å¼‚æ­¥çš„ç½‘ç»œè¯·æ±‚çš„æ—¶å€™ã€‚</p><p>ç”¨<code>jquery</code>çš„<code>ajax</code>æ–¹æ³•æ˜¯è¿™æ ·å†™çš„ã€‚</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">$</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">ajax</span><span style="--s-dark:#666666;--s-light:#999999">({</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  // çœç•¥ä¸€äº›é…ç½®</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">  success</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> function</span><span style="--s-dark:#666666;--s-light:#999999"> ()</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">    // æˆåŠŸçš„å›è°ƒ</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  },</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">  error</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> function</span><span style="--s-dark:#666666;--s-light:#999999"> ()</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">    // å¤±è´¥çš„å›è°ƒ</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  },</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">});</span></span></code></pre><p>å¦‚æœæˆ‘ä»¬æƒ³åœ¨ç‰¹å®šçš„å¼‚æ­¥å®Œæˆä¹‹åå†æ‰§è¡Œå¦ä¸€ä¸ªå¼‚æ­¥ã€‚</p><p>å†™èµ·æ¥å°±ä¼šæ˜¯è¿™æ ·ï¼š</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">$</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">ajax</span><span style="--s-dark:#666666;--s-light:#999999">({</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  // çœç•¥ä¸€äº›é…ç½®</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">  success</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> function</span><span style="--s-dark:#666666;--s-light:#999999"> ()</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">    // æˆåŠŸçš„å›è°ƒ</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">    $</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">ajax</span><span style="--s-dark:#666666;--s-light:#999999">({</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">      // çœç•¥ä¸€äº›é…ç½®</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">      success</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> function</span><span style="--s-dark:#666666;--s-light:#999999"> ()</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">        // æˆåŠŸçš„å›è°ƒ</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">        $</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">ajax</span><span style="--s-dark:#666666;--s-light:#999999">({</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">          // çœç•¥ä¸€äº›é…ç½®</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">          success</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> function</span><span style="--s-dark:#666666;--s-light:#999999"> ()</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">            // æˆåŠŸçš„å›è°ƒ</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">          },</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">          error</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> function</span><span style="--s-dark:#666666;--s-light:#999999"> ()</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">            // å¤±è´¥çš„å›è°ƒ</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">          },</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">        });</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">      },</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">      error</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> function</span><span style="--s-dark:#666666;--s-light:#999999"> ()</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">        // å¤±è´¥çš„å›è°ƒ</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">      },</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">    });</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  },</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">  error</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> function</span><span style="--s-dark:#666666;--s-light:#999999"> ()</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">    // å¤±è´¥çš„å›è°ƒ</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  },</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">});</span></span></code></pre><p>è¿™æ ·çš„ä»£ç å°±åƒæ˜¯å¥—å¨ƒä¸€æ ·ã€‚</p><p>ä¸€ä¸ªå¥—ç€ä¸€ä¸ªã€‚</p><p>éå¸¸ä¸æ˜“è¯»ã€‚</p><p>å¦‚æœç”¨<code>Promise</code>çš„è¯ ä¸Šè¿°ä»£ç å¯ä»¥æ”¹å†™æˆï¼š</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">// å®šä¹‰ä¸€ä¸ªç½‘ç»œè¯·æ±‚çš„å‡½æ•°ï¼Œè¿”å›ä¸€ä¸ªPromise</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">// çœç•¥ä¸€äº›å‚æ•°</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">function</span><span style="--s-dark:#80A665;--s-light:#59873A"> fetch</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">url</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> data</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  return</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> new</span><span style="--s-dark:#B8A965;--s-light:#998418"> Promise</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#CB7676;--s-light:#AB5959">function</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">resolve</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> reject</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">    $</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">ajax</span><span style="--s-dark:#666666;--s-light:#999999">({</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">      // çœç•¥ä¸€äº›é…ç½®</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">      success</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> function</span><span style="--s-dark:#666666;--s-light:#999999"> ()</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">        // æˆåŠŸå›è°ƒ</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">        // å¯ä»¥ä¼ å…¥æˆåŠŸçš„å€¼</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">        resolve</span><span style="--s-dark:#666666;--s-light:#999999">();</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">      },</span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">      error</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> function</span><span style="--s-dark:#666666;--s-light:#999999"> ()</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">        // å¤±è´¥å›è°ƒ</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">        // å¯ä»¥ä¼ å…¥å¤±è´¥çš„åŸå› </span></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">        reject</span><span style="--s-dark:#666666;--s-light:#999999">();</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">      },</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">    });</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  });</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">fetch</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">url1</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#666666;--s-light:#999999"> {})</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  .</span><span style="--s-dark:#80A665;--s-light:#59873A">then</span><span style="--s-dark:#666666;--s-light:#999999">((</span><span style="--s-dark:#BD976A;--s-light:#B07D48">res</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">    // ç¬¬ä¸€ä¸ªç½‘ç»œè¯·æ±‚æˆåŠŸ</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">    // æ‰§è¡Œç¬¬äºŒä¸ªç½‘ç»œè¯·æ±‚</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">    return</span><span style="--s-dark:#80A665;--s-light:#59873A"> fetch</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">url2</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#666666;--s-light:#999999"> {});</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  })</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  .</span><span style="--s-dark:#80A665;--s-light:#59873A">then</span><span style="--s-dark:#666666;--s-light:#999999">((</span><span style="--s-dark:#BD976A;--s-light:#B07D48">res</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">    // ç¬¬äºŒä¸ªç½‘ç»œè¯·æ±‚æˆåŠŸ</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">    // æ‰§è¡Œç¬¬ä¸‰ä¸ªç½‘ç»œè¯·æ±‚</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">    return</span><span style="--s-dark:#80A665;--s-light:#59873A"> fetch</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">url3</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">,</span><span style="--s-dark:#666666;--s-light:#999999"> {});</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  })</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  .</span><span style="--s-dark:#80A665;--s-light:#59873A">then</span><span style="--s-dark:#666666;--s-light:#999999">((</span><span style="--s-dark:#BD976A;--s-light:#B07D48">res</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">    // ç¬¬ä¸‰ä¸ªç½‘ç»œè¯·æ±‚æˆåŠŸ</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  })</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  .</span><span style="--s-dark:#80A665;--s-light:#59873A">catch</span><span style="--s-dark:#666666;--s-light:#999999">((</span><span style="--s-dark:#BD976A;--s-light:#B07D48">err</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">    // å¤„ç†é”™è¯¯</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  });</span></span></code></pre><p>è¿™é‡Œè¦è¯´æ˜ä¸‹ã€‚</p><p>å¯¹äº<code>then</code>æ–¹æ³•ï¼Œå¦‚æœä½ åœ¨æ–¹æ³•ä½“å†…è¿”å›å€¼çš„è¯ã€‚</p><p>éƒ½ä¼šè¢«åŒ…è£…æˆä¸€ä¸ª<code>Promise</code>ã€‚</p><p>è¿™æ ·å°±å¯ä»¥è¿›è¡Œé“¾å¼è°ƒç”¨äº†ã€‚</p></div><!--]--></div><div flex="~ wrap" text="[var(--mygo-c-text-2)]" mt-8="" gap-4="" justify-center=""><!--[--><div>#JavaScript</div><div>#Promise</div><!--]--></div><!--]--></div></div><div class="mujika-card mujika-card--hover mujika-card--border" w-full="" overflow-auto="" data-v-7ac4adc5=""><div class="p-4 lg:p-8" data-v-7ac4adc5=""><!--[--><div flex="~ wrap" gap-4=""><a href="/3c7aa51d7541" class="" truncate="" title="Springä¸­Aopçš„é…ç½®æ–¹å¼"><i class="i-mi:chevron-left" mr-1=""></i><span>Springä¸­Aopçš„é…ç½®æ–¹å¼</span></a><a href="/ec38aaef86b5" class="" ml-auto="" truncate="" title="äºŒåˆ†æŸ¥æ‰¾æ³•çš„ä¸€äº›ç†è§£"><span>äºŒåˆ†æŸ¥æ‰¾æ³•çš„ä¸€äº›ç†è§£</span><i class="i-mi:chevron-right" ml-1=""></i></a></div><!--]--></div></div><!--[--><div class="mujika-card mujika-card--hover mujika-card--border" w-full="" overflow-auto="" data-v-557c65bc="" data-v-7ac4adc5=""><div class="p-4 lg:p-8" data-v-7ac4adc5=""><!--[--><div flex="" gap-4="" items-start="" data-v-557c65bc=""><div flex="~ shrink-0" bg="[var(--mygo-c-bg-alt)]" rounded-6px="" w-60px="" aspect-ratio-square="" items-center="" justify-center="" data-v-557c65bc=""><i text-40px="" text="[#999]" class="i-fa6-regular:user" data-v-557c65bc=""></i></div><div flex="~ col grow" gap-2="" lg:gap-4="" data-v-557c65bc=""><textarea disabled="" placeholder="ä¸‡æ°´åƒå±±æ€»æ˜¯æƒ…ï¼Œç•™ä¸‹è¯„è®ºè¡Œä¸è¡Œ" class="mujika-git-talk-textarea" un-disabled:cursor-not-allowed="" p-2="" outline-0="" h-4em="" lg:p-4="" lg:h-8em="" data-v-557c65bc=""></textarea><div flex="" items-start="" data-v-557c65bc=""><a target="_blank" href="https://guides.github.com/features/mastering-markdown/" data-v-557c65bc="">æ”¯æŒ Markdown è¯­æ³•</a><div ml-auto="" data-v-557c65bc=""></div><!----><button class="mujika-button" data-v-557c65bc="" data-v-15330f5f=""><!--[--><!--]--><!--[-->ç‚¹å‡»ç™»å½•<!--]--></button></div></div></div><!--]--></div></div><div class="mujika-card mujika-card--hover mujika-card--border" w-full="" overflow-auto="" data-v-557c65bc="" data-v-7ac4adc5=""><div class="p-4 lg:p-8" data-v-7ac4adc5=""><!--[--><div flex="" items-center="" justify-center="" data-v-557c65bc="">å“¦å‘¢è¯¥ï¼Œå¦‚æœæ²¡æœ‰è¯„è®ºçš„è¯ï¼Œç“¦è¾¾è¥¿...</div><!----><!--]--></div></div><!--]--></div><aside class="mujika-aside" w="280px" flex="~ col shrink-0" top-2="" sticky="" max-h="[calc(100vh-var(--spacing)*4)]" un-hidden="" lg:block=""><div class="mujika-card mujika-card--hover mujika-card--border" w-full="" overflow-auto="" flex="~ col" gap-4="" data-v-7ac4adc5=""><!--[--><div p="4 b-0" flex-shrink-0="">æ–‡ç« ç›®å½•</div><div p="4 t-0" flex-grow="" min-h-0="" overflow-y-auto=""><!----></div><!--]--></div></aside><!--teleport start--><!--teleport end--></div></main><footer class="mujika-footer" px-4="" py-6="" bg="[var(--mygo-c-bg)]" flex="~ col shrink-0" gap-2="" items-center="" data-v-689781c6=""><div flex="" items-center="" data-v-689781c6=""><span data-v-689781c6="">ç”±&nbsp;</span><i class="i-logos:vue" data-v-689781c6=""></i><span data-v-689781c6="">&nbsp;+&nbsp;</span><i class="i-logos:vitejs" data-v-689781c6=""></i><span data-v-689781c6="">&nbsp;é©±åŠ¨</span></div><div text-center="" data-v-689781c6=""><a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" data-v-689781c6="">CC BY-NC-SA 4.0 </a>2021 - PRESENT Â© Dedicatus545</div><div text="[var(--mygo-c-text-2)]" text-center="" data-v-689781c6="">å¦‚æœæˆ‘å’Œç‹—ä¸€æ ·æœ‰å°¾å·´çš„è¯ï¼Œä¸€å®šä¼šè—ä¸ä½è¿™ä»½å–œæ‚¦ï¼Œè€Œå°¾å·´ä¸€ç›´æ‘‡ä¸ªä¸åœå§ã€‚ - ã€Šç§’é€Ÿäº”å˜ç±³ã€‹</div></footer></div></div></body></html>