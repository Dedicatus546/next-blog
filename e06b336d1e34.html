<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><link rel="icon" type="image/svg+xml" href="/logo.svg"><meta name="viewport" content="width=device-width,initial-scale=1"><title>HTTP知识笔记</title><script type="importmap">{"imports":{"vue":"https://esm.sh/vue","vue-router":"https://esm.sh/vue-router","pinia":"https://esm.sh/pinia","@vueuse/core":"https://esm.sh/@vueuse/core","@vueuse/components":"https://esm.sh/@vueuse/components","@vueuse/router":"https://esm.sh/@vueuse/router","date-fns":"https://esm.sh/date-fns","nprogress":"https://esm.sh/nprogress","octokit":"https://esm.sh/octokit","pinia-plugin-persistedstate":"https://esm.sh/pinia-plugin-persistedstate","vue-router-better-scroller":"https://esm.sh/vue-router-better-scroller"}}</script><script type="module" async="" crossorigin="" src="/assets/app-CGnJzz9B.js"></script><link rel="stylesheet" crossorigin="" href="/assets/app-tWEfGeAP.css"><link rel="modulepreload" crossorigin="" href="/assets/HTTP知识笔记-oQHgs4Jr.js"><meta property="og:title" content="HTTP知识笔记"><meta name="twitter:title" content="HTTP知识笔记"></head><body><div id="app" data-server-rendered="true"><div class="mujika" min-h="100vh" flex="~ col" bg="[--mygo-c-bg-alt]"><header class="mujika-header" flex="~ shrink-0" px-4="" h="70px" bg="[var(--mygo-c-bg)]" items-center="" justify-between="" data-v-c1947e25=""><a href="/" class="" flex="" gap-4="" items-center="" data-v-c1947e25=""><img w="40px" aspect-ratio-square="" src="/logo.svg" alt="恋の歌的logo" data-v-c1947e25=""></a><div data-v-c1947e25=""><div p-1="" flex="" gap-1="" rounded="6px" bg="[var(--mygo-c-bg-alt)]" data-v-c1947e25=""><!--[--><div leading="[1]" px-2="" py-1="" cursor-pointer="" rounded="6px" class="bg-[var(--mygo-c-bg)]" title="自动" data-v-c1947e25=""><!--[-->Auto<!--]--></div><div leading="[1]" px-2="" py-1="" cursor-pointer="" rounded="6px" class="" title="日间" data-v-c1947e25=""><!--[--><i class="i-ri:sun-line" data-v-c1947e25=""></i><!--]--></div><div leading="[1]" px-2="" py-1="" cursor-pointer="" rounded="6px" class="" title="夜间" data-v-c1947e25=""><!--[--><i class="i-ri:moon-line" data-v-c1947e25=""></i><!--]--></div><!--]--></div></div></header><main class="mujika-home" flex="grow" mx="auto" min-h="0" p-2="" w-full="" un-2xl:w="[calc(96rem-var(--spacing)*2)]"><div flex="" gap-2="" items-start=""><div flex="~ col grow" gap-2="" min-w-0=""><div class="mujika-card mujika-card--hover mujika-card--border" w-full="" overflow-auto="" data-v-7ac4adc5=""><div class="p-4 lg:p-8" data-v-7ac4adc5=""><!--[--><div flex="~ col" mb-4="" gap-4=""><h1 break-all="" text="34px center">HTTP知识笔记</h1></div><div flex="~ col" gap-3="" text="[var(--mygo-c-text-2)]"><div flex="~ wrap" gap-3="" justify-center=""><!----><div flex="" gap-1="" items-center=""><i class="i-fa6-regular:calendar"></i><span un-hidden="" lg:inline="">发表于</span><span pl-1="">2021-07-25 22:08</span></div><div flex="" gap-1="" items-center=""><i class="i-fa6-regular:calendar-check"></i><span un-hidden="" lg:inline="">更新于</span><span pl-1="">2023-02-13 18:28</span></div><div flex="" gap-1="" items-center=""><i class="i-fa6-regular:folder"></i><span un-hidden="" lg:inline="">分类于</span><!--[--><a pl-1="" href="/category/笔记">笔记</a><!--]--></div></div><div flex="~ wrap" gap-3="" justify-center=""><div flex="" gap-1="" items-center=""><i class="i-fa6-regular:file-word"></i><span un-hidden="" lg:inline="">总字数</span><span pl-1="">1.1K</span></div><div flex="" gap-1="" items-center=""><i class="i-fa6-regular:clock"></i><span un-hidden="" lg:inline="">阅读时长 ≈</span><span pl-1="">4 分钟</span></div></div></div><div class="mujika-doc-content"><!--[--><div class="kan-doc"><p><code>HTTP</code>知识笔记</p><p><code>HTTP</code>版本版本变迁：</p><ul><li><code>HTTP/0.9</code>，<code>1991</code>年，只能使用<code>GET</code>，请求不涉及数据包传输， 没有作为正式的标准；</li><li><code>HTTP/1.0</code>，<code>1996</code>年，传输内容格式不限制，增加<code>PUT</code>、<code>PATCH</code>、<code>HEAD</code>、 <code>OPTIONS</code>、<code>DELETE</code>命令，正式作为标准；</li><li><code>HTTP/1.1</code> <code>1997</code>年，持久连接（长连接）、节约带宽、<code>HOST</code>域、管道机制、分块传输编码，<code>2015</code>年前使用最广泛；</li><li><code>HTTP/2</code>，<code>2015</code>年，多路复用、服务器推送、头信息压缩、二进制协议等，逐渐覆盖市场。</li></ul><p><img src="https://z3.ax1x.com/2021/07/25/W2xTYQ.png" alt=""></p><p><code>HTTP</code>位于计算机网络模型的应用层，是基于<code>TCP</code>的一个应用层协议。</p><p>虽然<code>TCP</code>是面向连接的，但是<code>HTTP</code>却是无连接的。</p><p>在<code>Akamai</code>公司的演示页面上可以看到<code>HTTP1.1</code>和<code>HTTP2</code>的图片加载速度区别。</p><blockquote><p><a href="https://http2.akamai.com/demo" target="_blank" rel="noopener">HTTP/2 is the future of the Web, and it is here!</a></p></blockquote><p><img src="https://z3.ax1x.com/2021/07/25/W2xasx.png" alt=""></p><h1 id="http-1-0" tabindex="-1"><code>HTTP/1.0</code> <a class="header-anchor" href="#http-1-0">🔗</a></h1><ul><li>使用<code>If-Modified-Since</code>，<code>Expires</code>头部来控制缓存；</li><li>不支持部分传输，某些时候我们只需传输文件整个的一段而已，传整个过来浪费了带宽，也容易造成长时间的占用一个连接；</li><li>每次传输数据都需要简历新的一个连接，当数据传输完成，连接就会关闭，无法复用已经传输完成的连接；</li><li>一个服务器绑定唯一一个<code>IP</code>地址；</li><li>队头阻塞，即下一个请求必须在上一个请求完成才能进行传输，否则处于挂起状态。</li></ul><h1 id="http-1-1" tabindex="-1"><code>HTTP/1.1</code> <a class="header-anchor" href="#http-1-1">🔗</a></h1><ul><li>使用更多的头部来增强缓存控制策略，<code>Entity tag</code>，<code>If-Unmodified-Since</code>, <code>If-Match</code>, <code>If-None-Match</code>；</li><li>支持部分返回，新增<code>206</code>（<code>Partial Content</code>）返回码来表示这是一个部分请求，通过<code>Range</code>头部来指定文件的范围；</li><li>由于虚拟主机的发展，现在一台服务器可以存在多个虚拟主机，它们共享一个<code>IP</code>地址，所以请求和响应头域必须附带<code>Host</code>头域（指定主机名），不然直接返回<code>400</code>错误；</li><li>支持长连接，现在可以复用同一条<code>TCP</code>连接，无需重新建立<code>TCP</code>连接来进行<code>HTTP</code>请求，在头部增加<code>Connection： keep-alive</code>默认开启该特性；</li><li>支持请求流水线，由于支持长连接，现在可以复用同一条<code>TCP</code>连接，流水线，通俗点讲，就是可以在等待上一个资源还未返回结果的时候，进行新的资源请求，不过，资源的接收必须按照发送的顺利；</li><li>细化错误的响应码，如<code>409</code>（<code>Conflict</code>）表示请求的资源与资源的当前状态发生冲突；<code>410</code>（<code>Gone</code>）表示服务器上的某个资源被永久性的删除。</li></ul><h1 id="http-2" tabindex="-1"><code>HTTP/2</code> <a class="header-anchor" href="#http-2">🔗</a></h1><p>相关<code>RFC</code>为<code>RFC7540</code>。</p><blockquote><p><a href="https://www.rfc-editor.org/rfc/inline-errata/rfc7540.html" target="_blank" rel="noopener">Hypertext Transfer Protocol Version 2 (HTTP/2)</a></p></blockquote><ul><li>二进制分帧，<code>HTTP/2</code>通过在应用层和传输层之间增加一个二进制分帧层，使用二进制而非<code>HTTP/1.1</code>的文本格式来传输数据，将请求报文或者响应报文分割成帧来传送； <img src="https://z3.ax1x.com/2021/07/27/WIlwNt.png" alt=""></li><li>流标识，存在于连接中的一个虚拟通道，流可以承载双向消息，每个流都有一个唯一的整数<code>ID</code>，这样可以和其他流区分开；</li><li>多路复用，<code>HTTP/1.1</code>虽然可以复用<code>TCP</code>连接，但是必须顺序的响应请求结果，如果想要并发多个请求，则必须使用多个<code>TCP</code>连接，浏览器对一个域名的<code>TCP</code>连接数有限制，一般为<code>6 - 8</code>个，超出限制的连接就会被挂起等待，等待前面的连接完成后才能进行发送，<code>HTTP/2</code>由于使用了二进制分帧和流标识，使得全部的数据都可以在一条<code>TCP</code>连接上完成，减少了创建多条<code>TCP</code>连接带来的延时以及减少内存消耗； <img src="https://z3.ax1x.com/2021/07/26/WhlgMj.png" alt=""></li><li>服务器推送，在发送<code>HTML</code>页面时，服务器可以主动的<code>HTML</code>附带的<code>CSS</code>和<code>JS</code>一并推送给用户，减少请求次数； <img src="https://z3.ax1x.com/2021/07/26/WhlRLn.png" alt=""></li><li>头部压缩，随着网络的发展，<code>HTTP</code>的请求大小越来越大，每次需要发送的冗余请求头非常多，HTTP/2通过在客服端和服务端各自维护一个“首部表”（类似一个<code>Map</code>）来减少重复数据的传送，具体算法为<code>HPACK</code>，具体可以查看相关的<code>RFC</code>文档：<a href="https://httpwg.org/specs/rfc7541.html" target="_blank" rel="noopener">HPACK: Header Compression for HTTP/2</a>，这里涉及到哈夫曼编码，通过编码来减少请求头部过大带来的网络消耗。 <img src="https://z3.ax1x.com/2021/07/27/WIexOI.png" alt=""></li></ul><p>很多大型应用已经开始转到<code>HTTP/2</code>了，比如：</p><ul><li>百度首页 <img src="https://z3.ax1x.com/2021/07/27/WIKHud.png" alt=""></li><li>淘宝首页 <img src="https://z3.ax1x.com/2021/07/27/WIKr3F.png" alt=""></li></ul></div><!--]--></div><div flex="~ wrap" text="[var(--mygo-c-text-2)]" mt-8="" gap-4="" justify-center=""><!--[--><div>#HTTP</div><!--]--></div><!--]--></div></div><div class="mujika-card mujika-card--hover mujika-card--border" w-full="" overflow-auto="" data-v-7ac4adc5=""><div class="p-4 lg:p-8" data-v-7ac4adc5=""><!--[--><div flex=""><a href="/24b0dddac735" class=""><i class="i-mi:chevron-left" mr-1=""></i><span>HTTP强缓存和协商缓存</span></a><a href="/3800ed123cd0" class="" ml-auto=""><span>JavaScript中的垃圾回收</span><i class="i-mi:chevron-right" ml-1=""></i></a></div><!--]--></div></div><!--[--><div class="mujika-card mujika-card--hover mujika-card--border" w-full="" overflow-auto="" data-v-93b0ae89="" data-v-7ac4adc5=""><div class="p-4 lg:p-8" data-v-7ac4adc5=""><!--[--><div flex="" gap-4="" items-start="" data-v-93b0ae89=""><div flex="~ shrink-0" bg="[var(--mygo-c-bg-alt)]" rounded-6px="" w-60px="" aspect-ratio-square="" items-center="" justify-center="" data-v-93b0ae89=""><i text-40px="" text="[#999]" class="i-fa6-regular:user" data-v-93b0ae89=""></i></div><div flex="~ col grow" gap-4="" data-v-93b0ae89=""><textarea disabled="" placeholder="万水千山总是情，留下评论行不行" class="mujika-git-talk-textarea" un-disabled:cursor-not-allowed="" p-2="" outline-0="" lg:p-4="" data-v-93b0ae89=""></textarea><div flex="" items-start="" justify-between="" data-v-93b0ae89=""><a target="_blank" href="https://guides.github.com/features/mastering-markdown/" data-v-93b0ae89="">支持 Markdown 语法 </a><button class="mujika-git-talk-button" cursor-pointer="" data-v-93b0ae89="">点击登录</button></div></div></div><!--]--></div></div><!----><!--]--></div><aside class="mujika-aside" w="280px" flex="~ col shrink-0" top-2="" sticky="" max-h="[calc(100vh-var(--spacing)*4)]" un-hidden="" lg:block=""><div class="mujika-card mujika-card--hover mujika-card--border" w-full="" overflow-auto="" flex="~ col" gap-4="" data-v-7ac4adc5=""><!--[--><div p="4 b-0" flex-shrink-0="">文章目录</div><div p="4 t-0" flex-grow="" min-h-0="" overflow-y-auto=""><!----></div><!--]--></div></aside><!--teleport start--><!--teleport end--></div></main><footer class="mujika-footer" px-4="" py-6="" bg="[var(--mygo-c-bg)]" flex="~ col shrink-0" gap-2="" items-center="" data-v-d1d7a153=""><div flex="" items-center="" data-v-d1d7a153=""><span data-v-d1d7a153="">Power by&nbsp;</span><i class="i-logos:vue" data-v-d1d7a153=""></i><span data-v-d1d7a153="">&nbsp;+&nbsp;</span><i class="i-logos:vitejs" data-v-d1d7a153=""></i></div><div text-center="" data-v-d1d7a153=""><a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" data-v-d1d7a153="">CC BY-NC-SA 4.0 </a>2021 - PRESENT © Dedicatus545</div><div text="[var(--mygo-c-text-2)]" text-center="" data-v-d1d7a153="">如果我和狗一样有尾巴的话，一定会藏不住这份喜悦，而尾巴一直摇个不停吧。</div></footer></div></div></body></html>