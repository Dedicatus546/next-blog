<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><link rel="icon" type="image/svg+xml" href="/logo.svg"><meta name="viewport" content="width=device-width,initial-scale=1"><title>æ‹ã®æ­Œ</title><script type="importmap">{"imports":{"vue":"https://esm.sh/vue","vue-router":"https://esm.sh/vue-router","pinia":"https://esm.sh/pinia","@vueuse/core":"https://esm.sh/@vueuse/core","@vueuse/components":"https://esm.sh/@vueuse/components","@vueuse/router":"https://esm.sh/@vueuse/router","date-fns":"https://esm.sh/date-fns","nprogress":"https://esm.sh/nprogress","octokit":"https://esm.sh/octokit","pinia-plugin-persistedstate":"https://esm.sh/pinia-plugin-persistedstate","vue-router-better-scroller":"https://esm.sh/vue-router-better-scroller"}}</script><script type="module" async="" crossorigin="" src="/assets/app-JKHGxrHx.js"></script><link rel="stylesheet" crossorigin="" href="/assets/app-BB3Y8Eze.css"><link rel="modulepreload" crossorigin="" href="/assets/TypeScript-5-7ï¼ˆè¯‘ï¼‰-CQtX9Pej.js"></head><body><div id="app" data-server-rendered="true"><div class="mujika" min-h="100vh" flex="~ col" bg="[--mygo-c-bg-alt]"><header class="mujika-header" flex="~ shrink-0" px-4="" h="70px" bg="[var(--mygo-c-bg)]" items-center="" justify-between="" data-v-50c24b4d=""><a href="/" class="" flex="" gap-4="" items-center="" data-v-50c24b4d=""><img w="40px" aspect-ratio-square="" src="/logo.svg" alt="æ‹ã®æ­Œçš„logo" data-v-50c24b4d=""></a><div flex="" gap-2="" items-center="" lg:gap-4="" data-v-50c24b4d=""><div p-1="" flex="" gap-1="" rounded="6px" bg="[var(--mygo-c-bg-alt)]" data-v-50c24b4d=""><!--[--><div leading="[1]" px-2="" py-1="" cursor-pointer="" rounded="6px" class="bg-[var(--mygo-c-bg)]" title="è‡ªåŠ¨" data-v-50c24b4d=""><!--[-->Auto<!--]--></div><div leading="[1]" px-2="" py-1="" cursor-pointer="" rounded="6px" class="" title="æ—¥é—´" data-v-50c24b4d=""><!--[--><i class="i-ri:sun-line" data-v-50c24b4d=""></i><!--]--></div><div leading="[1]" px-2="" py-1="" cursor-pointer="" rounded="6px" class="" title="å¤œé—´" data-v-50c24b4d=""><!--[--><i class="i-ri:moon-line" data-v-50c24b4d=""></i><!--]--></div><!--]--></div><a href="/archive" class="" data-v-50c24b4d=""><i class="i-mi:archive" data-v-50c24b4d=""></i> å½’æ¡£</a></div></header><main class="mujika-home" flex="grow" mx="auto" min-h="0" p-2="" w-full="" un-2xl:w="[calc(96rem-var(--spacing)*2)]"><div flex="" gap-2="" items-start=""><div flex="~ col grow" gap-2="" min-w-0=""><div class="mujika-card mujika-card--hover mujika-card--border" w-full="" overflow-auto="" data-v-7ac4adc5=""><div class="p-4 lg:p-8" data-v-7ac4adc5=""><!--[--><div flex="~ col" mb-4="" gap-4=""><h1 break-all="" text="34px center">TypeScript 5.7ï¼ˆè¯‘ï¼‰</h1></div><div flex="~ col" gap-3="" text="[var(--mygo-c-text-2)]"><div flex="~ wrap" gap-3="" justify-center=""><!----><div flex="" gap-1="" items-center=""><i class="i-fa6-regular:calendar"></i><span un-hidden="" lg:inline="">å‘è¡¨äº</span><span pl-1="">2024-11-23 15:36</span></div><div flex="" gap-1="" items-center=""><i class="i-fa6-regular:calendar-check"></i><span un-hidden="" lg:inline="">æ›´æ–°äº</span><span pl-1="">2024-11-28 15:07</span></div><div flex="" gap-1="" items-center=""><i class="i-fa6-regular:folder"></i><span un-hidden="" lg:inline="">åˆ†ç±»äº</span><!--[--><a pl-1="" href="/category/ç¼–ç¨‹">ç¼–ç¨‹</a><!--]--></div></div><div flex="~ wrap" gap-3="" justify-center=""><div flex="" gap-1="" items-center=""><i class="i-fa6-regular:file-word"></i><span un-hidden="" lg:inline="">æ€»å­—æ•°</span><span pl-1="">3.4K</span></div><div flex="" gap-1="" items-center=""><i class="i-fa6-regular:clock"></i><span un-hidden="" lg:inline="">é˜…è¯»æ—¶é•¿ â‰ˆ</span><span pl-1="">13 åˆ†é’Ÿ</span></div></div></div><div class="mujika-doc-content"><!--[--><div class="kan-doc"><h1 id="å‰è¨€" tabindex="-1">å‰è¨€ <a class="header-anchor" href="#å‰è¨€">ğŸ”—</a></h1><p>åŸæ–‡åœ°å€ï¼š<a href="https://devblogs.microsoft.com/typescript/announcing-typescript-5-7/" target="_blank" rel="noopener">Announcing TypeScript 5.7</a></p><h1 id="æ­£æ–‡" tabindex="-1">æ­£æ–‡ <a class="header-anchor" href="#æ­£æ–‡">ğŸ”—</a></h1><h2 id="æ£€æŸ¥ä»æœªåˆå§‹åŒ–çš„å˜é‡" tabindex="-1">æ£€æŸ¥ä»æœªåˆå§‹åŒ–çš„å˜é‡ <a class="header-anchor" href="#æ£€æŸ¥ä»æœªåˆå§‹åŒ–çš„å˜é‡">ğŸ”—</a></h2><p>å¾ˆé•¿ä¸€æ®µæ—¶é—´ï¼Œå½“ä¸€ä¸ªå˜é‡åœ¨æ‰€æœ‰å…ˆå‰çš„åˆ†æ”¯ä¸­æœªè¢«åˆå§‹åŒ–æ—¶ï¼Œ TypeScript å·²ç»èƒ½å¤Ÿæ•è·è¿™ä¸ªé—®é¢˜ã€‚</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">let</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> result</span><span style="--s-dark:#666666;--s-light:#999999">: </span><span style="--s-dark:#5DA994;--s-light:#2E8F82">number</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">if</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#80A665;--s-light:#59873A">someCondition</span><span style="--s-dark:#666666;--s-light:#999999">())</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  result</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#80A665;--s-light:#59873A"> doSomeWork</span><span style="--s-dark:#666666;--s-light:#999999">();</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> else</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">  let</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> temporaryWork</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#80A665;--s-light:#59873A"> doSomeWork</span><span style="--s-dark:#666666;--s-light:#999999">();</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">  temporaryWork</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> *=</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 2</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  // å¿˜è®°ç»™ result èµ‹å€¼</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">console</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">log</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">result</span><span style="--s-dark:#666666;--s-light:#999999">);</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0"> // é”™è¯¯ï¼Œå˜é‡ result åœ¨èµ‹å€¼å‰ä½¿ç”¨</span></span></code></pre><p>ä¸å¹¸çš„æ˜¯ï¼ŒæŸäº›åœ°æ–¹è¿™ç§åˆ†æå¹¶ä¸èµ·ä½œç”¨ã€‚æ¯”å¦‚ï¼Œå¦‚æœåœ¨å…¶ä»–çš„å‡½æ•°ä¸­è®¿é—®è¿™ä¸ªå˜é‡ï¼Œç±»å‹ç³»ç»Ÿå°±æ— æ³•çŸ¥é“è¿™ä¸ªå‡½æ•°ä½•æ—¶ä¼šè¢«è°ƒç”¨ï¼Œåè€Œä¼šä»¥â€œä¹è§‚â€çš„è§‚ç‚¹è®¤ä¸ºå˜é‡ä¼šè¢«åˆå§‹åŒ–ã€‚</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">function</span><span style="--s-dark:#80A665;--s-light:#59873A"> foo</span><span style="--s-dark:#666666;--s-light:#999999">()</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">  let</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> result</span><span style="--s-dark:#666666;--s-light:#999999">: </span><span style="--s-dark:#5DA994;--s-light:#2E8F82">number</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  if</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#80A665;--s-light:#59873A">someCondition</span><span style="--s-dark:#666666;--s-light:#999999">())</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">    result</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#80A665;--s-light:#59873A"> doSomeWork</span><span style="--s-dark:#666666;--s-light:#999999">();</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  }</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> else</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">    let</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> temporaryWork</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#80A665;--s-light:#59873A"> doSomeWork</span><span style="--s-dark:#666666;--s-light:#999999">();</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">    temporaryWork</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> *=</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 2</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">    // å¿˜è®°ç»™ result èµ‹å€¼</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#80A665;--s-light:#59873A">  printResult</span><span style="--s-dark:#666666;--s-light:#999999">();</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">  function</span><span style="--s-dark:#80A665;--s-light:#59873A"> printResult</span><span style="--s-dark:#666666;--s-light:#999999">()</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">    console</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">log</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">result</span><span style="--s-dark:#666666;--s-light:#999999">);</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0"> // è¿™é‡Œä¸ä¼šæŠ¥é”™</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  }</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span></code></pre><p>è™½ç„¶ TypeScript 5.7 ä»ç„¶å¯¹å¯èƒ½è¢«åˆå§‹åŒ–çš„å˜é‡ä¿æŒå®½å®¹ï¼Œä½†æ˜¯ç±»å‹ç³»ç»Ÿå·²ç»èƒ½å¤Ÿå¯¹é‚£äº›å®Œå…¨æœªè¢«åˆå§‹åŒ–çš„å˜é‡è¿›è¡ŒæŠ¥é”™äº†ã€‚</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">function</span><span style="--s-dark:#80A665;--s-light:#59873A"> foo</span><span style="--s-dark:#666666;--s-light:#999999">()</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">  let</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> result</span><span style="--s-dark:#666666;--s-light:#999999">: </span><span style="--s-dark:#5DA994;--s-light:#2E8F82">number</span></span>
<span class="line"><span style="--s-dark:#DBD7CAEE;--s-light:#393A34">  </span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  // åšä¸€äº›æ“ä½œï¼Œä½†æ˜¯å¿˜è®°ç»™ result èµ‹å€¼</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">  function</span><span style="--s-dark:#80A665;--s-light:#59873A"> printResult</span><span style="--s-dark:#666666;--s-light:#999999">()</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#BD976A;--s-light:#B07D48">    console</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">log</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#BD976A;--s-light:#B07D48">result</span><span style="--s-dark:#666666;--s-light:#999999">);</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0"> // é”™è¯¯ï¼Œå˜é‡ result åœ¨èµ‹å€¼å‰ä½¿ç”¨</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  }</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span></code></pre><p>æ„Ÿè°¢ Github ç”¨æˆ· <a href="https://github.com/Zzzen" target="_blank" rel="noopener">Zzzen</a> è´¡çŒ®äº†è¿™ä¸ª <a href="https://github.com/microsoft/TypeScript/pull/55887" target="_blank" rel="noopener">PR</a> ã€‚</p><h2 id="é‡å†™ç›¸å¯¹è·¯å¾„" tabindex="-1">é‡å†™ç›¸å¯¹è·¯å¾„ <a class="header-anchor" href="#é‡å†™ç›¸å¯¹è·¯å¾„">ğŸ”—</a></h2><p>ä¸€äº›å·¥å…·å’Œè¿è¡Œæ—¶å…è®¸ç”¨æˆ·â€œå°±åœ°â€æ‰§è¡Œ TypeScript ä»£ç ï¼Œè¿™æ„å‘³ç€æ— éœ€æ„å»ºæ­¥éª¤æ¥ç”Ÿæˆ JavaScript ä»£ç ã€‚æ¯”å¦‚ï¼Œ ts-nodeï¼Œtsxï¼ŒDeno ä»¥åŠ Bun éƒ½æ”¯æŒç›´æ¥è¿è¡Œ <code>.ts</code> æ–‡ä»¶ã€‚æœ€è¿‘ï¼Œ Node å¼€å§‹ç ”ç©¶é€šè¿‡ <code>--experimental-strip-types</code> ï¼ˆå¾ˆå¿«ä¼šå–æ¶ˆå®éªŒæ ‡è®°ï¼‰å’Œ <code>--experimental-transform-types</code> æ ‡è®°æ¥æä¾›è¯¥ç‰¹æ€§æ”¯æŒã€‚è¿™æ˜¯æå…¶æ–¹ä¾¿çš„ï¼Œå› ä¸ºè¿™å…è®¸æˆ‘ä»¬æ— éœ€å…³å¿ƒå»é‡æ–°è¿è¡Œä¸€ä¸ªæ„å»ºä»»åŠ¡ï¼Œä»è€Œè¿›è¡Œæ›´å¿«åœ°è¿­ä»£ã€‚</p><p>ä¸è¿‡ï¼Œä½¿ç”¨è¿™äº›æ¨¡å¼æ—¶éœ€è¦çŸ¥é“ä¸€äº›å¤æ‚æ€§ã€‚ä¸ºäº†æœ€å¤§é™åº¦åœ°å…¼å®¹æ‰€æœ‰çš„è¿™äº›å·¥å…·ï¼Œä¸€ä¸ªè¢«å°±åœ°å¯¼å…¥çš„ TypeScript æ–‡ä»¶<strong>å¿…é¡»</strong>åœ¨å¤„äºè¿è¡Œæ—¶æ—¶å¯¼å…¥åˆé€‚çš„ TypeScript æ‰©å±•åã€‚æ¯”å¦‚ï¼Œä¸ºäº†å¯¼å…¥ä¸€ä¸ªåä¸º <code>foo.ts</code> çš„æ–‡ä»¶ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨ Node çš„å®éªŒæ€§æ”¯æŒå¼€å¯çš„æƒ…å†µä¸‹ç¼–å†™å¦‚ä¸‹çš„ä»£ç ï¼š</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">// main.ts</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">import</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> *</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> as</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> foo</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> from</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">./foo.ts</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">;</span><span style="--s-dark:#758575DD;--s-light:#A0ADA0"> // &lt;- è¿™é‡Œéœ€è¦å¯¼å…¥ ./foo.ts è€Œä¸æ˜¯ ./foo.js</span></span></code></pre><p>é€šå¸¸æƒ…å†µä¸‹ï¼Œå¦‚æœæˆ‘ä»¬è¿™æ ·åšçš„è¯ TypeScript ä¼šæŠ¥å‘Šä¸€ä¸ªé”™è¯¯ï¼Œå› ä¸º TypeScript æœŸå¾…æˆ‘ä»¬å¯¼å…¥çš„æ˜¯è¾“å‡ºæ–‡ä»¶ã€‚ç”±äºä¸€äº›å·¥å…·ç¡®å®å…è®¸ <code>.ts</code> å¯¼å…¥ï¼Œ TypeScript åœ¨è¿‡å»çš„ä¸€æ®µæ—¶é—´å†…å·²ç»æ”¯æŒé€šè¿‡ä¸€ä¸ªåä¸º <code>--allowImportingTsExtensions</code> çš„é€‰é¡¹æ¥æ”¯æŒè¿™ç§å¯¼å…¥é£æ ¼äº†ã€‚è¿™çœ‹èµ·æ¥å¾ˆå¥½ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬éœ€è¦çš„æ˜¯ç”Ÿæˆçš„ <code>.js</code> æ–‡ä»¶è€Œä¸æ˜¯ <code>.ts</code> æ–‡ä»¶ä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µï¼Ÿè¿™å¯¹éœ€è¦èƒ½å¤Ÿåªåˆ†å‘ <code>.js</code> æ–‡ä»¶çš„åº“ä½œè€…æ¥è¯´æ˜¯ä¸€ä¸ªéœ€æ±‚ï¼Œä½†ç›®å‰ä¸ºæ­¢ï¼Œ TypeScript å·²ç»é¿å…é‡å†™ä»»ä½•è·¯å¾„ã€‚</p><p>ä¸ºäº†æ”¯æŒè¿™ä¸ªè®¾æƒ³ï¼Œæˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªæ–°çš„ç¼–è¯‘å™¨é€‰é¡¹ï¼Œåä¸º <code>--rewriteRelativeImportExtensions</code> ã€‚å½“ä¸€ä¸ªå¯¼å…¥è·¯å¾„ä¸ºç›¸å¯¹è·¯å¾„ï¼ˆä»¥ <code>./</code> å’Œ <code>../</code> å¼€å¤´ï¼‰ï¼Œå¹¶ä»¥ä¸€ä¸ª TypeScript æ‰©å±•åï¼ˆ<code>.ts</code> ï¼Œ <code>.tsx</code> ï¼Œ <code>.mts</code> ï¼Œ <code>.cts</code> ï¼‰ï¼Œå¹¶ä¸”ä¸æ˜¯ä¸€ä¸ªå£°æ˜æ–‡ä»¶æ—¶ï¼Œç¼–è¯‘å™¨ä¼šæŠŠè¯¥è·¯å¾„é‡å†™ä¸ºå¯¹åº”çš„ JavaScript æ‰©å±•åï¼ˆ <code>.js</code> ï¼Œ <code>.jsx</code> ï¼Œ <code>.mjs</code> ï¼Œ .<code>cjs</code>ï¼‰ã€‚</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">// å¼€å¯ --rewriteRelativeImportExtensions</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">// è¿™äº›è·¯å¾„ä¼šè¢«é‡å†™</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">import</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> *</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> as</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> foo</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> from</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">./foo.ts</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">import</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> *</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> as</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> bar</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> from</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">../someFolder/bar.mts</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">// è¿™äº›åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½ä¸ä¼šè¢«é‡å†™</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">import</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> *</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> as</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> a</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> from</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">./foo</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">import</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> *</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> as</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> b</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> from</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">some-package/file.ts</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">import</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> *</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> as</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> c</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> from</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">@some-scope/some-package/file.ts</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">import</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> *</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> as</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> d</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> from</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">#/file.ts</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">import</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> *</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> as</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> e</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> from</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">./file.js</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span></code></pre><p>è¿™å…è®¸æˆ‘ä»¬ç¼–å†™å¯ä»¥å°±åœ°è¿è¡Œçš„ TypeScript ä»£ç ï¼Œç„¶ååœ¨å‡†å¤‡å¥½æ—¶å°†å…¶ç¼–è¯‘æˆ JavaScript ã€‚</p><p>ç°åœ¨ï¼Œæˆ‘ä»¬æ³¨æ„åˆ° TypeScript é€šå¸¸ä¼šé¿å…é‡å†™è·¯å¾„ï¼Œè¿™æ˜¯æœ‰ä¸€äº›åŸå› çš„ï¼Œä¸è¿‡æœ€æ˜æ˜¾çš„åŸå› æ˜¯åŠ¨æ€å¯¼å…¥ã€‚å¦‚æœä¸€ä¸ªå¼€å‘è€…ç¼–å†™äº†å¦‚ä¸‹çš„ä»£ç ï¼Œå¤„ç† <code>import</code> æ”¶åˆ°çš„è·¯å¾„å¹¶ä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹ã€‚å®é™…ä¸Šï¼Œæˆ‘ä»¬ä¸å¯èƒ½å»è¦†ç›–ä»»ä½•é¡¹ç›®ä¾èµ–çš„ <code>import</code> è¡Œä¸ºã€‚</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">function</span><span style="--s-dark:#80A665;--s-light:#59873A"> getPath</span><span style="--s-dark:#666666;--s-light:#999999">()</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">  if</span><span style="--s-dark:#666666;--s-light:#999999"> (</span><span style="--s-dark:#BD976A;--s-light:#B07D48">Math</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">random</span><span style="--s-dark:#666666;--s-light:#999999">()</span><span style="--s-dark:#666666;--s-light:#999999"> &lt;</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 0.5</span><span style="--s-dark:#666666;--s-light:#999999">)</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">    return</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">./foo.ts</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  }</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> else</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">    return</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">./foo.js</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  }</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">let</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> myImport</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> await</span><span style="--s-dark:#80A665;--s-light:#59873A"> import</span><span style="--s-dark:#666666;--s-light:#999999">(</span><span style="--s-dark:#80A665;--s-light:#59873A">getPath</span><span style="--s-dark:#666666;--s-light:#999999">());</span></span></code></pre><p>å¦ä¸€ä¸ªé—®é¢˜æ˜¯ï¼ˆå°±å¦‚ä¸Šé¢æ‰€ç¤ºï¼‰åªæœ‰ç›¸å¯¹è·¯å¾„ä¼šè¢«é‡å†™ï¼Œè¿™ç§é‡å†™æ˜¯â€œå¤©çœŸåœ°â€ã€‚è¿™æ„å‘³ç€ä»»ä½•ä¾èµ– TypeScript çš„ <code>baseUrl</code> å’Œ <code>paths</code> çš„è·¯å¾„éƒ½ä¸ä¼šè¢«é‡å†™ã€‚</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-json"><span class="line"><span style="--s-dark:#666666;--s-light:#999999">{</span></span>
<span class="line"><span style="--s-dark:#B8A96577;--s-light:#99841877">  "</span><span style="--s-dark:#B8A965;--s-light:#998418">compilerOptions</span><span style="--s-dark:#B8A96577;--s-light:#99841877">"</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#B8A96577;--s-light:#99841877">    "</span><span style="--s-dark:#B8A965;--s-light:#998418">module</span><span style="--s-dark:#B8A96577;--s-light:#99841877">"</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">nodenext</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">,</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">    // ...</span></span>
<span class="line"><span style="--s-dark:#B8A96577;--s-light:#99841877">    "</span><span style="--s-dark:#B8A965;--s-light:#998418">paths</span><span style="--s-dark:#B8A96577;--s-light:#99841877">"</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#B8A96577;--s-light:#99841877">      "</span><span style="--s-dark:#B8A965;--s-light:#998418">@/*</span><span style="--s-dark:#B8A96577;--s-light:#99841877">"</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#666666;--s-light:#999999"> [</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">./src/*</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">]</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">    }</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  }</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span></code></pre><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">// ä¸ä¼šè¢«è½¬åŒ–</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">import</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> *</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> as</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> utilities</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> from</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">@/utilities.ts</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span></code></pre><p>ä»»ä½•é€šè¿‡ <code>package.json</code> çš„ <code>exports</code> å’Œ <code>imports</code> å­—æ®µè§£æè·¯å¾„ä¹Ÿä¸ä¼šã€‚</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-json"><span class="line"><span style="--s-dark:#666666;--s-light:#999999">{</span></span>
<span class="line"><span style="--s-dark:#B8A96577;--s-light:#99841877">  "</span><span style="--s-dark:#B8A965;--s-light:#998418">name</span><span style="--s-dark:#B8A96577;--s-light:#99841877">"</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">my-package</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">,</span></span>
<span class="line"><span style="--s-dark:#B8A96577;--s-light:#99841877">  "</span><span style="--s-dark:#B8A965;--s-light:#998418">imports</span><span style="--s-dark:#B8A96577;--s-light:#99841877">"</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#B8A96577;--s-light:#99841877">    "</span><span style="--s-dark:#B8A965;--s-light:#998418">#root/*</span><span style="--s-dark:#B8A96577;--s-light:#99841877">"</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">./dist/*</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  }</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span></code></pre><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-javascript"><span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">// ä¸ä¼šè¢«è½¬åŒ–</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">import</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> *</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> as</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> utilities</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> from</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">#root/utilities.ts</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span></code></pre><p>å› æ­¤ï¼Œå¦‚æœä½ ä½¿ç”¨äº†å¸¦æœ‰å¤šä¸ªç›¸äº’å¼•ç”¨çš„åŒ…çš„å·¥ä½œåŒºé£æ ¼çš„é¡¹ç›®å¸ƒå±€ï¼Œä½ å¯èƒ½éœ€è¦ä½¿ç”¨å¸¦æœ‰ <a href="https://nodejs.org/api/packages.html#resolving-user-conditions" target="_blank" rel="noopener">scoped custom conditions</a> çš„ <a href="https://nodejs.org/api/packages.html#conditional-exports" target="_blank" rel="noopener">conditional exports</a> æ¥ä½¿å…¶æ­£å¸¸å·¥ä½œï¼š</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-json"><span class="line"><span style="--s-dark:#666666;--s-light:#999999">{</span></span>
<span class="line"><span style="--s-dark:#B8A96577;--s-light:#99841877">  "</span><span style="--s-dark:#B8A965;--s-light:#998418">name</span><span style="--s-dark:#B8A96577;--s-light:#99841877">"</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">my-package</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">,</span></span>
<span class="line"><span style="--s-dark:#B8A96577;--s-light:#99841877">  "</span><span style="--s-dark:#B8A965;--s-light:#998418">exports</span><span style="--s-dark:#B8A96577;--s-light:#99841877">"</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#B8A96577;--s-light:#99841877">    "</span><span style="--s-dark:#B8A965;--s-light:#998418">.</span><span style="--s-dark:#B8A96577;--s-light:#99841877">"</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#B8A96577;--s-light:#99841877">      "</span><span style="--s-dark:#B8A965;--s-light:#998418">@my-package/development</span><span style="--s-dark:#B8A96577;--s-light:#99841877">"</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">./src/index.ts</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">,</span></span>
<span class="line"><span style="--s-dark:#B8A96577;--s-light:#99841877">      "</span><span style="--s-dark:#B8A965;--s-light:#998418">import</span><span style="--s-dark:#B8A96577;--s-light:#99841877">"</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">./lib/index.js</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">    },</span></span>
<span class="line"><span style="--s-dark:#B8A96577;--s-light:#99841877">    "</span><span style="--s-dark:#B8A965;--s-light:#998418">./*</span><span style="--s-dark:#B8A96577;--s-light:#99841877">"</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#B8A96577;--s-light:#99841877">      "</span><span style="--s-dark:#B8A965;--s-light:#998418">@my-package/development</span><span style="--s-dark:#B8A96577;--s-light:#99841877">"</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">./src/*.ts</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">,</span></span>
<span class="line"><span style="--s-dark:#B8A96577;--s-light:#99841877">      "</span><span style="--s-dark:#B8A965;--s-light:#998418">import</span><span style="--s-dark:#B8A96577;--s-light:#99841877">"</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">./lib/*.js</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">    }</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  }</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span></code></pre><p>ä»»ä½•æ—¶å€™åªè¦ä½ æƒ³å¯¼å…¥ <code>.ts</code> æ–‡ä»¶ï¼Œä½ å¯ä»¥æ‰§è¡Œ <code>node --conditions=@my-package/development</code> ã€‚</p><p>æ³¨æ„æˆ‘ä»¬ä¸ºæ¡ä»¶ <code>@my-package/development</code> ä½¿ç”¨çš„â€œå‘½åç©ºé—´â€å’Œâ€œèŒƒå›´â€ã€‚è¿™æ˜¯ä¸€ä¸ªä¸´æ—¶æ€§çš„è§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥é¿å…å¯èƒ½ä½¿ç”¨ <code>development</code> æ¡ä»¶ä¸‹çš„ä¾èµ–äº§ç”Ÿçš„å†²çªã€‚å¦‚æ¯ä¸ªäººéƒ½åœ¨ä»–ä»¬çš„åŒ…ä¸­ä½¿ç”¨ <code>development</code> ï¼Œé‚£ä¹ˆè§£æä¸€ä¸ª <code>.ts</code> æ–‡ä»¶çš„è§£æè¿‡ç¨‹ä¸ä¸€å®šèƒ½æ­£å¸¸å·¥å…·ã€‚è¿™ä¸ªç†å¿µå’Œ Colin McDonnell çš„ <a href="https://colinhacks.com/essays/live-types-typescript-monorepo#:~:text=custom%20conditions" target="_blank" rel="noopener">Live types in a TypeScript monorepo</a> ä»¥åŠ <a href="https://github.com/isaacs/tshy#loading-from-source" target="_blank" rel="noopener">tshyâ€™s guidance for loading from source</a> æ–‡ç« æ‰€æè¿°çš„ç›¸ä¼¼ã€‚</p><p>æ›´å¤šå…³äºè¿™ä¸ªç‰¹æ€§è¿ä½œçš„å…·ä½“ç»†èŠ‚ï¼Œå¯ä»¥é˜…è¯»æ­¤å¤„ <a href="https://github.com/microsoft/TypeScript/pull/59767" target="_blank" rel="noopener">PR</a> ã€‚</p><h2 id="æ”¯æŒ-target-es2024-å’Œ-lib-es2024" tabindex="-1">æ”¯æŒ --target es2024 å’Œ --lib es2024 <a class="header-anchor" href="#æ”¯æŒ-target-es2024-å’Œ-lib-es2024">ğŸ”—</a></h2><p>TypeScript 5.7 ç°åœ¨æ”¯æŒ <code>--target es2024</code> é€‰é¡¹ï¼Œè¿™æ ·ç”¨æˆ·å°±å¯ä»¥å°†ç›®æ ‡åˆ‡åˆ° ECMAScript 2024 è¿è¡Œæ—¶ã€‚è¿™ä¸ª target ä¸»è¦æ˜¯æŒ‡å®šäº† <code>--lib es2024</code> é€‰é¡¹ï¼Œå®ƒåŒ…å«äº†è®¸å¤šç‰¹æ€§ï¼Œæ¯”å¦‚ <code>SharedArrayBuffer</code> å’Œ <code>ArrayBuffer</code> ï¼Œ <code>Object.groupBy</code> ï¼Œ <code>Map.groupBy</code> ï¼Œ <code>Promise.withResolvers</code> ç­‰ã€‚ <code>Atomics.waitAsync</code> ä¹Ÿä» <code>--lib es2022</code> ç§»åŠ¨åˆ°äº† <code>--lib es2024</code> ã€‚</p><p>æ³¨æ„ä½œä¸ºå˜æ›´çš„ä¸€éƒ¨åˆ†çš„ <code>SharedArrayBuffer</code> å’Œ <code>ArrayBuffer</code> ï¼Œè¿™ä¸¤è€…ç°åœ¨æœ‰ç‚¹ä¸åŒã€‚ä¸ºäº†å¼¥è¡¥å·®å¼‚ä»¥åŠä¿ç•™åº•å±‚çš„ buffer ç±»å‹ï¼Œç°åœ¨æ‰€æœ‰çš„ <code>TypedArrays</code> ï¼ˆæ¯”å¦‚ <code>Uint8Array</code> ä»¥åŠå…¶ä»–ï¼‰éƒ½æ˜¯å¸¦æ³›å‹çš„ã€‚</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">interface</span><span style="--s-dark:#5DA994;--s-light:#2E8F82"> Uint8Array</span><span style="--s-dark:#666666;--s-light:#999999">&lt;</span><span style="--s-dark:#5DA994;--s-light:#2E8F82">TArrayBuffer</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> extends</span><span style="--s-dark:#5DA994;--s-light:#2E8F82"> ArrayBufferLike</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#5DA994;--s-light:#2E8F82"> ArrayBufferLike</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">    // ...</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span></code></pre><p>æ¯ä¸ª <code>TypedArray</code> ç°åœ¨åŒ…å«äº†ä¸€ä¸ªåä¸º <code>TArrayBuffer</code> çš„ç±»å‹å‚æ•°ï¼Œå°½ç®¡è¿™ä¸ªç±»å‹å‚æ•°æœ‰ä¸€ä¸ªé»˜è®¤çš„ç±»å‹ï¼Œå³æˆ‘ä»¬å¯ä»¥ç»§ç»­ä½¿ç”¨ <code>Int32Array</code> è€Œä¸ç”¨æ˜¾å¼åœ°ä½¿ç”¨ <code>Int32Array&lt;ArrayBufferLike&gt;</code> ã€‚</p><p>å¦‚æœä½ é‡åˆ°äº†ä»»ä½•å…³äºè¿™ä¸ªæ›´æ–°çš„é—®é¢˜ï¼Œä½ å¯èƒ½éœ€è¦æ›´æ–° <code>@types/node</code> åŒ…ã€‚</p><p>æ„Ÿè°¢ <a href="https://github.com/petamoriken" target="_blank" rel="noopener">Kenta Moriuchi</a> è´¡çŒ®äº†ç»å¤§éƒ¨åˆ†çš„<a href="https://github.com/microsoft/TypeScript/pull/58573" target="_blank" rel="noopener">å·¥ä½œ</a>ã€‚</p><h2 id="æœç´¢ç¥–å…ˆé…ç½®æ–‡ä»¶çš„é¡¹ç›®æ‰€æœ‰æƒ" tabindex="-1">æœç´¢ç¥–å…ˆé…ç½®æ–‡ä»¶çš„é¡¹ç›®æ‰€æœ‰æƒ <a class="header-anchor" href="#æœç´¢ç¥–å…ˆé…ç½®æ–‡ä»¶çš„é¡¹ç›®æ‰€æœ‰æƒ">ğŸ”—</a></h2><p>å½“ä¸€ä¸ª TypeScript æ–‡ä»¶ç”±ä¸€ä¸ªç¼–è¾‘å™¨ä½¿ç”¨ TSServer åŠ è½½ï¼ˆæ¯”å¦‚ Visual Studio æˆ–è€… VS Codeï¼‰æ—¶ï¼Œç¼–è¾‘å™¨å°†ä¼šå°è¯•å»å¯»æ‰¾æ‹¥æœ‰è¯¥æ–‡ä»¶çš„ç›¸å…³çš„ <code>tsconfig.json</code> æ–‡ä»¶ã€‚ä¸ºäº†å®ç°å®ƒï¼Œç¨‹åºéœ€è¦æ²¿ç€ç¼–è¾‘æ–‡ä»¶çš„ä½ç½®ä»ç›®å½•æ ‘ä¸€ç›´å¾€ä¸ŠæŸ¥æ‰¾ä»»ä½•åä¸º <code>tsconfig.json</code> çš„æ–‡ä»¶ã€‚</p><p>å…ˆå‰ï¼Œè¿™ä¸ªæœç´¢ä¼šåœ¨æ‰¾åˆ°ç¬¬ä¸€ä¸ª <code>tsconfig.json</code> æ–‡ä»¶çš„æ—¶å€™åœæ­¢ã€‚ç„¶è€Œï¼Œæƒ³è±¡ä¸€ä¸‹å¦‚ä¸‹çš„é¡¹ç›®ç»“æ„ï¼š</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-text"><span class="line"><span>project/</span></span>
<span class="line"><span>â”œâ”€â”€ src/</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ foo.ts</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ foo-test.ts</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ tsconfig.json</span></span>
<span class="line"><span>â”‚   â””â”€â”€ tsconfig.test.json</span></span>
<span class="line"><span>â””â”€â”€ tsconfig.json</span></span></code></pre><p>è¿™ä¸ªç»“æ„ä¸­ï¼Œæˆ‘ä»¬çš„æƒ³æ³•æ˜¯ <code>src/tsconfig.json</code> ä¸ºé¡¹ç›®çš„â€œä¸»è¦â€é…ç½®æ–‡ä»¶ï¼Œ <code>src/tsconfig.test.json</code> ä¸ºæ‰§è¡Œæµ‹è¯•çš„é…ç½®æ–‡ä»¶ã€‚</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-json"><span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">// src/tsconfig.json</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">{</span></span>
<span class="line"><span style="--s-dark:#B8A96577;--s-light:#99841877">  "</span><span style="--s-dark:#B8A965;--s-light:#998418">compilerOptions</span><span style="--s-dark:#B8A96577;--s-light:#99841877">"</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#B8A96577;--s-light:#99841877">    "</span><span style="--s-dark:#B8A965;--s-light:#998418">outDir</span><span style="--s-dark:#B8A96577;--s-light:#99841877">"</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">../dist</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  },</span></span>
<span class="line"><span style="--s-dark:#B8A96577;--s-light:#99841877">  "</span><span style="--s-dark:#B8A965;--s-light:#998418">exclude</span><span style="--s-dark:#B8A96577;--s-light:#99841877">"</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#666666;--s-light:#999999"> [</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">**/*.test.ts</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">]</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span></code></pre><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-json"><span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">// src/tsconfig.test.json</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">{</span></span>
<span class="line"><span style="--s-dark:#B8A96577;--s-light:#99841877">  "</span><span style="--s-dark:#B8A965;--s-light:#998418">compilerOptions</span><span style="--s-dark:#B8A96577;--s-light:#99841877">"</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#B8A96577;--s-light:#99841877">    "</span><span style="--s-dark:#B8A965;--s-light:#998418">outDir</span><span style="--s-dark:#B8A96577;--s-light:#99841877">"</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">../dist/test</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  },</span></span>
<span class="line"><span style="--s-dark:#B8A96577;--s-light:#99841877">  "</span><span style="--s-dark:#B8A965;--s-light:#998418">include</span><span style="--s-dark:#B8A96577;--s-light:#99841877">"</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#666666;--s-light:#999999"> [</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">**/*.test.ts</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">],</span></span>
<span class="line"><span style="--s-dark:#B8A96577;--s-light:#99841877">  "</span><span style="--s-dark:#B8A965;--s-light:#998418">references</span><span style="--s-dark:#B8A96577;--s-light:#99841877">"</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#666666;--s-light:#999999"> [</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">    {</span><span style="--s-dark:#B8A96577;--s-light:#99841877"> "</span><span style="--s-dark:#B8A965;--s-light:#998418">path</span><span style="--s-dark:#B8A96577;--s-light:#99841877">"</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">./tsconfig.json</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999"> }</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  ]</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span></code></pre><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-json"><span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">// tsconfig.json</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">{</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  // è¿™æ˜¯ä¸€ä¸ªå·¥å…·åŒºé£æ ¼æˆ–è€…å«è§£å†³æ–¹æ¡ˆé£æ ¼çš„ tsconfig ã€‚</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  // å®ƒä¸æŒ‡å®šä»»ä½•çš„æ–‡ä»¶ï¼Œè€Œæ˜¯åªå¼•ç”¨æ‰€æœ‰å®é™…çš„é¡¹ç›®ã€‚</span></span>
<span class="line"><span style="--s-dark:#B8A96577;--s-light:#99841877">  "</span><span style="--s-dark:#B8A965;--s-light:#998418">files</span><span style="--s-dark:#B8A96577;--s-light:#99841877">"</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#666666;--s-light:#999999"> [],</span></span>
<span class="line"><span style="--s-dark:#B8A96577;--s-light:#99841877">  "</span><span style="--s-dark:#B8A965;--s-light:#998418">references</span><span style="--s-dark:#B8A96577;--s-light:#99841877">"</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#666666;--s-light:#999999"> [</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">    {</span><span style="--s-dark:#B8A96577;--s-light:#99841877"> "</span><span style="--s-dark:#B8A965;--s-light:#998418">path</span><span style="--s-dark:#B8A96577;--s-light:#99841877">"</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">./src/tsconfig.json</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999"> },</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">    {</span><span style="--s-dark:#B8A96577;--s-light:#99841877"> "</span><span style="--s-dark:#B8A965;--s-light:#998418">path</span><span style="--s-dark:#B8A96577;--s-light:#99841877">"</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">./src/tsconfig.test.json</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999"> },</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  ]</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span></code></pre><p>è¿™é‡Œçš„é—®é¢˜æ˜¯å½“ç¼–è¾‘ <code>foo-test.ts</code> æ—¶ï¼Œç¼–è¾‘å™¨ä¼šå°† <code>project/src/tsconfig.json</code> å½“åšâ€œæ‹¥æœ‰â€è¯¥æ–‡ä»¶çš„é…ç½®æ–‡ä»¶ï¼Œä½†æ˜¯è¿™å´ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚å¦‚æœåœ¨æ­¤æ—¶å°±åœæ­¢å‘ä¸ŠæŸ¥æ‰¾çš„è¯ï¼Œè¿™å¯èƒ½ä¸èƒ½è®©äººæ»¡æ„ã€‚å…ˆå‰é¿å…è¿™ä¸ªé—®é¢˜çš„å”¯ä¸€çš„æ–¹å¼æ˜¯å°† <code>src/tsconfig.json</code> é‡å‘½åä¸ºç±»ä¼¼ <code>src/tsconfig.src.json</code> è¿™æ ·çš„å‘½åï¼Œè¿™æ ·æ‰€æœ‰çš„æ–‡ä»¶å°±ä¼šåŒ¹é…åˆ°é¡¶å±‚çš„å¼•ç”¨äº†æ‰€æœ‰å¯èƒ½é¡¹ç›®çš„ <code>tsconfig.json</code> æ–‡ä»¶ã€‚</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-json"><span class="line"><span style="--s-dark:#DBD7CAEE;--s-light:#393A34">project/</span></span>
<span class="line"><span style="--s-dark:#DBD7CAEE;--s-light:#393A34">â”œâ”€â”€ src/</span></span>
<span class="line"><span style="--s-dark:#DBD7CAEE;--s-light:#393A34">â”‚   â”œâ”€â”€ foo.ts</span></span>
<span class="line"><span style="--s-dark:#DBD7CAEE;--s-light:#393A34">â”‚   â”œâ”€â”€ foo-test.ts</span></span>
<span class="line"><span style="--s-dark:#DBD7CAEE;--s-light:#393A34">â”‚   â”œâ”€â”€ tsconfig.src.json</span></span>
<span class="line"><span style="--s-dark:#DBD7CAEE;--s-light:#393A34">â”‚   â””â”€â”€ tsconfig.test.json</span></span>
<span class="line"><span style="--s-dark:#DBD7CAEE;--s-light:#393A34">â””â”€â”€ tsconfig.json</span></span></code></pre><h2 id="ä¸ºç»„åˆé¡¹ç›®çš„ç¼–è¾‘æä¾›æ›´å¿«åœ°é¡¹ç›®æ‰€æœ‰æƒæ£€æŸ¥ã€‚" tabindex="-1">ä¸ºç»„åˆé¡¹ç›®çš„ç¼–è¾‘æä¾›æ›´å¿«åœ°é¡¹ç›®æ‰€æœ‰æƒæ£€æŸ¥ã€‚ <a class="header-anchor" href="#ä¸ºç»„åˆé¡¹ç›®çš„ç¼–è¾‘æä¾›æ›´å¿«åœ°é¡¹ç›®æ‰€æœ‰æƒæ£€æŸ¥ã€‚">ğŸ”—</a></h2><p>æƒ³è±¡ä¸€ä¸‹æœ‰ä¸€ä¸ªå¦‚ä¸‹ç»“æ„çš„å·¨å¤§ä»£ç åº“ï¼š</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-text"><span class="line"><span>packages</span></span>
<span class="line"><span>â”œâ”€â”€ graphics/</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ tsconfig.json</span></span>
<span class="line"><span>â”‚   â””â”€â”€ src/</span></span>
<span class="line"><span>â”‚       â””â”€â”€ ...</span></span>
<span class="line"><span>â”œâ”€â”€ sound/</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ tsconfig.json</span></span>
<span class="line"><span>â”‚   â””â”€â”€ src/</span></span>
<span class="line"><span>â”‚       â””â”€â”€ ...</span></span>
<span class="line"><span>â”œâ”€â”€ networking/</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ tsconfig.json</span></span>
<span class="line"><span>â”‚   â””â”€â”€ src/</span></span>
<span class="line"><span>â”‚       â””â”€â”€ ...</span></span>
<span class="line"><span>â”œâ”€â”€ input/</span></span>
<span class="line"><span>â”‚   â”œâ”€â”€ tsconfig.json</span></span>
<span class="line"><span>â”‚   â””â”€â”€ src/</span></span>
<span class="line"><span>â”‚       â””â”€â”€ ...</span></span>
<span class="line"><span>â””â”€â”€ app/</span></span>
<span class="line"><span>    â”œâ”€â”€ tsconfig.json</span></span>
<span class="line"><span>    â”œâ”€â”€ some-script.js</span></span>
<span class="line"><span>    â””â”€â”€ src/</span></span>
<span class="line"><span>        â””â”€â”€ ...</span></span></code></pre><p>æ¯ä¸ªåœ¨ <code>packages</code> ä¸‹çš„æ–‡ä»¶å¤¹éƒ½æ˜¯ä¸€ä¸ªå•ç‹¬çš„ TypeScript é¡¹ç›®ï¼Œ <code>app</code> æ–‡ä»¶å¤¹ä¸ºä¸»é¡¹ç›®ï¼Œå®ƒä¾èµ–æ‰€æœ‰å…¶ä»–çš„é¡¹ç›®ã€‚</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-json"><span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">// app/tsconfig.json</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">{</span></span>
<span class="line"><span style="--s-dark:#B8A96577;--s-light:#99841877">  "</span><span style="--s-dark:#B8A965;--s-light:#998418">compilerOptions</span><span style="--s-dark:#B8A96577;--s-light:#99841877">"</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">    // ...</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  },</span></span>
<span class="line"><span style="--s-dark:#B8A96577;--s-light:#99841877">  "</span><span style="--s-dark:#B8A965;--s-light:#998418">include</span><span style="--s-dark:#B8A96577;--s-light:#99841877">"</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#666666;--s-light:#999999"> [</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#C98A7D;--s-light:#B56959">src</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">],</span></span>
<span class="line"><span style="--s-dark:#B8A96577;--s-light:#99841877">  "</span><span style="--s-dark:#B8A965;--s-light:#998418">references</span><span style="--s-dark:#B8A96577;--s-light:#99841877">"</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#666666;--s-light:#999999"> [</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">    {</span><span style="--s-dark:#B8A96577;--s-light:#99841877"> "</span><span style="--s-dark:#B8A965;--s-light:#998418">path</span><span style="--s-dark:#B8A96577;--s-light:#99841877">"</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">../graphics/tsconfig.json</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999"> },</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">    {</span><span style="--s-dark:#B8A96577;--s-light:#99841877"> "</span><span style="--s-dark:#B8A965;--s-light:#998418">path</span><span style="--s-dark:#B8A96577;--s-light:#99841877">"</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">../sound/tsconfig.json</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999"> },</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">    {</span><span style="--s-dark:#B8A96577;--s-light:#99841877"> "</span><span style="--s-dark:#B8A965;--s-light:#998418">path</span><span style="--s-dark:#B8A96577;--s-light:#99841877">"</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">../networking/tsconfig.json</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999"> },</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">    {</span><span style="--s-dark:#B8A96577;--s-light:#99841877"> "</span><span style="--s-dark:#B8A965;--s-light:#998418">path</span><span style="--s-dark:#B8A96577;--s-light:#99841877">"</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">../input/tsconfig.json</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999"> }</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  ]</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span></code></pre><p>ç°åœ¨è¯·æ³¨æ„åœ¨ <code>app</code> æ–‡ä»¶å¤¹ä¸‹æœ‰ä¸€ä¸ª <code>some-script.js</code> çš„æ–‡ä»¶ã€‚å½“æˆ‘ä»¬åœ¨ç¼–è¾‘å™¨ä¸­æ‰“å¼€è¿™ä¸ªæ–‡ä»¶æ—¶ï¼ŒTypeScript è¯­è¨€æœåŠ¡ï¼ˆå®ƒä¹Ÿå¯ä»¥å¤„ç† JavaScript æ–‡ä»¶çš„ç¼–è¾‘ä½“éªŒï¼‰ä¸å¾—ä¸å»å¼„æ¸…æ–‡ä»¶å±äºå“ªä¸ªé¡¹ç›®ï¼Œåªæœ‰è¿™æ ·æ‰èƒ½åº”ç”¨æ­£ç¡®çš„è®¾ç½®ã€‚</p><p>åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæœ€è¿‘çš„ <code>tsconfig.json</code> æ–‡ä»¶ä¸åŒ…å« <code>some-script.js</code> æ–‡ä»¶ï¼Œä½†æ˜¯ TypeScript ä»ä¼šå»è¯¢é—®â€œ <code>app/tsconfig.json</code> å¼•ç”¨çš„é¡¹ç›®æ˜¯å¦æœ‰ä¸€ä¸ªåŒ…å«äº† <code>some-script</code> æ–‡ä»¶ï¼Ÿâ€ã€‚ä¸ºäº†å®ç°å®ƒï¼Œå…ˆå‰ TypeScript ä¼šä¸€ä¸ªæ¥ä¸€ä¸ªåœ°åŠ è½½æ¯ä¸ªé¡¹ç›®ï¼Œåœ¨æ‰¾åˆ°ä¸€ä¸ªåŒ…å« <code>some-script.js</code> æ–‡ä»¶çš„é¡¹ç›®åç«‹å³åœæ­¢ã€‚å³ä½¿ <code>some-script.js</code> ä¸åŒ…å«åœ¨æ ¹æ–‡ä»¶é›†åˆä¸­ï¼Œ TypeScript ä»ä¼šå»è§£æé¡¹ç›®å†…çš„æ‰€æœ‰æ–‡ä»¶ï¼Œå› ä¸ºæŸäº›æ ¹æ–‡ä»¶é›†åˆå¯èƒ½ä»ç„¶é—´æ¥å¼•ç”¨äº† <code>some-script.js</code> ã€‚</p><p>éšç€æ—¶é—´çš„æ¨ç§»æˆ‘ä»¬å‘ç°è¿™ä¸ªè¡Œä¸ºåœ¨ä¸€äº›å¤§å‹ä»£ç åº“ä¸­é€ æˆäº†æç«¯ä¸”ä¸å¯é¢„æµ‹çš„è¡Œä¸ºã€‚å¼€å‘è€…æ‰“å¼€äº†ä¸€äº›æ‚æ•£çš„è„šæœ¬æ–‡ä»¶ï¼Œç„¶åå‘ç°è¿™äº›æ–‡ä»¶éœ€è¦ç­‰å¾…æ•´ä¸ªä»£ç åº“åŠ è½½ã€‚</p><p>ä¸‡å¹¸çš„æ˜¯ï¼Œè¢«å¦ä¸€ä¸ªé¡¹ç›®ï¼ˆéå·¥ä½œåŒºï¼‰å¼•ç”¨çš„é¡¹ç›®å¿…é¡»å¼€å¯ä¸€ä¸ªåä¸º <code>composite</code> çš„æ ‡å¿—ï¼Œå®ƒå¼ºåˆ¶æ‰§è¡Œä¸€æ¡è§„åˆ™ï¼Œå³å¿…é¡»é¢„å…ˆçŸ¥é“æ‰€æœ‰çš„è¾“å…¥æºæ–‡ä»¶ã€‚æ‰€ä»¥å½“æ¢æµ‹ä¸€ä¸ª <code>composite</code> é¡¹ç›®æ—¶ï¼Œ TypeScript 5.7 å°†åªæ£€æŸ¥è¯¥æ–‡ä»¶æ˜¯å¦å±äºè¯¥é¡¹ç›®çš„æ ¹æ–‡ä»¶é›†åˆã€‚è¿™å¯ä»¥é¿å…è¿™ç§å¸¸è§çš„æœ€åçš„æƒ…å†µçš„è¡Œä¸ºã€‚</p><p>æ›´å¤šä¿¡æ¯å¯ä»¥æŸ¥çœ‹è¯¥ <a href="https://github.com/microsoft/TypeScript/pull/59688" target="_blank" rel="noopener">PR</a> ã€‚</p><h2 id="â€“module-nodenext-ä¸‹åˆæ³•çš„-json-å¯¼å…¥" tabindex="-1">â€“module nodenext ä¸‹åˆæ³•çš„ JSON å¯¼å…¥ <a class="header-anchor" href="#â€“module-nodenext-ä¸‹åˆæ³•çš„-json-å¯¼å…¥">ğŸ”—</a></h2><p>å½“åœ¨ <code>--module nodenext</code> ä¸‹å¯¼å…¥ä¸€ä¸ª <code>.json</code> æ–‡ä»¶æ—¶ï¼Œ TypeScript ç°åœ¨å°†ä¼šå¼ºåˆ¶æŸäº›è§„åˆ™æ¥é˜²æ­¢è¿è¡Œæ—¶é”™è¯¯ã€‚</p><p>å…¶ä¸€æ˜¯ä»»ä½• JSON æ–‡ä»¶å¯¼å…¥éƒ½éœ€è¦åŒ…å«ä¸€ä¸ª <code>type: "json"</code> çš„å¯¼å…¥å±æ€§ã€‚</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">import</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> myConfig</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> from</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">./myConfig.json</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">//                   ~~~~~~~~~~~~~~~~~</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">// âŒ --module nodenext ä¸‹å¯¼å…¥ JSON å¿…é¡»æ˜¾å¼æŒ‡å®š type: "json"</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">import</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> myConfig</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> from</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">./myConfig.json</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> with</span><span style="--s-dark:#666666;--s-light:#999999"> {</span><span style="--s-dark:#B8A965;--s-light:#998418"> type</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">json</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999"> };</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">//                                          ^^^^^^^^^^^^^^^^</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">// âœ… æ­£ç¡®</span></span></code></pre><p>åœ¨è¿™ä¸ªéªŒè¯è§„åˆ™çš„ä¸Šå±‚ï¼Œ TypeScript å°†ä¸ä¼šç”Ÿæˆâ€œå‘½åâ€å¯¼å‡ºï¼Œä¸€ä¸ª JSON å¯¼å…¥çš„å†…å®¹åªèƒ½é€šè¿‡é»˜è®¤å±æ€§æ¥è·å–ã€‚</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">// âœ… æ­£ç¡®:</span></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">import</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> myConfigA</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> from</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">./myConfig.json</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> with</span><span style="--s-dark:#666666;--s-light:#999999"> {</span><span style="--s-dark:#B8A965;--s-light:#998418"> type</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">json</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999"> };</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">let </span><span style="--s-dark:#BD976A;--s-light:#B07D48">version</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> myConfigA</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">version</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">///////////</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">import</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> *</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> as</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> myConfigB</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> from</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">./myConfig.json</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> with</span><span style="--s-dark:#666666;--s-light:#999999"> {</span><span style="--s-dark:#B8A965;--s-light:#998418"> type</span><span style="--s-dark:#666666;--s-light:#999999">:</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977"> "</span><span style="--s-dark:#C98A7D;--s-light:#B56959">json</span><span style="--s-dark:#C98A7D77;--s-light:#B5695977">"</span><span style="--s-dark:#666666;--s-light:#999999"> };</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">// âŒ é”™è¯¯:</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">let </span><span style="--s-dark:#BD976A;--s-light:#B07D48">version</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> myConfig</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">version</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">// âœ… æ­£ç¡®:</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">let </span><span style="--s-dark:#BD976A;--s-light:#B07D48">version</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> myConfig</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">default</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#BD976A;--s-light:#B07D48">version</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span></code></pre><p>æ›´å¤šå˜æ›´è¯·æŸ¥çœ‹æ­¤ <a href="https://github.com/microsoft/TypeScript/pull/60019" target="_blank" rel="noopener">PR</a> ã€‚</p><h2 id="åœ¨-node-ä¸­æ”¯æŒ-v8-ç¼–è¯‘ç¼“å­˜" tabindex="-1">åœ¨ Node ä¸­æ”¯æŒ V8 ç¼–è¯‘ç¼“å­˜ <a class="header-anchor" href="#åœ¨-node-ä¸­æ”¯æŒ-v8-ç¼–è¯‘ç¼“å­˜">ğŸ”—</a></h2><p>Node 22 æ”¯æŒäº†ä¸€ä¸ªåä¸º <a href="https://github.com/nodejs/node/pull/54501" target="_blank" rel="noopener">module.enableCompileCache()</a> çš„æ–° API ã€‚è¿™ä¸ª API å…è®¸å·¥ä½œæ‰§è¡Œå®Œç¬¬ä¸€æ¬¡ååœ¨è¿è¡Œæ—¶é‡ç”¨ä¸€äº›å·²å®Œæˆçš„è§£æå’Œç¼–è¯‘å·¥ä½œã€‚</p><p>TypeScript 5.7 ç°åœ¨åˆ©ç”¨äº†æ­¤ API ï¼Œæ‰€ä»¥èƒ½æ›´å¿«åœ°å¼€å§‹å·¥ä½œã€‚åœ¨æˆ‘ä»¬çš„æŸäº›æµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬å‘ç°åœ¨æ‰§è¡Œ <code>tsc --version</code> æ—¶æœ‰å¤§çº¦ 2.5 å€çš„é€Ÿåº¦æå‡ã€‚</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-text"><span class="line"><span>Benchmark 1: node ./built/local/_tsc.js --version (*without* caching)</span></span>
<span class="line"><span>  Time (mean Â± Ïƒ):     122.2 ms Â±   1.5 ms    [User: 101.7 ms, System: 13.0 ms]</span></span>
<span class="line"><span>  Range (min â€¦ max):   119.3 ms â€¦ 132.3 ms    200 runs</span></span>
<span class="line"><span> </span></span>
<span class="line"><span>Benchmark 2: node ./built/local/tsc.js --version  (*with* caching)</span></span>
<span class="line"><span>  Time (mean Â± Ïƒ):      48.4 ms Â±   1.0 ms    [User: 34.0 ms, System: 11.1 ms]</span></span>
<span class="line"><span>  Range (min â€¦ max):    45.7 ms â€¦  52.8 ms    200 runs</span></span>
<span class="line"><span> </span></span>
<span class="line"><span>Summary</span></span>
<span class="line"><span>  node ./built/local/tsc.js --version ran</span></span>
<span class="line"><span>    2.52 Â± 0.06 times faster than node ./built/local/_tsc.js --version</span></span></code></pre><p>æ›´å¤šä¿¡æ¯æŸ¥çœ‹æ­¤ <a href="https://github.com/microsoft/TypeScript/pull/59720" target="_blank" rel="noopener">PR</a> ã€‚</p><h2 id="éœ€è¦æ³¨æ„çš„è¡Œä¸ºå˜æ›´" tabindex="-1">éœ€è¦æ³¨æ„çš„è¡Œä¸ºå˜æ›´ <a class="header-anchor" href="#éœ€è¦æ³¨æ„çš„è¡Œä¸ºå˜æ›´">ğŸ”—</a></h2><h3 id="lib-d-ts" tabindex="-1">lib.d.ts <a class="header-anchor" href="#lib-d-ts">ğŸ”—</a></h3><p>è¯¦æƒ…è¯·æŸ¥çœ‹<a href="https://github.com/microsoft/TypeScript/pull/60061" target="_blank" rel="noopener">æ­¤å¤„</a>ã€‚</p><h3 id="typedarrays-ç°åœ¨æ˜¯-arraybufferlike-çš„é€šç”¨ç‰ˆæœ¬" tabindex="-1">TypedArrays ç°åœ¨æ˜¯ ArrayBufferLike çš„é€šç”¨ç‰ˆæœ¬ <a class="header-anchor" href="#typedarrays-ç°åœ¨æ˜¯-arraybufferlike-çš„é€šç”¨ç‰ˆæœ¬">ğŸ”—</a></h3><p>åœ¨ ECMAScript 2024 ä¸­ï¼Œ <code>ShareArrayBuffer</code> å’Œ <code>ArrayBuffer</code> çš„ç±»å‹æœ‰ç•¥å¾®ä¸åŒã€‚ä¸ºäº†å¼¥è¡¥å·®å¼‚ä»¥åŠä¿ç•™åº•å±‚çš„ <code>buffer</code> ç±»å‹ï¼Œç°åœ¨æ‰€æœ‰çš„ <code>TypedArrays</code> ï¼ˆæ¯”å¦‚ <code>Uint8Array</code> ä»¥åŠå…¶ä»–ï¼‰éƒ½æ˜¯å¸¦æ³›å‹çš„ã€‚</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">interface</span><span style="--s-dark:#5DA994;--s-light:#2E8F82"> Uint8Array</span><span style="--s-dark:#666666;--s-light:#999999">&lt;</span><span style="--s-dark:#5DA994;--s-light:#2E8F82">TArrayBuffer</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> extends</span><span style="--s-dark:#5DA994;--s-light:#2E8F82"> ArrayBufferLike</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#5DA994;--s-light:#2E8F82"> ArrayBufferLike</span><span style="--s-dark:#666666;--s-light:#999999">&gt;</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">  // ...</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span></code></pre><p>æ¯ä¸ª <code>TypedArray</code> ç°åœ¨åŒ…å«äº†ä¸€ä¸ªåä¸º <code>TArrayBuffer</code> çš„ç±»å‹å‚æ•°ï¼Œå°½ç®¡è¿™ä¸ªç±»å‹å‚æ•°æœ‰ä¸€ä¸ªé»˜è®¤çš„ç±»å‹ï¼Œå³æˆ‘ä»¬å¯ä»¥ç»§ç»­ä½¿ç”¨ <code>Int32Array</code> è€Œä¸ç”¨æ˜¾å¼åœ°ä½¿ç”¨ <code>Int32Array&lt;ArrayBufferLike&gt;</code> ã€‚</p><p>å¦‚æœä½ é‡åˆ°äº†ä»»ä½•å…³äºè¿™ä¸ªæ›´æ–°çš„é—®é¢˜ï¼Œæ¯”å¦‚ï¼š</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-text"><span class="line"><span>error TS2322: Type 'Buffer' is not assignable to type 'Uint8Array&lt;ArrayBufferLike&gt;'.</span></span>
<span class="line"><span>error TS2345: Argument of type 'Buffer' is not assignable to parameter of type 'Uint8Array&lt;ArrayBufferLike&gt;'.</span></span>
<span class="line"><span>error TS2345: Argument of type 'ArrayBufferLike' is not assignable to parameter of type 'ArrayBuffer'.</span></span>
<span class="line"><span>error TS2345: Argument of type 'Buffer' is not assignable to parameter of type 'string | ArrayBufferView | Stream | Iterable&lt;string | ArrayBufferView&gt; | AsyncIterable&lt;string | ArrayBufferView&gt;'.</span></span></code></pre><p>ä½ å¯èƒ½éœ€è¦æ›´æ–° <code>@types/node</code> åŒ…ã€‚</p><p>å¯ä»¥åœ¨æ­¤ <a href="https://github.com/microsoft/TypeScript/pull/59417" target="_blank" rel="noopener">PR</a> ä¸Šé˜…è¯»å…³äºè¯¥å˜æ›´çš„å…·ä½“å†…å®¹ã€‚</p><h3 id="ä¸ºç±»ä¸­çš„éå­—é¢æ–¹æ³•ååˆ›å»ºç´¢å¼•ç­¾å" tabindex="-1">ä¸ºç±»ä¸­çš„éå­—é¢æ–¹æ³•ååˆ›å»ºç´¢å¼•ç­¾å <a class="header-anchor" href="#ä¸ºç±»ä¸­çš„éå­—é¢æ–¹æ³•ååˆ›å»ºç´¢å¼•ç­¾å">ğŸ”—</a></h3><p>TypeScript ç°åœ¨å¯¹ç±»ä¸­çš„æ–¹æ³•ä¼šæœ‰æ›´åŠ ä¸€è‡´çš„è¡Œä¸ºï¼Œè¿™ä¹ŸåŒ…æ‹¬é€šè¿‡éå­—é¢çš„è®¡ç®—å±æ€§åç§°å®šä¹‰çš„æ–¹æ³•ã€‚æ¯”å¦‚ï¼š</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">declare const </span><span style="--s-dark:#BD976A;--s-light:#B07D48">symbolMethodName</span><span style="--s-dark:#666666;--s-light:#999999">: </span><span style="--s-dark:#5DA994;--s-light:#2E8F82">symbol</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"></span>
<span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">export</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> class</span><span style="--s-dark:#5DA994;--s-light:#2E8F82"> A</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  [</span><span style="--s-dark:#BD976A;--s-light:#B07D48">symbolMethodName</span><span style="--s-dark:#666666;--s-light:#999999">]()</span><span style="--s-dark:#666666;--s-light:#999999"> {</span><span style="--s-dark:#4D9375;--s-light:#1E754F"> return</span><span style="--s-dark:#4C9A91;--s-light:#2F798A"> 1</span><span style="--s-dark:#666666;--s-light:#999999"> };</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span></code></pre><p>å…ˆå‰ TypeScript åªä¼šä»¥ç±»ä¼¼ä¸‹é¢çš„æ–¹å¼å±•ç¤ºè¿™ä¸ªç±»ï¼š</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">export</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> class</span><span style="--s-dark:#5DA994;--s-light:#2E8F82"> A</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span></code></pre><p>ä¹Ÿå°±æ˜¯è¯´ï¼Œä»ç±»å‹ç³»ç»Ÿçš„è§’åº¦çœ‹ï¼Œ <code>[symbolMethodName]</code> å¯¹ <code>A</code> çš„ç±»å‹æ²¡æœ‰ä»»ä½•è´¡çŒ®ã€‚</p><p>TypeScript 5.7 ç°åœ¨ä¼šæ›´æœ‰æ„ä¹‰åœ°å±•ç¤º <code>[symbolMethodName]() {}</code> æ–¹æ³•ï¼Œå¹¶ç”Ÿæˆä¸€ä¸ªæ‰€ä»¥ç­¾åã€‚å› æ­¤ï¼Œä¸Šé¢æåŠçš„ä»£ç ä¼šè¢«è§£é‡Šä¸ºç±»ä¼¼å¦‚ä¸‹çš„ä»£ç ï¼š</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#4D9375;--s-light:#1E754F">export</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> class</span><span style="--s-dark:#5DA994;--s-light:#2E8F82"> A</span><span style="--s-dark:#666666;--s-light:#999999"> {</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">  [</span><span style="--s-dark:#BD976A;--s-light:#B07D48">x</span><span style="--s-dark:#666666;--s-light:#999999">: </span><span style="--s-dark:#5DA994;--s-light:#2E8F82">symbol</span><span style="--s-dark:#666666;--s-light:#999999">]: () =&gt; </span><span style="--s-dark:#5DA994;--s-light:#2E8F82">number</span><span style="--s-dark:#666666;--s-light:#999999">;</span></span>
<span class="line"><span style="--s-dark:#666666;--s-light:#999999">}</span></span></code></pre><p>è¿™ä¸ªç‰¹æ€§æä¾›äº†ä¸å­—é¢å¯¹è±¡ä¸­çš„å±æ€§å’Œæ–¹æ³•ä¸€è‡´çš„è¡Œä¸ºã€‚</p><p>æ›´å¤šä¿¡æ¯æŸ¥çœ‹æ­¤ <a href="https://github.com/microsoft/TypeScript/pull/59860" target="_blank" rel="noopener">PR</a> ã€‚</p><h3 id="å¯¹è¿”å›-null-å’Œ-undefined-çš„å‡½æ•°ä¸Šæç¤ºæ›´å¤šéšå¼-any-é”™è¯¯" tabindex="-1">å¯¹è¿”å› null å’Œ undefined çš„å‡½æ•°ä¸Šæç¤ºæ›´å¤šéšå¼ any é”™è¯¯ <a class="header-anchor" href="#å¯¹è¿”å›-null-å’Œ-undefined-çš„å‡½æ•°ä¸Šæç¤ºæ›´å¤šéšå¼-any-é”™è¯¯">ğŸ”—</a></h3><p>å½“ä¸€ä¸ªå‡½æ•°è¡¨è¾¾å¼é€šè¿‡ä¸€ä¸ªæ³›å‹ç±»å‹ç­¾åè¿”å›çš„ç±»å‹è¿›è¡Œä¸Šä¸‹æ–‡ç±»å‹åŒ–æ—¶ï¼Œ TypeScript ç°åœ¨ä¼šé€‚å½“åœ°åœ¨ <code>noImplicitAny</code> ä¸‹æä¾›ä¸€ä¸ªéšå¼ <code>any</code> é”™è¯¯ï¼Œä½†åœ¨ <code>strictNullChecks</code> ä¸‹åˆ™ä¸ä¼šã€‚</p><pre class="shiki shiki-themes vitesse-dark vitesse-light" style="--s-dark:#dbd7caee;--s-light:#393a34;--s-dark-bg:#121212;--s-light-bg:#ffffff" tabindex="0"><code class="language-typescript"><span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">declare var </span><span style="--s-dark:#BD976A;--s-light:#B07D48">p</span><span style="--s-dark:#666666;--s-light:#999999">: </span><span style="--s-dark:#5DA994;--s-light:#2E8F82">Promise</span><span style="--s-dark:#666666;--s-light:#999999">&lt;</span><span style="--s-dark:#5DA994;--s-light:#2E8F82">number</span><span style="--s-dark:#666666;--s-light:#999999">&gt;;</span></span>
<span class="line"><span style="--s-dark:#CB7676;--s-light:#AB5959">const </span><span style="--s-dark:#BD976A;--s-light:#B07D48">p2</span><span style="--s-dark:#666666;--s-light:#999999"> =</span><span style="--s-dark:#BD976A;--s-light:#B07D48"> p</span><span style="--s-dark:#666666;--s-light:#999999">.</span><span style="--s-dark:#80A665;--s-light:#59873A">catch</span><span style="--s-dark:#666666;--s-light:#999999">(()</span><span style="--s-dark:#666666;--s-light:#999999"> =&gt;</span><span style="--s-dark:#CB7676;--s-light:#AB5959"> null</span><span style="--s-dark:#666666;--s-light:#999999">);</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">//                 ~~~~~~~~~~</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">// error TS7011: Function expression, which lacks return-type annotation, implicitly has an 'any' return type.</span></span>
<span class="line"><span style="--s-dark:#758575DD;--s-light:#A0ADA0">// ç¼ºä¹è¿”å›ç±»å‹æ³¨é‡Šçš„å‡½æ•°é»˜è®¤æœ‰ä¸€ä¸ªéšå¼çš„ any è¿”å›ç±»å‹</span></span></code></pre></div><!--]--></div><div flex="~ wrap" text="[var(--mygo-c-text-2)]" mt-8="" gap-4="" justify-center=""><!--[--><div>#TypeScript</div><div>#JavaScript</div><!--]--></div><!--]--></div></div><div class="mujika-card mujika-card--hover mujika-card--border" w-full="" overflow-auto="" data-v-7ac4adc5=""><div class="p-4 lg:p-8" data-v-7ac4adc5=""><!--[--><div flex="~ wrap" gap-4=""><a href="/62a21028aeac" class="" truncate="" title="ECMAScript2024ï¼ˆes15ï¼‰æ–°ç‰¹æ€§"><i class="i-mi:chevron-left" mr-1=""></i><span>ECMAScript2024ï¼ˆes15ï¼‰æ–°ç‰¹æ€§</span></a><a href="/8daeef187878" class="" ml-auto="" truncate="" title="è®°å½•ä½¿ç”¨ electron çš„ä¸€æ¬¡ç»å†"><span>è®°å½•ä½¿ç”¨ electron çš„ä¸€æ¬¡ç»å†</span><i class="i-mi:chevron-right" ml-1=""></i></a></div><!--]--></div></div><!--[--><div class="mujika-card mujika-card--hover mujika-card--border" w-full="" overflow-auto="" data-v-557c65bc="" data-v-7ac4adc5=""><div class="p-4 lg:p-8" data-v-7ac4adc5=""><!--[--><div flex="" gap-4="" items-start="" data-v-557c65bc=""><div flex="~ shrink-0" bg="[var(--mygo-c-bg-alt)]" rounded-6px="" w-60px="" aspect-ratio-square="" items-center="" justify-center="" data-v-557c65bc=""><i text-40px="" text="[#999]" class="i-fa6-regular:user" data-v-557c65bc=""></i></div><div flex="~ col grow" gap-2="" lg:gap-4="" data-v-557c65bc=""><textarea disabled="" placeholder="ä¸‡æ°´åƒå±±æ€»æ˜¯æƒ…ï¼Œç•™ä¸‹è¯„è®ºè¡Œä¸è¡Œ" class="mujika-git-talk-textarea" un-disabled:cursor-not-allowed="" p-2="" outline-0="" h-4em="" lg:p-4="" lg:h-8em="" data-v-557c65bc=""></textarea><div flex="" items-start="" data-v-557c65bc=""><a target="_blank" href="https://guides.github.com/features/mastering-markdown/" data-v-557c65bc="">æ”¯æŒ Markdown è¯­æ³•</a><div ml-auto="" data-v-557c65bc=""></div><!----><button class="mujika-button" data-v-557c65bc="" data-v-15330f5f=""><!--[--><!--]--><!--[-->ç‚¹å‡»ç™»å½•<!--]--></button></div></div></div><!--]--></div></div><div class="mujika-card mujika-card--hover mujika-card--border" w-full="" overflow-auto="" data-v-557c65bc="" data-v-7ac4adc5=""><div class="p-4 lg:p-8" data-v-7ac4adc5=""><!--[--><div flex="" items-center="" justify-center="" data-v-557c65bc="">å“¦å‘¢è¯¥ï¼Œå¦‚æœæ²¡æœ‰è¯„è®ºçš„è¯ï¼Œç“¦è¾¾è¥¿...</div><!----><!--]--></div></div><!--]--></div><aside class="mujika-aside" w="280px" flex="~ col shrink-0" top-2="" sticky="" max-h="[calc(100vh-var(--spacing)*4)]" un-hidden="" lg:block=""><div class="mujika-card mujika-card--hover mujika-card--border" w-full="" overflow-auto="" flex="~ col" gap-4="" data-v-7ac4adc5=""><!--[--><div p="4 b-0" flex-shrink-0="">æ–‡ç« ç›®å½•</div><div p="4 t-0" flex-grow="" min-h-0="" overflow-y-auto=""><!----></div><!--]--></div></aside><!--teleport start--><!--teleport end--></div></main><footer class="mujika-footer" px-4="" py-6="" bg="[var(--mygo-c-bg)]" flex="~ col shrink-0" gap-2="" items-center="" data-v-689781c6=""><div flex="" items-center="" data-v-689781c6=""><span data-v-689781c6="">ç”±&nbsp;</span><i class="i-logos:vue" data-v-689781c6=""></i><span data-v-689781c6="">&nbsp;+&nbsp;</span><i class="i-logos:vitejs" data-v-689781c6=""></i><span data-v-689781c6="">&nbsp;é©±åŠ¨</span></div><div text-center="" data-v-689781c6=""><a target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/" data-v-689781c6="">CC BY-NC-SA 4.0 </a>2021 - PRESENT Â© Dedicatus545</div><div text="[var(--mygo-c-text-2)]" text-center="" data-v-689781c6="">å¦‚æœæˆ‘å’Œç‹—ä¸€æ ·æœ‰å°¾å·´çš„è¯ï¼Œä¸€å®šä¼šè—ä¸ä½è¿™ä»½å–œæ‚¦ï¼Œè€Œå°¾å·´ä¸€ç›´æ‘‡ä¸ªä¸åœå§ã€‚ - ã€Šç§’é€Ÿäº”å˜ç±³ã€‹</div></footer></div></div></body></html>